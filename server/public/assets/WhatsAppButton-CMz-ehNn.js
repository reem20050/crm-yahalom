import{x as v,r as a,j as e,X as y}from"./index-DNhSfFTF.js";import{M as f}from"./message-circle-CWw4z9y6.js";import{E as N}from"./external-link-BplGfNjn.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=v("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function E(s){if(!s)return"";let t=s.replace(/[^0-9]/g,"");return t.startsWith("0")&&(t="972"+t.slice(1)),t.length===9&&(t="972"+t),t}function u(s,t){const i=E(s);if(!i)return;let r=`https://wa.me/${i}`;t&&(r+=`?text=${encodeURIComponent(t)}`),window.open(r,"_blank")}function A({phone:s,name:t,size:i="md",defaultMessage:r}){const[o,l]=a.useState(!1),[c,h]=a.useState(r||""),d=a.useRef(null),x=a.useRef(null);a.useEffect(()=>{r&&h(r)},[r]),a.useEffect(()=>{o&&setTimeout(()=>{var n;return(n=x.current)==null?void 0:n.focus()},50)},[o]),a.useEffect(()=>{if(!o)return;const n=j=>{d.current&&!d.current.contains(j.target)&&l(!1)},m=setTimeout(()=>{document.addEventListener("mousedown",n)},0);return()=>{clearTimeout(m),document.removeEventListener("mousedown",n)}},[o]),a.useEffect(()=>{if(!o)return;const n=m=>{m.key==="Escape"&&l(!1)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[o]);const p=()=>{c.trim()&&(u(s,c),l(!1))},g=()=>{u(s),l(!1)},w=i==="sm"?"w-4 h-4":"w-5 h-5",b=i==="sm"?"w-8 h-8":"w-10 h-10";return s?e.jsxs("div",{className:"relative inline-block",ref:d,children:[e.jsx("button",{onClick:()=>l(!o),title:"שלח הודעת WhatsApp",className:`${b} flex items-center justify-center rounded-lg bg-gradient-to-br from-green-500 to-emerald-600 text-white hover:from-green-600 hover:to-emerald-700 shadow-sm hover:shadow-md transition-all duration-200`,children:e.jsx(f,{className:w})}),o&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-80 bg-white rounded-xl shadow-elevated border border-gray-200 z-50 overflow-hidden animate-slide-up",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-gradient-to-l from-green-50 to-emerald-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:e.jsx(f,{className:"w-3.5 h-3.5 text-white"})}),e.jsxs("h3",{className:"text-sm font-semibold font-heading text-gray-900",children:["שלח הודעה ל-",t]})]}),e.jsx("button",{onClick:()=>l(!1),className:"btn-icon w-7 h-7",children:e.jsx(y,{className:"w-4 h-4 text-gray-400"})})]}),e.jsx("div",{className:"p-4",children:e.jsx("textarea",{ref:x,value:c,onChange:n=>h(n.target.value),placeholder:"כתוב הודעה...",rows:4,className:"input resize-none text-sm",dir:"rtl"})}),e.jsxs("div",{className:"flex items-center gap-2 px-4 pb-4",children:[e.jsxs("button",{onClick:p,disabled:!c.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg hover:from-green-600 hover:to-emerald-700 shadow-sm hover:shadow-md transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:"שלח עם הודעה"})]}),e.jsxs("button",{onClick:g,className:"btn-ghost flex items-center justify-center gap-2 px-4 py-2 text-sm",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"פתח צ'אט"})]})]})]})]}):null}function L({phone:s,message:t,size:i=14}){return s?e.jsx("button",{onClick:r=>{r.stopPropagation(),u(s,t)},title:"שלח WhatsApp",className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-sm transition-all duration-200",children:e.jsx(f,{size:i})}):null}export{k as S,A as W,L as a,u as o};
