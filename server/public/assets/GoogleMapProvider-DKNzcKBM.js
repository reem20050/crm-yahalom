import{a1 as te,r as l,a0 as E,ab as U,d as ne,j as P,ac as oe}from"./index-C0i1J-sF.js";var re=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var o,r,i;if(Array.isArray(e)){if(o=e.length,o!=n.length)return!1;for(r=o;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),o=i.length,o!==Object.keys(n).length)return!1;for(r=o;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[r]))return!1;for(r=o;r--!==0;){var s=i[r];if(!t(e[s],n[s]))return!1}return!0}return e!==e&&n!==n};const J=te(re),ie="1.7.1";function _(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function G(t,e,n,o){function r(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(u){try{f(o.next(u))}catch(m){s(m)}}function d(u){try{f(o.throw(u))}catch(m){s(m)}}function f(u){u.done?i(u.value):r(u.value).then(a,d)}f((o=o.apply(t,[])).next())})}const x={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},se="https://maps.googleapis.com/maps/api/js";class F{static load(e,n){return G(this,void 0,void 0,function*(){var o,r;const i=e.libraries?e.libraries.split(","):[],s=this.serializeParams(e);this.listeners.push(n),!((r=(o=window.google)===null||o===void 0?void 0:o.maps)===null||r===void 0)&&r.importLibrary?(this.serializedApiParams||(this.loadingStatus=x.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=s,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==s&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const a=["maps",...i];yield Promise.all(a.map(d=>google.maps.importLibrary(d)))})}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let n=null;const o=()=>n||(n=new Promise((r,i)=>{var s;const a=document.createElement("script"),d=new URLSearchParams;for(const[f,u]of Object.entries(e)){const m=f.replace(/[A-Z]/g,g=>"_"+g[0].toLowerCase());d.set(m,String(u))}d.set("loading","async"),d.set("callback","__googleMapsCallback__"),a.async=!0,a.src=se+"?"+d.toString(),a.nonce=((s=document.querySelector("script[nonce]"))===null||s===void 0?void 0:s.nonce)||"",a.onerror=()=>{this.loadingStatus=x.FAILED,this.notifyLoadingStatusListeners(),i(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=x.LOADED,this.notifyLoadingStatusListeners(),r()},window.gm_authFailure=()=>{this.loadingStatus=x.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=x.LOADING,this.notifyLoadingStatusListeners(),document.head.append(a)}),n);google.maps.importLibrary=r=>o().then(()=>google.maps.importLibrary(r))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}F.loadingStatus=x.NOT_LOADED;F.listeners=[];const ae="GMP_visgl_rgmlibrary_v1_default",le=[`gmp_visgl_reactgooglemaps_v${ie}`],N=E.createContext(null);function ce(){const[t,e]=l.useState({});return{mapInstances:t,addMapInstance:(i,s="default")=>{e(a=>Object.assign(Object.assign({},a),{[s]:i}))},removeMapInstance:(i="default")=>{e(s=>{var a=i;s[a];var d=_(s,[typeof a=="symbol"?a:a+""]);return d})},clearMapInstances:()=>{e({})}}}function ue(t){const{onLoad:e,onError:n,apiKey:o,version:r,libraries:i=[]}=t,s=_(t,["onLoad","onError","apiKey","version","libraries"]),[a,d]=l.useState(F.loadingStatus),[f,u]=l.useReducer((c,h)=>c[h.name]?c:Object.assign(Object.assign({},c),{[h.name]:h.value}),{}),m=l.useMemo(()=>i==null?void 0:i.join(","),[i]),g=l.useMemo(()=>JSON.stringify(Object.assign({apiKey:o,version:r},s)),[o,r,s]),p=l.useCallback(c=>G(this,void 0,void 0,function*(){var h;if(f[c])return f[c];if(!(!((h=google==null?void 0:google.maps)===null||h===void 0)&&h.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const b=yield window.google.maps.importLibrary(c);return u({name:c,value:b}),b}),[f]);return l.useEffect(()=>{G(this,void 0,void 0,function*(){try{const c=Object.assign({key:o},s);r&&(c.v=r),(m==null?void 0:m.length)>0&&(c.libraries=m),(c.channel===void 0||c.channel<0||c.channel>999)&&delete c.channel,c.solutionChannel===void 0?c.solutionChannel=ae:c.solutionChannel===""&&delete c.solutionChannel,yield F.load(c,h=>d(h));for(const h of["core","maps",...i])yield p(h);e&&e()}catch(c){n?n(c):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",c)}})},[o,m,g]),{status:a,loadedLibraries:f,importLibrary:p}}function de(t){return l.useMemo(()=>t.disableUsageAttribution?null:le,[t.disableUsageAttribution])}const fe=t=>{const{children:e}=t,n=_(t,["children"]),{mapInstances:o,addMapInstance:r,removeMapInstance:i,clearMapInstances:s}=ce(),{status:a,loadedLibraries:d,importLibrary:f}=ue(n),u=de(n),m=l.useMemo(()=>({mapInstances:o,addMapInstance:r,removeMapInstance:i,clearMapInstances:s,status:a,loadedLibraries:d,importLibrary:f,internalUsageAttributionIds:u}),[o,r,i,s,a,d,f,u]);return E.createElement(N.Provider,{value:m},e)};function ge(t,e){for(const n of ve){const o=e[n],r=K[n];l.useEffect(()=>{if(!t||!o)return;const i=google.maps.event.addListener(t,r,s=>{o(me(r,t,s))});return()=>i.remove()},[t,r,o])}}function me(t,e,n){var o;const r={type:t,map:e,detail:{},stoppable:!1,stop:()=>{}};if(pe.includes(t)){const i=r,s=e.getCenter(),a=e.getZoom(),d=e.getHeading()||0,f=e.getTilt()||0,u=e.getBounds();return(!s||!u||!Number.isFinite(a))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),i.detail={center:(s==null?void 0:s.toJSON())||{lat:0,lng:0},zoom:a||0,heading:d,tilt:f,bounds:(u==null?void 0:u.toJSON())||{north:90,east:180,south:-90,west:-180}},i}else if(he.includes(t)){if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const i=r;return i.domEvent=n.domEvent,i.stoppable=!0,i.stop=()=>n.stop(),i.detail={latLng:((o=n.latLng)===null||o===void 0?void 0:o.toJSON())||null,placeId:n.placeId},i}return r}const K={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},pe=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],he=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],ve=Object.keys(K);function ye(t){const e=l.useRef(void 0);return l.useEffect(()=>{e.current=t}),e.current}function $(t,e){const n=ye(t);return l.useMemo(()=>n&&e(n,t)?n:t,[t,n,e])}function be(t,e,n){l.useEffect(t,[$(e,n)])}function Ee(t,e){be(t,e,J)}const Ce=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function Oe(t,e){const n={},o=Object.keys(e);for(const r of o)Ce.has(r)&&(n[r]=e[r]);Ee(()=>{t&&t.setOptions(n)},[n])}function q(){var t;return((t=l.useContext(N))===null||t===void 0?void 0:t.status)||x.NOT_LOADED}function Le(t,e){const{viewport:n,viewState:o}=e,r=!!n;return l.useLayoutEffect(()=>{if(!t||!o)return;const{latitude:i,longitude:s,bearing:a,pitch:d,zoom:f}=o;t.moveCamera({center:{lat:i,lng:s},heading:a,tilt:d,zoom:f+1})},[t,o]),r}function we(t){return!t||typeof t!="object"||!("lat"in t&&"lng"in t)?!1:Number.isFinite(t.lat)&&Number.isFinite(t.lng)}function Y(t){return we(t)?t:t.toJSON()}function Me(t,e,n){const o=n.center?Y(n.center):null;let r=null,i=null;o&&Number.isFinite(o.lat)&&Number.isFinite(o.lng)&&(r=o.lat,i=o.lng);const s=Number.isFinite(n.zoom)?n.zoom:null,a=Number.isFinite(n.heading)?n.heading:null,d=Number.isFinite(n.tilt)?n.tilt:null;l.useLayoutEffect(()=>{if(!t)return;const f={};let u=!1;r!==null&&i!==null&&(e.current.center.lat!==r||e.current.center.lng!==i)&&(f.center={lat:r,lng:i},u=!0),s!==null&&e.current.zoom!==s&&(f.zoom=s,u=!0),a!==null&&e.current.heading!==a&&(f.heading=a,u=!0),d!==null&&e.current.tilt!==d&&(f.tilt=d,u=!0),u&&t.moveCamera(f)})}const Ie=()=>{const t={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return E.createElement("div",{style:t},E.createElement("h2",null,"Error: AuthFailure"),E.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",E.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function Se(){const[t,e]=l.useState(null),n=l.useCallback(o=>e(o),[e]);return[t,n]}function X(){return q()===x.LOADED}function Ae(){const[,t]=l.useReducer(e=>e+1,0);return t}function xe(t,e){const n=t.getCenter(),o=t.getZoom(),r=t.getHeading()||0,i=t.getTilt()||0,s=t.getBounds();(!n||!s||!Number.isFinite(o))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(e.current,{center:(n==null?void 0:n.toJSON())||{lat:0,lng:0},zoom:o||0,heading:r,tilt:i})}function ke(t){const e=Ae(),n=l.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return l.useEffect(()=>{if(!t)return;const o=google.maps.event.addListener(t,"bounds_changed",()=>{xe(t,n),e()});return()=>o.remove()},[t,e]),n}class z{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,n){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(n)}}z.entries={};function _e(t,e){const n=X(),[o,r]=l.useState(null),[i,s]=Se(),a=ke(o),{id:d,defaultBounds:f,defaultCenter:u,defaultZoom:m,defaultHeading:g,defaultTilt:p,reuseMaps:c,renderingType:h,colorScheme:b}=t,v=_(t,["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"]),w=t.zoom!==void 0||t.defaultZoom!==void 0,y=t.center!==void 0||t.defaultCenter!==void 0;!f&&(!w||!y)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!v.center&&u&&(v.center=u),!v.zoom&&Number.isFinite(m)&&(v.zoom=m),!v.heading&&Number.isFinite(g)&&(v.heading=g),!v.tilt&&Number.isFinite(p)&&(v.tilt=p);const M=v.internalUsageAttributionIds;M==null?v.internalUsageAttributionIds=e.internalUsageAttributionIds:v.internalUsageAttributionIds=[...e.internalUsageAttributionIds||[],...M];for(const L of Object.keys(v))v[L]===void 0&&delete v[L];const S=l.useRef(void 0);return l.useEffect(()=>{if(!i||!n)return;const{addMapInstance:L,removeMapInstance:k}=e,{mapId:A}=t,I=`${A||"default"}:${h||"default"}:${b||"LIGHT"}`;let C,O;if(c&&z.has(I)?(O=z.pop(I),C=O.getDiv(),i.appendChild(C),O.setOptions(v),setTimeout(()=>O.setCenter(O.getCenter()),0)):(C=document.createElement("div"),C.style.height="100%",i.appendChild(C),O=new google.maps.Map(C,Object.assign(Object.assign(Object.assign({},v),h?{renderingType:h}:{}),b?{colorScheme:b}:{}))),r(O),L(O,d),f){const{padding:R}=f,j=_(f,["padding"]);O.fitBounds(j,R)}else(!w||!y)&&O.fitBounds({east:180,west:-180,south:-90,north:90});if(S.current){const{mapId:R,cameraState:j}=S.current;R!==A&&O.setOptions(j)}return()=>{S.current={mapId:A,cameraState:a.current},C.remove(),c?z.push(I,O):google.maps.event.clearInstanceListeners(O),r(null),k(d)}},[i,n,d,t.mapId,t.renderingType,t.colorScheme]),[o,s,a]}const Q=E.createContext(null),Pe=t=>{const{children:e,id:n,className:o,style:r}=t,i=l.useContext(N),s=q();if(!i)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[a,d,f]=_e(t,i);Me(a,f,t),ge(a,t),Oe(a,t);const u=Le(a,t),m=!!t.controlled;l.useEffect(()=>{if(a)return u&&a.setOptions({disableDefaultUI:!0}),(u||m)&&a.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{a.setOptions({gestureHandling:t.gestureHandling,keyboardShortcuts:t.keyboardShortcuts})}},[a,u,m,t.gestureHandling,t.keyboardShortcuts]);const g=t.center?Y(t.center):null;let p=null,c=null;g&&Number.isFinite(g.lat)&&Number.isFinite(g.lng)&&(p=g.lat,c=g.lng);const h=l.useMemo(()=>{var w,y,M;return{center:{lat:p??0,lng:c??0},zoom:(w=t.zoom)!==null&&w!==void 0?w:0,heading:(y=t.heading)!==null&&y!==void 0?y:0,tilt:(M=t.tilt)!==null&&M!==void 0?M:0}},[p,c,t.zoom,t.heading,t.tilt]);l.useLayoutEffect(()=>{if(!a||!m)return;a.moveCamera(h);const w=a.addListener("bounds_changed",()=>{a.moveCamera(h)});return()=>w.remove()},[a,m,h]);const b=l.useMemo(()=>Object.assign({width:"100%",height:"100%",position:"relative",zIndex:u?-1:0},r),[r,u]),v=l.useMemo(()=>({map:a}),[a]);return s===x.AUTH_FAILURE?E.createElement("div",{style:Object.assign({position:"relative"},o?{}:b),className:o},E.createElement(Ie,null)):E.createElement("div",Object.assign({ref:d,"data-testid":"map",style:o?void 0:b,className:o},n?{id:n}:{}),a?E.createElement(Q.Provider,{value:v},e):null)};Pe.deckGLViewProps=!0;const Z=new Set;function De(...t){const e=JSON.stringify(t);Z.has(e)||(Z.add(e),console.error(...t))}const H=(t=null)=>{const e=l.useContext(N),{map:n}=l.useContext(Q)||{};if(e===null)return De("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:o}=e;return t!==null?o[t]||null:n||o.default||null};function ee(t){const e=X(),n=l.useContext(N);return l.useEffect(()=>{!e||!n||n.importLibrary(t)},[e,n,t]),(n==null?void 0:n.loadedLibraries[t])||null}function D(t,e,n){l.useEffect(()=>{if(!t||!e||!n)return;const o=google.maps.event.addListener(t,e,n);return()=>o.remove()},[t,e,n])}function T(t,e,n){l.useEffect(()=>{t&&(t[e]=n)},[t,e,n])}function V(t,e,n){l.useEffect(()=>{if(!(!t||!e||!n))return t.addEventListener(e,n),()=>t.removeEventListener(e,n)},[t,e,n])}class Ne{constructor(){this.renderedStyles=new Set,this.styleElement=null}getStyleElement(){return this.styleElement||(this.styleElement=document.createElement("style"),this.styleElement.setAttribute("data-rgm-anchor-styles",""),document.head.appendChild(this.styleElement)),this.styleElement}addAdvancedMarkerPointerEventsOverwrite(){if(this.renderedStyles.has("marker-pointer-events"))return;const e=this.getStyleElement();e.textContent+=`
      gmp-advanced-marker[data-origin='rgm'] {
        pointer-events: none !important;
      }
    `,this.renderedStyles.add("marker-pointer-events")}cleanup(){this.styleElement&&(this.styleElement.remove(),this.styleElement=null,this.renderedStyles.clear())}}const Te=new Ne;function ze(t,e){var n;if(!(!((n=google==null?void 0:google.maps)===null||n===void 0)&&n.version))return;const o=google.maps.version.split("."),r=parseInt(o[0],10),i=parseInt(o[1],10);return r>t||r===t&&i>=e}const Fe=E.createContext(null),Re={BOTTOM:["50%","100%"]},je=l.forwardRef((t,e)=>{const{children:n,style:o,className:r,anchorPoint:i}=t,[s,a]=Be(t),d=l.useMemo(()=>s?{marker:s}:null,[s]);return l.useImperativeHandle(e,()=>s,[s]),a?E.createElement(Fe.Provider,{value:d},U.createPortal(E.createElement(Ge,{anchorPoint:i,styles:o,className:r},n),a)):null});je.displayName="AdvancedMarker";function Ue(t){return t.content!==void 0}function B(t){return t.nodeType===Node.ELEMENT_NODE}const Ge=({children:t,styles:e,className:n})=>E.createElement("div",{className:n,style:e},t);function Be(t){const[e,n]=l.useState(null),[o,r]=l.useState(null),i=H(),s=ee("marker"),{children:a,onClick:d,className:f,onMouseEnter:u,onMouseLeave:m,onDrag:g,onDragStart:p,onDragEnd:c,collisionBehavior:h,clickable:b,draggable:v,position:w,title:y,zIndex:M,anchorPoint:S,anchorLeft:L,anchorTop:k}=t,A=l.Children.count(a);return l.useEffect(()=>{if(!i||!s)return;const I=new s.AdvancedMarkerElement;I.map=i,n(I);let C=null;return A>0&&(C=document.createElement("div"),I.content=C,r(C)),()=>{I.map=null,C==null||C.remove(),n(null),r(null)}},[i,s,A]),l.useEffect(()=>{!(e!=null&&e.content)||!B(e.content)||A>0||(e.content.className=f??"")},[e,f,A]),He(e,S,L,k,A>0),T(e,"position",w),T(e,"title",y??""),T(e,"zIndex",M),T(e,"collisionBehavior",h),l.useEffect(()=>{e&&(v!==void 0?e.gmpDraggable=v:g||p||c?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,v,g,c,p]),l.useEffect(()=>{if(!e)return;const I=b!==void 0||!!d||!!u||!!m;e.gmpClickable=I,I&&(e!=null&&e.content)&&B(e.content)&&(e.content.style.pointerEvents="all",d&&(e.content.style.cursor="pointer"))},[e,b,d,u,m]),D(e,"click",d),D(e,"drag",g),D(e,"dragstart",p),D(e,"dragend",c),V(e==null?void 0:e.element,"mouseenter",u),V(e==null?void 0:e.element,"mouseleave",m),[e,o]}function He(t,e,n,o,r){l.useEffect(()=>{if(!t||!r)return;const i=ze(3,62),s=t.content;if(!(!s||!B(s))){if(n!==void 0||o!==void 0){i||console.warn(`AdvancedMarker: The anchorLeft and anchorTop props are only supported in Google Maps API version 3.62 and above. The current version is ${google.maps.version}.`),t.anchorLeft=n,t.anchorTop=o,e!==void 0&&console.warn("AdvancedMarker: the anchorPoint prop is ignored when anchorLeft and/or anchorTop are set.");return}if(e!==void 0){const[a,d]=e??Re.BOTTOM,f=`calc(-1 * ${a})`,u=`calc(-1 * ${d})`;i?(t.anchorLeft=f,t.anchorTop=u,s.style.transform=""):(s.style.transform=`translate(50%, 100%) translate(${f}, ${u})`,t.dataset.origin="rgm",Te.addAdvancedMarkerPointerEventsOverwrite())}}},[t,e,n,o,r])}function Ze(t,e,n){if(e!=null&&typeof e!="object")throw new Error("The `style` prop expects a mapping from style properties to values, not a string. For example, style={{marginRight: spacing + 'em'}} when using JSX.");const o=t.style;if(n==null){if(e==null)return;for(const r in e)e.hasOwnProperty(r)&&W(o,r,e[r]);return}for(const r in n)n.hasOwnProperty(r)&&(e==null||!e.hasOwnProperty(r))&&(r.indexOf("--")===0?o.setProperty(r,""):r==="float"?o.cssFloat="":o[r]="");if(e!=null)for(const r in e){const i=e[r];e.hasOwnProperty(r)&&n[r]!==i&&W(o,r,i)}}function W(t,e,n){const o=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?o?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":o?t.setProperty(e,n):typeof n=="number"&&n!==0&&!We(e)?t[e]=n+"px":e==="float"?t.cssFloat=n:t[e]=(""+n).trim()}const Ve=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexPositive","flexShrink","flexNegative","flexOrder","gridArea","gridRow","gridRowEnd","gridRowSpan","gridRowStart","gridColumn","gridColumnEnd","gridColumnSpan","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","fillOpacity","floodOpacity","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth"]);function We(t){return Ve.has(t)}const qe=t=>{const{children:e,headerContent:n,style:o,className:r,pixelOffset:i,anchor:s,shouldFocus:a,onClose:d,onCloseClick:f}=t,u=_(t,["children","headerContent","style","className","pixelOffset","anchor","shouldFocus","onClose","onCloseClick"]),m=ee("maps"),[g,p]=l.useState(null),c=l.useRef(null),h=l.useRef(null),b=$(u,J);l.useEffect(()=>{if(!m)return;c.current=document.createElement("div"),h.current=document.createElement("div");const y=b;i&&(y.pixelOffset=new google.maps.Size(i[0],i[1])),n&&(y.headerContent=typeof n=="string"?n:h.current);const M=new google.maps.InfoWindow(b);return M.setContent(c.current),p(M),()=>{var S,L;M.setContent(null),(S=c.current)===null||S===void 0||S.remove(),(L=h.current)===null||L===void 0||L.remove(),c.current=null,h.current=null,p(null)}},[m]);const v=l.useRef(null);l.useEffect(()=>{!g||!c.current||(Ze(c.current,o||null,v.current),v.current=o||null,r!==c.current.className&&(c.current.className=r||""))},[g,r,o]),l.useEffect(()=>{if(!g)return;const y=b;i?y.pixelOffset=new google.maps.Size(i[0],i[1]):y.pixelOffset=null,n?y.headerContent=typeof n=="string"?n:h.current:y.headerContent=null,g.setOptions(b)},[b,i,n]),D(g,"close",d),D(g,"closeclick",f);const w=H();return l.useEffect(()=>{var y;if(!w||!g||s===null)return;const M=!!s,S={map:w};if(s&&(S.anchor=s,Ue(s)&&s.content instanceof Element)){const L=s==null?void 0:s.getBoundingClientRect();if(L&&s.dataset.origin==="rgm"){const k=(y=s.content.firstElementChild)===null||y===void 0?void 0:y.firstElementChild,A=k==null?void 0:k.getBoundingClientRect(),I=A.x-L.x+(A.width-L.width)/2,C=A.y-L.y,O=b;O.pixelOffset=new google.maps.Size(i?i[0]+I:I,i?i[1]+C:C),g.setOptions(O)}}return a!==void 0&&(S.shouldFocus=a),g.open(S),()=>{M&&g.set("anchor",null),g.close()}},[g,s,w,a,b,i]),E.createElement(E.Fragment,null,c.current&&U.createPortal(e,c.current),h.current!==null&&U.createPortal(n,h.current))};function Je(t){const[e,n]=l.useState(null),o=H(),{onClick:r,onDrag:i,onDragStart:s,onDragEnd:a,onMouseOver:d,onMouseOut:f}=t,u=_(t,["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"]),{position:m,draggable:g}=u;return l.useEffect(()=>{if(!o){o===void 0&&console.error("<Marker> has to be inside a Map component.");return}const p=new google.maps.Marker(u);return p.setMap(o),n(p),()=>{p.setMap(null),n(null)}},[o]),l.useEffect(()=>{if(!e)return;const p=e,c=google.maps.event;return r&&c.addListener(p,"click",r),i&&c.addListener(p,"drag",i),s&&c.addListener(p,"dragstart",s),a&&c.addListener(p,"dragend",a),d&&c.addListener(p,"mouseover",d),f&&c.addListener(p,"mouseout",f),e.setDraggable(!!g),()=>{c.clearInstanceListeners(p)}},[e,g,r,i,s,a,d,f]),l.useEffect(()=>{e&&u&&e.setOptions(u)},[e,u]),l.useEffect(()=>{g||!m||!e||e.setPosition(m)},[g,m,e]),e}const Ke=l.forwardRef((t,e)=>{const n=Je(t);return l.useImperativeHandle(e,()=>n,[n]),E.createElement(E.Fragment,null)});Ke.displayName="Marker";function Ye({children:t}){const{data:e,isLoading:n,error:o}=ne({queryKey:["google-maps-key"],queryFn:()=>oe.getApiKey().then(r=>r.data.apiKey),staleTime:1/0,retry:1});return n?P.jsxs("div",{className:"flex items-center justify-center h-full",children:[P.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent"}),P.jsx("span",{className:"mr-3 text-gray-500",children:"טוען מפות..."})]}):o||!e?P.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:P.jsx("p",{children:"Google Maps API key לא מוגדר. הוסף GOOGLE_MAPS_API_KEY בהגדרות השרת."})}):P.jsx(fe,{apiKey:e,language:"he",region:"IL",children:t})}export{Ye as G,qe as I,Pe as M,Ke as a};
