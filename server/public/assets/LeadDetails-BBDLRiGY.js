import{x as I,c as E,r as d,d as S,j as e,X as P,y as O,L as Q,z as m,l as _,D as T,u as A,e as K,B as $}from"./index-DNhSfFTF.js";import{W as z,S as W}from"./WhatsAppButton-CMz-ehNn.js";import{A as R,E as B}from"./EmailComposeModal-sS0c4JJW.js";import{C as H}from"./check-CKd6TXeu.js";import{C as X}from"./chevron-right-C3L6iRaz.js";import{A as D}from"./arrow-left-right-DQnPnGxG.js";import{A as Z,S as G}from"./save-DJuc85Nt.js";import{T as q}from"./trash-2-C8JFUyr_.js";import{P as J}from"./phone-C6GpoGt1.js";import{M as U}from"./mail-elckFBEn.js";import{M as V}from"./map-pin-CnrXv9DV.js";import"./message-circle-CWw4z9y6.js";import"./external-link-BplGfNjn.js";import"./plus-42YS-w1A.js";import"./refresh-cw-JBVqlPPd.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=I("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),ee=["פרטי לקוח","פרטי חוזה","פרטי אתר"],ae=[{value:"office",label:"משרד"},{value:"warehouse",label:"מחסן"},{value:"residential",label:"מגורים"},{value:"commercial",label:"מסחרי"},{value:"industrial",label:"תעשייתי"},{value:"other",label:"אחר"}],se=[{value:"regular",label:"אבטחה קבועה"},{value:"event",label:"אירוע חד-פעמי"},{value:"both",label:"שניהם"}];function te({isOpen:o,onClose:u,lead:n,onSuccess:x}){const p=E(),[r,j]=d.useState(1),[b,C]=d.useState(!1),[N,w]=d.useState(!1),[l,c]=d.useState({company_name:n.company_name||"",contact_name:n.contact_name||"",phone:n.phone||"",email:n.email||"",address:"",city:"",service_type:n.service_type||"",notes:n.description||""}),[i,v]=d.useState({monthly_value:n.expected_value||"",start_date:new Date().toISOString().split("T")[0],end_date:"",terms:"שוטף + 30",auto_renewal:!0}),[a,h]=d.useState({name:(n.company_name||n.contact_name)+" - ראשי",address:n.location||"",city:"",type:"office",contact_name:n.contact_name||"",contact_phone:n.phone||"",requirements:"",notes:""}),g=S({mutationFn:()=>{const s={customer:l};return b&&i.monthly_value&&(s.contract=i),N&&a.name&&(s.site=a),_.convert(n.id,s)},onSuccess:s=>{var f,t;p.invalidateQueries({queryKey:["leads"]}),p.invalidateQueries({queryKey:["lead",n.id]}),p.invalidateQueries({queryKey:["customers"]}),m.success("ליד הומר ללקוח בהצלחה!"),u(),x&&((t=(f=s.data)==null?void 0:f.customer)!=null&&t.id)&&x(s.data.customer.id)},onError:()=>{m.error("שגיאה בהמרת הליד")}}),y=()=>{if(r===1){if(!l.contact_name.trim()){m.error("שם איש קשר הוא שדה חובה");return}if(!l.phone.trim()){m.error("מספר טלפון הוא שדה חובה");return}}j(s=>Math.min(s+1,3))},k=()=>{j(s=>Math.max(s-1,1))},F=()=>{g.mutate()};return o?e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b border-gray-100",children:[e.jsx("h2",{className:"text-xl font-bold font-heading text-gray-900",children:"המרת ליד ללקוח"}),e.jsx("button",{onClick:u,className:"btn-icon",children:e.jsx(P,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex items-center justify-center gap-4 p-4 border-b border-gray-100 bg-gray-50/50",children:[1,2,3].map(s=>e.jsxs("div",{className:`flex items-center gap-2 cursor-pointer ${r>=s?"text-primary-600":"text-gray-400"}`,onClick:()=>{s<r&&j(s)},children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold font-heading transition-all duration-200 ${r===s?"bg-gradient-to-br from-primary-500 to-primary-700 text-white ring-4 ring-primary-100 shadow-md":r>s?"bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow-sm":"bg-gray-200 text-gray-500"}`,children:r>s?e.jsx(H,{className:"w-4 h-4"}):s}),e.jsx("span",{className:"text-sm font-medium hidden sm:block",children:ee[s-1]}),s<3&&e.jsx("div",{className:`w-8 h-0.5 hidden sm:block transition-colors ${r>s?"bg-gradient-to-l from-green-500 to-emerald-400":"bg-gray-200"}`})]},s))}),e.jsxs("div",{className:"p-6",children:[r===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold font-heading text-gray-800 mb-4",children:"פרטי לקוח"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"label",children:"שם חברה"}),e.jsx("input",{value:l.company_name,onChange:s=>c({...l,company_name:s.target.value}),className:"input",placeholder:"שם החברה"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"שם איש קשר *"}),e.jsx("input",{value:l.contact_name,onChange:s=>c({...l,contact_name:s.target.value}),className:"input",placeholder:"שם מלא"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"טלפון *"}),e.jsx("input",{value:l.phone,onChange:s=>c({...l,phone:s.target.value}),className:"input",dir:"ltr",placeholder:"050-0000000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"אימייל"}),e.jsx("input",{value:l.email,onChange:s=>c({...l,email:s.target.value}),className:"input",dir:"ltr",type:"email",placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"סוג שירות"}),e.jsxs("select",{value:l.service_type,onChange:s=>c({...l,service_type:s.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"בחר סוג שירות"}),se.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"כתובת"}),e.jsx("input",{value:l.address,onChange:s=>c({...l,address:s.target.value}),className:"input",placeholder:"כתובת"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"עיר"}),e.jsx("input",{value:l.city,onChange:s=>c({...l,city:s.target.value}),className:"input",placeholder:"עיר"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"label",children:"הערות"}),e.jsx("textarea",{value:l.notes,onChange:s=>c({...l,notes:s.target.value}),className:"input",rows:3,placeholder:"הערות נוספות..."})]})]})]}),r===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold font-heading text-gray-800",children:"פרטי חוזה"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:s=>C(s.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"הוסף חוזה"})]})]}),b?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"סכום חודשי (₪) *"}),e.jsx("input",{type:"number",value:i.monthly_value,onChange:s=>v({...i,monthly_value:s.target.value?Number(s.target.value):""}),className:"input",dir:"ltr",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"תנאי תשלום"}),e.jsxs("select",{value:i.terms,onChange:s=>v({...i,terms:s.target.value}),className:"input",children:[e.jsx("option",{value:"שוטף + 30",children:"שוטף + 30"}),e.jsx("option",{value:"שוטף + 45",children:"שוטף + 45"}),e.jsx("option",{value:"שוטף + 60",children:"שוטף + 60"}),e.jsx("option",{value:"שוטף + 90",children:"שוטף + 90"}),e.jsx("option",{value:"מזומן",children:"מזומן"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"תאריך התחלה"}),e.jsx("input",{type:"date",value:i.start_date,onChange:s=>v({...i,start_date:s.target.value}),className:"input",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"תאריך סיום"}),e.jsx("input",{type:"date",value:i.end_date,onChange:s=>v({...i,end_date:s.target.value}),className:"input",dir:"ltr"})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.auto_renewal,onChange:s=>v({...i,auto_renewal:s.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"חידוש אוטומטי"})]})})]}):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("p",{className:"text-lg font-heading",children:"ניתן להוסיף חוזה מאוחר יותר"}),e.jsx("p",{className:"text-sm mt-1",children:"סמן את התיבה למעלה כדי להוסיף פרטי חוזה"})]})]}),r===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold font-heading text-gray-800",children:"פרטי אתר"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:s=>w(s.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"הוסף אתר"})]})]}),N?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"label",children:"שם האתר *"}),e.jsx("input",{value:a.name,onChange:s=>h({...a,name:s.target.value}),className:"input",placeholder:"שם האתר"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"כתובת"}),e.jsx("input",{value:a.address,onChange:s=>h({...a,address:s.target.value}),className:"input",placeholder:"כתובת האתר"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"עיר"}),e.jsx("input",{value:a.city,onChange:s=>h({...a,city:s.target.value}),className:"input",placeholder:"עיר"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"סוג אתר"}),e.jsx("select",{value:a.type,onChange:s=>h({...a,type:s.target.value}),className:"input",children:ae.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"איש קשר באתר"}),e.jsx("input",{value:a.contact_name,onChange:s=>h({...a,contact_name:s.target.value}),className:"input",placeholder:"שם איש קשר"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"טלפון איש קשר"}),e.jsx("input",{value:a.contact_phone,onChange:s=>h({...a,contact_phone:s.target.value}),className:"input",dir:"ltr",placeholder:"050-0000000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"דרישות"}),e.jsx("input",{value:a.requirements,onChange:s=>h({...a,requirements:s.target.value}),className:"input",placeholder:"דרישות מיוחדות"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"label",children:"הערות"}),e.jsx("textarea",{value:a.notes,onChange:s=>h({...a,notes:s.target.value}),className:"input",rows:2,placeholder:"הערות נוספות..."})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("p",{className:"text-lg font-heading",children:"ניתן להוסיף אתר מאוחר יותר"}),e.jsx("p",{className:"text-sm mt-1",children:"סמן את התיבה למעלה כדי להוסיף פרטי אתר"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-5 border-t border-gray-100 bg-gray-50/50",children:[e.jsx("div",{children:r>1&&e.jsxs("button",{onClick:k,className:"btn-ghost flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"הקודם"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:u,className:"btn-ghost",children:"ביטול"}),r<3?e.jsxs("button",{onClick:y,className:"btn-primary flex items-center gap-2",children:["הבא",e.jsx(O,{className:"w-4 h-4"})]}):e.jsx("button",{onClick:F,disabled:g.isPending,className:"btn-success flex items-center gap-2",children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 animate-spin"}),"ממיר..."]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{className:"w-4 h-4"}),"המר ליד"]})})]})]})]})}):null}const le=[{value:"new",label:"חדש"},{value:"contacted",label:"נוצר קשר"},{value:"meeting_scheduled",label:"פגישה נקבעה"},{value:"proposal_sent",label:"הצעה נשלחה"},{value:"negotiation",label:"משא ומתן"},{value:"won",label:"נסגר"},{value:"lost",label:"אבד"}],M=[{value:"website",label:"אתר אינטרנט"},{value:"whatsapp",label:"וואטסאפ"},{value:"phone",label:"טלפון"},{value:"referral",label:"הפניה"}],L=[{value:"regular",label:"שמירה רגילה"},{value:"event",label:"אירועים"},{value:"both",label:"שניהם"}];function Ne(){var s,f;const{id:o}=T(),u=A(),n=E(),[x,p]=d.useState(!1),[r,j]=d.useState(!1),[b,C]=d.useState(!1),[N,w]=d.useState(!1),[l,c]=d.useState({contact_name:"",company_name:"",phone:"",email:"",location:"",description:"",source:"",service_type:""}),{data:i,isLoading:v}=K({queryKey:["lead",o],queryFn:()=>_.getOne(o).then(t=>t.data),enabled:!!o}),a=i==null?void 0:i.lead;d.useEffect(()=>{a&&c({contact_name:a.contact_name||"",company_name:a.company_name||"",phone:a.phone||"",email:a.email||"",location:a.location||"",description:a.description||"",source:a.source||"",service_type:a.service_type||""})},[a]);const h=S({mutationFn:t=>_.update(o,{status:t}),onSuccess:()=>{n.invalidateQueries({queryKey:["lead",o]}),m.success("סטטוס עודכן")},onError:()=>m.error("שגיאה בעדכון סטטוס")}),g=S({mutationFn:t=>_.update(o,t),onSuccess:()=>{n.invalidateQueries({queryKey:["lead",o]}),n.invalidateQueries({queryKey:["leads"]}),m.success("הליד עודכן בהצלחה"),p(!1)},onError:()=>{m.error("שגיאה בעדכון הליד")}}),y=S({mutationFn:()=>_.delete(o),onSuccess:()=>{n.invalidateQueries({queryKey:["leads"]}),m.success("הליד נמחק בהצלחה"),u("/leads")},onError:()=>{m.error("שגיאה במחיקת הליד")}}),k=()=>{if(!l.contact_name.trim()){m.error("שם איש קשר הוא שדה חובה");return}g.mutate(l)},F=()=>{a&&c({contact_name:a.contact_name||"",company_name:a.company_name||"",phone:a.phone||"",email:a.email||"",location:a.location||"",description:a.description||"",source:a.source||"",service_type:a.service_type||""}),p(!1)};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>u("/leads"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[e.jsx(Z,{className:"w-5 h-5"}),"חזרה ללידים"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{children:x?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"שם איש קשר *"}),e.jsx("input",{value:l.contact_name,onChange:t=>c({...l,contact_name:t.target.value}),className:"input text-2xl font-bold",placeholder:"שם איש קשר"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"שם חברה"}),e.jsx("input",{value:l.company_name,onChange:t=>c({...l,company_name:t.target.value}),className:"input",placeholder:"שם חברה"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 font-heading",children:a==null?void 0:a.contact_name}),(a==null?void 0:a.company_name)&&e.jsxs("p",{className:"text-gray-500 flex items-center gap-2",children:[e.jsx($,{className:"w-4 h-4"}),a.company_name]})]})}),e.jsx("div",{className:"flex items-center gap-2",children:x?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:k,disabled:g.isPending,className:"btn-primary flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5"}),g.isPending?"שומר...":"שמור"]}),e.jsxs("button",{onClick:F,className:"btn-secondary flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),"ביטול"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>p(!0),className:"btn-secondary flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5"}),"עריכה"]}),(a==null?void 0:a.status)!=="lost"&&(a==null?void 0:a.status)!=="won"&&(a==null?void 0:a.status)!=="converted"&&e.jsxs("button",{onClick:()=>C(!0),className:"btn-success flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"המר ללקוח"]}),e.jsxs("button",{onClick:()=>j(!0),className:"btn-danger flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5"}),"מחק ליד"]})]})})]}),r&&e.jsx("div",{className:"modal-backdrop",children:e.jsxs("div",{className:"modal-content max-w-md w-full mx-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 font-heading",children:"מחיקת ליד"}),e.jsxs("p",{className:"text-gray-600",children:["האם אתה בטוח שברצונך למחוק את הליד של ",e.jsx("strong",{children:a==null?void 0:a.contact_name}),"?",e.jsx("br",{}),"פעולה זו אינה ניתנת לביטול."]}),e.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[e.jsx("button",{onClick:()=>j(!1),className:"btn-secondary",children:"ביטול"}),e.jsxs("button",{onClick:()=>{y.mutate(),j(!1)},disabled:y.isPending,className:"btn-danger flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),y.isPending?"מוחק...":"מחק"]})]})]})}),a&&e.jsx(te,{isOpen:b,onClose:()=>C(!1),lead:{id:a.id,company_name:a.company_name,contact_name:a.contact_name,phone:a.phone,email:a.email,service_type:a.service_type,description:a.description,location:a.location,expected_value:a.expected_value},onSuccess:t=>u(`/customers/${t}`)}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 font-heading",children:"פרטי קשר"}),x?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"טלפון"}),e.jsx("input",{value:l.phone,onChange:t=>c({...l,phone:t.target.value}),className:"input",dir:"ltr",placeholder:"טלפון"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"אימייל"}),e.jsx("input",{value:l.email,onChange:t=>c({...l,email:t.target.value}),className:"input",dir:"ltr",type:"email",placeholder:"אימייל"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"מיקום"}),e.jsx("input",{value:l.location,onChange:t=>c({...l,location:t.target.value}),className:"input",placeholder:"מיקום"})]})]}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"טלפון"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`tel:${a==null?void 0:a.phone}`,className:"text-primary-600 font-medium",children:a==null?void 0:a.phone}),(a==null?void 0:a.phone)&&e.jsx(z,{phone:a.phone,name:a.contact_name,size:"sm"})]})]})]}),(a==null?void 0:a.email)&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"אימייל"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`mailto:${a.email}`,className:"text-primary-600 font-medium",children:a.email}),e.jsx("button",{onClick:()=>w(!0),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50 transition-colors",title:"שלח אימייל",children:e.jsx(W,{className:"w-4 h-4"})})]})]})]}),(a==null?void 0:a.location)&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"מיקום"}),e.jsx("p",{className:"font-medium",children:a.location})]})]})]})]}),x?e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 font-heading",children:"תיאור"}),e.jsx("textarea",{value:l.description,onChange:t=>c({...l,description:t.target.value}),className:"input",rows:4,placeholder:"תיאור הליד..."})]}):(a==null?void 0:a.description)&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 font-heading",children:"תיאור"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:a.description})]}),o&&e.jsx(R,{entityType:"lead",entityId:o})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 font-heading",children:"סטטוס"}),e.jsx("select",{value:a==null?void 0:a.status,onChange:t=>h.mutate(t.target.value),className:"input",children:le.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 font-heading",children:"פרטים"}),x?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"מקור"}),e.jsxs("select",{value:l.source,onChange:t=>c({...l,source:t.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"בחר מקור"}),M.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"סוג שירות"}),e.jsxs("select",{value:l.service_type,onChange:t=>c({...l,service_type:t.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"בחר סוג שירות"}),L.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"תאריך יצירה"}),e.jsx("dd",{className:"font-medium",children:(a==null?void 0:a.created_at)&&new Date(a.created_at).toLocaleDateString("he-IL")})]})]}):e.jsxs("dl",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"מקור"}),e.jsx("dd",{className:"font-medium",children:((s=M.find(t=>t.value===(a==null?void 0:a.source)))==null?void 0:s.label)||(a==null?void 0:a.source)||"-"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"סוג שירות"}),e.jsx("dd",{className:"font-medium",children:((f=L.find(t=>t.value===(a==null?void 0:a.service_type)))==null?void 0:f.label)||(a==null?void 0:a.service_type)||"-"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"תאריך יצירה"}),e.jsx("dd",{className:"font-medium",children:(a==null?void 0:a.created_at)&&new Date(a.created_at).toLocaleDateString("he-IL")})]})]})]})]})]}),e.jsx(B,{isOpen:N,onClose:()=>w(!1),defaultTo:(a==null?void 0:a.email)||"",defaultName:(a==null?void 0:a.contact_name)||"",entityType:"lead",entityId:o})]})}export{Ne as default};
