import{c as U,d as B,j as e,X as te,e as G,z as E,l as qe,s as oe,i as Re,f as Ie,g as $e,h as Ke,R as y,k as Se,r as ee,m as Me,a as pe,S as H,C as Fe,n as ze,A as X,P as M,o as Z,L as ge,p as Be,F as de,q as F,U as Te,B as Qe,t as Ve,v as ne}from"./index-DNhSfFTF.js";import{u as re}from"./index.esm-CTjlG80w.js";import{t as ae,o as ie,s as w}from"./types-C-QvhzS9.js";import{S as je,a as We,b as Ge}from"./Skeleton-B57jvd7z.js";import{f as I,L as W,m as J,i as K,C as le,A as He,a as $,b as ye,c as Xe,d as be,h as Ue,e as Ye,u as Je,g as me,G as Ze,j as ve,k as fe,D as es,T as Pe,R as ss,l as ts,X as rs,Y as as,n as is}from"./generateCategoricalChart-BEV_wULb.js";import{U as ns}from"./user-plus-F5Fn6_3p.js";import{P as ce}from"./package-UtShABcj.js";import{C as z}from"./check-circle-rj1BL297.js";import{L as ls}from"./log-in-Cc9ZJbBP.js";import{M as Ne}from"./map-pin-CnrXv9DV.js";import{A as Ce}from"./alert-circle-DKePiqWg.js";import{P as cs}from"./phone-C6GpoGt1.js";import{A as we}from"./arrow-left-right-DQnPnGxG.js";import{L as os,a as ds}from"./LineChart-Bo_wVrvL.js";const ms=ie({contact_name:w().min(1,"×©× ×—×•×‘×”"),phone:w().min(1,"×˜×œ×¤×•×Ÿ ×—×•×‘×”"),source:w().optional()});function xs({isOpen:s,onClose:a}){const i=U(),{register:r,handleSubmit:n,reset:m,formState:{errors:l}}=re({resolver:ae(ms),defaultValues:{source:"phone"}}),d=B({mutationFn:x=>qe.create(x),onSuccess:()=>{E.success("×œ×™×“ × ×•×¦×¨ ×‘×”×¦×œ×—×”"),i.invalidateQueries({queryKey:["leads"]}),i.invalidateQueries({queryKey:["dashboard"]}),m(),a()},onError:()=>{E.error("×©×’×™××” ×‘×™×¦×™×¨×ª ×œ×™×“")}}),h=x=>d.mutate(x);return s?e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-md w-full p-4 sm:p-6 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold font-heading",children:"×œ×™×“ ×—×“×©"}),e.jsx("button",{onClick:a,className:"p-1.5 hover:bg-gray-100 rounded-xl transition-colors text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:n(h),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×©× ××™×© ×§×©×¨ *"}),e.jsx("input",{...r("contact_name"),className:"input",placeholder:"×©× ××œ×"}),l.contact_name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.contact_name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×˜×œ×¤×•×Ÿ *"}),e.jsx("input",{...r("phone"),className:"input",placeholder:"050-0000000",dir:"ltr"}),l.phone&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"××§×•×¨"}),e.jsxs("select",{...r("source"),className:"input",children:[e.jsx("option",{value:"phone",children:"×˜×œ×¤×•×Ÿ"}),e.jsx("option",{value:"website",children:"××ª×¨"}),e.jsx("option",{value:"whatsapp",children:"×•×•××˜×¡××¤"}),e.jsx("option",{value:"referral",children:"×”××œ×¦×”"})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-secondary",children:"×‘×™×˜×•×œ"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:d.isPending,children:d.isPending?"×©×•××¨...":"×¦×•×¨"})]})]})]})}):null}const hs=ie({site_id:w().min(1,"××ª×¨ ×—×•×‘×”"),date:w().min(1,"×ª××¨×™×š ×—×•×‘×”"),start_time:w().min(1,"×©×¢×ª ×”×ª×—×œ×” ×—×•×‘×”"),end_time:w().min(1,"×©×¢×ª ×¡×™×•× ×—×•×‘×”")});function us({isOpen:s,onClose:a}){const i=U(),{register:r,handleSubmit:n,reset:m,formState:{errors:l}}=re({resolver:ae(hs),defaultValues:{date:new Date().toISOString().split("T")[0]}}),{data:d}=G({queryKey:["sites-all"],queryFn:()=>$e.getAll().then(o=>o.data),enabled:s}),h=(d==null?void 0:d.sites)||d||[],x=B({mutationFn:o=>oe.create(o),onSuccess:()=>{E.success("××©××¨×ª × ×•×¦×¨×” ×‘×”×¦×œ×—×”"),i.invalidateQueries({queryKey:["shifts"]}),i.invalidateQueries({queryKey:["dashboard"]}),i.invalidateQueries({queryKey:["dashboard-operations"]}),m(),a()},onError:()=>{E.error("×©×’×™××” ×‘×™×¦×™×¨×ª ××©××¨×ª")}}),t=o=>x.mutate(o);return s?e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-md w-full p-4 sm:p-6 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold font-heading",children:"××©××¨×ª ×—×“×©×”"}),e.jsx("button",{onClick:a,className:"p-1.5 hover:bg-gray-100 rounded-xl transition-colors text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:n(t),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"××ª×¨ *"}),e.jsxs("select",{...r("site_id"),className:"input",children:[e.jsx("option",{value:"",children:"×‘×—×¨ ××ª×¨..."}),Array.isArray(h)&&h.map(o=>e.jsxs("option",{value:o.id,children:[o.name," ",o.company_name?`(${o.company_name})`:""]},o.id))]}),l.site_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.site_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×ª××¨×™×š *"}),e.jsx("input",{...r("date"),type:"date",className:"input",dir:"ltr"}),l.date&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.date.message})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×©×¢×ª ×”×ª×—×œ×” *"}),e.jsx("input",{...r("start_time"),type:"time",className:"input",dir:"ltr"}),l.start_time&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.start_time.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×©×¢×ª ×¡×™×•× *"}),e.jsx("input",{...r("end_time"),type:"time",className:"input",dir:"ltr"}),l.end_time&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.end_time.message})]})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-secondary",children:"×‘×™×˜×•×œ"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:x.isPending,children:x.isPending?"×©×•××¨...":"×¦×•×¨"})]})]})]})}):null}const ps=ie({customer_id:w().min(1,"×œ×§×•×— ×—×•×‘×”"),total_amount:w().min(1,"×¡×›×•× ×—×•×‘×”"),description:w().optional()});function gs({isOpen:s,onClose:a}){const i=U(),{register:r,handleSubmit:n,reset:m,formState:{errors:l}}=re({resolver:ae(ps)}),{data:d}=G({queryKey:["customers"],queryFn:()=>Ke.getAll().then(o=>o.data),enabled:s}),h=(d==null?void 0:d.customers)||d||[],x=B({mutationFn:o=>{const u=new Date,c=new Date(u);return c.setDate(c.getDate()+30),Re.create({...o,total_amount:parseFloat(o.total_amount),issue_date:u.toISOString().split("T")[0],due_date:c.toISOString().split("T")[0]})},onSuccess:()=>{E.success("×—×©×‘×•× ×™×ª × ×•×¦×¨×” ×‘×”×¦×œ×—×”"),i.invalidateQueries({queryKey:["invoices"]}),i.invalidateQueries({queryKey:["dashboard"]}),m(),a()},onError:()=>{E.error("×©×’×™××” ×‘×™×¦×™×¨×ª ×—×©×‘×•× ×™×ª")}}),t=o=>x.mutate(o);return s?e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-md w-full p-4 sm:p-6 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold font-heading",children:"×—×©×‘×•× ×™×ª ×—×“×©×”"}),e.jsx("button",{onClick:a,className:"p-1.5 hover:bg-gray-100 rounded-xl transition-colors text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:n(t),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×œ×§×•×— *"}),e.jsxs("select",{...r("customer_id"),className:"input",children:[e.jsx("option",{value:"",children:"×‘×—×¨ ×œ×§×•×—..."}),Array.isArray(h)&&h.map(o=>e.jsx("option",{value:o.id,children:o.company_name},o.id))]}),l.customer_id&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.customer_id.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×¡×›×•× *"}),e.jsx("input",{...r("total_amount"),type:"number",step:"0.01",min:"0",className:"input",placeholder:"0.00",dir:"ltr"}),l.total_amount&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.total_amount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×ª×™××•×¨"}),e.jsx("textarea",{...r("description"),className:"input",rows:2,placeholder:"×ª×™××•×¨ ×”×—×©×‘×•× ×™×ª..."})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-secondary",children:"×‘×™×˜×•×œ"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:x.isPending,children:x.isPending?"×©×•××¨...":"×¦×•×¨"})]})]})]})}):null}const js=ie({type:w().min(1,"×¡×•×’ ××™×¨×•×¢ ×—×•×‘×”"),description:w().min(1,"×ª×™××•×¨ ×—×•×‘×”"),severity:w().min(1,"×—×•××¨×” ×—×•×‘×”")});function ys({isOpen:s,onClose:a}){const i=U(),{register:r,handleSubmit:n,reset:m,formState:{errors:l}}=re({resolver:ae(js),defaultValues:{type:"other",severity:"medium"}}),d=B({mutationFn:x=>Ie.create(x),onSuccess:()=>{E.success("××™×¨×•×¢ ×“×•×•×— ×‘×”×¦×œ×—×”"),i.invalidateQueries({queryKey:["incidents"]}),i.invalidateQueries({queryKey:["dashboard"]}),i.invalidateQueries({queryKey:["dashboard-operations"]}),m(),a()},onError:()=>{E.error("×©×’×™××” ×‘×“×™×•×•×— ××™×¨×•×¢")}}),h=x=>d.mutate(x);return s?e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4 animate-fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-elevated max-w-md w-full p-4 sm:p-6 animate-scale-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold font-heading",children:"×“×™×•×•×— ××™×¨×•×¢"}),e.jsx("button",{onClick:a,className:"p-1.5 hover:bg-gray-100 rounded-xl transition-colors text-gray-400 hover:text-gray-600",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:n(h),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×¡×•×’ ××™×¨×•×¢ *"}),e.jsxs("select",{...r("type"),className:"input",children:[e.jsx("option",{value:"security_breach",children:"×¤×¨×™×¦×ª ××‘×˜×—×”"}),e.jsx("option",{value:"unauthorized_access",children:"×’×™×©×” ×œ× ××•×¨×©×™×ª"}),e.jsx("option",{value:"theft",children:"×’× ×™×‘×”"}),e.jsx("option",{value:"vandalism",children:"×•× ×“×œ×™×–×"}),e.jsx("option",{value:"fire",children:"×©×¨×™×¤×”"}),e.jsx("option",{value:"medical",children:"×¨×¤×•××™"}),e.jsx("option",{value:"other",children:"××—×¨"})]}),l.type&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.type.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×ª×™××•×¨ *"}),e.jsx("textarea",{...r("description"),className:"input",rows:3,placeholder:"×ª××¨ ××ª ×”××™×¨×•×¢..."}),l.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.description.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"×—×•××¨×” *"}),e.jsxs("select",{...r("severity"),className:"input",children:[e.jsx("option",{value:"low",children:"× ××•×š"}),e.jsx("option",{value:"medium",children:"×‘×™× ×•× ×™"}),e.jsx("option",{value:"high",children:"×’×‘×•×”"}),e.jsx("option",{value:"critical",children:"×§×¨×™×˜×™"})]}),l.severity&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:l.severity.message})]}),e.jsxs("div",{className:"flex gap-2 justify-end pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"btn-secondary",children:"×‘×™×˜×•×œ"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:d.isPending,children:d.isPending?"×©×•××¨...":"×¦×•×¨"})]})]})]})}):null}var bs=["layout","type","stroke","connectNulls","isRange","ref"],vs=["key"],Oe;function T(s){"@babel/helpers - typeof";return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},T(s)}function Ee(s,a){if(s==null)return{};var i=fs(s,a),r,n;if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(s);for(n=0;n<m.length;n++)r=m[n],!(a.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(s,r)&&(i[r]=s[r])}return i}function fs(s,a){if(s==null)return{};var i={};for(var r in s)if(Object.prototype.hasOwnProperty.call(s,r)){if(a.indexOf(r)>=0)continue;i[r]=s[r]}return i}function D(){return D=Object.assign?Object.assign.bind():function(s){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(s[r]=i[r])}return s},D.apply(this,arguments)}function _e(s,a){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(s);a&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(s,n).enumerable})),i.push.apply(i,r)}return i}function O(s){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?_e(Object(i),!0).forEach(function(r){A(s,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):_e(Object(i)).forEach(function(r){Object.defineProperty(s,r,Object.getOwnPropertyDescriptor(i,r))})}return s}function Ns(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function ke(s,a){for(var i=0;i<a.length;i++){var r=a[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(s,De(r.key),r)}}function ws(s,a,i){return a&&ke(s.prototype,a),i&&ke(s,i),Object.defineProperty(s,"prototype",{writable:!1}),s}function _s(s,a,i){return a=se(a),ks(s,Le()?Reflect.construct(a,i||[],se(s).constructor):a.apply(s,i))}function ks(s,a){if(a&&(T(a)==="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return As(s)}function As(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function Le(){try{var s=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Le=function(){return!!s})()}function se(s){return se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},se(s)}function Ss(s,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(a&&a.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),a&&xe(s,a)}function xe(s,a){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},xe(s,a)}function A(s,a,i){return a=De(a),a in s?Object.defineProperty(s,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[a]=i,s}function De(s){var a=Ps(s,"string");return T(a)=="symbol"?a:a+""}function Ps(s,a){if(T(s)!="object"||!s)return s;var i=s[Symbol.toPrimitive];if(i!==void 0){var r=i.call(s,a);if(T(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(s)}var q=function(s){function a(){var i;Ns(this,a);for(var r=arguments.length,n=new Array(r),m=0;m<r;m++)n[m]=arguments[m];return i=_s(this,a,[].concat(n)),A(i,"state",{isAnimationFinished:!0}),A(i,"id",Je("recharts-area-")),A(i,"handleAnimationEnd",function(){var l=i.props.onAnimationEnd;i.setState({isAnimationFinished:!0}),me(l)&&l()}),A(i,"handleAnimationStart",function(){var l=i.props.onAnimationStart;i.setState({isAnimationFinished:!1}),me(l)&&l()}),i}return Ss(a,s),ws(a,[{key:"renderDots",value:function(r,n,m){var l=this.props.isAnimationActive,d=this.state.isAnimationFinished;if(l&&!d)return null;var h=this.props,x=h.dot,t=h.points,o=h.dataKey,u=I(this.props,!1),c=I(x,!0),j=t.map(function(g,_){var f=O(O(O({key:"dot-".concat(_),r:3},u),c),{},{index:_,cx:g.x,cy:g.y,dataKey:o,value:g.value,payload:g.payload,points:t});return a.renderDotItem(x,f)}),p={clipPath:r?"url(#clipPath-".concat(n?"":"dots-").concat(m,")"):null};return y.createElement(W,D({className:"recharts-area-dots"},p),j)}},{key:"renderHorizontalRect",value:function(r){var n=this.props,m=n.baseLine,l=n.points,d=n.strokeWidth,h=l[0].x,x=l[l.length-1].x,t=r*Math.abs(h-x),o=J(l.map(function(u){return u.y||0}));return K(m)&&typeof m=="number"?o=Math.max(m,o):m&&Array.isArray(m)&&m.length&&(o=Math.max(J(m.map(function(u){return u.y||0})),o)),K(o)?y.createElement("rect",{x:h<x?h:h-t,y:0,width:t,height:Math.floor(o+(d?parseInt("".concat(d),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var n=this.props,m=n.baseLine,l=n.points,d=n.strokeWidth,h=l[0].y,x=l[l.length-1].y,t=r*Math.abs(h-x),o=J(l.map(function(u){return u.x||0}));return K(m)&&typeof m=="number"?o=Math.max(m,o):m&&Array.isArray(m)&&m.length&&(o=Math.max(J(m.map(function(u){return u.x||0})),o)),K(o)?y.createElement("rect",{x:0,y:h<x?h:h-t,width:o+(d?parseInt("".concat(d),10):1),height:Math.floor(t)}):null}},{key:"renderClipRect",value:function(r){var n=this.props.layout;return n==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,n,m,l){var d=this.props,h=d.layout,x=d.type,t=d.stroke,o=d.connectNulls,u=d.isRange;d.ref;var c=Ee(d,bs);return y.createElement(W,{clipPath:m?"url(#clipPath-".concat(l,")"):null},y.createElement(le,D({},I(c,!0),{points:r,connectNulls:o,type:x,baseLine:n,layout:h,stroke:"none",className:"recharts-area-area"})),t!=="none"&&y.createElement(le,D({},I(this.props,!1),{className:"recharts-area-curve",layout:h,type:x,connectNulls:o,fill:"none",points:r})),t!=="none"&&u&&y.createElement(le,D({},I(this.props,!1),{className:"recharts-area-curve",layout:h,type:x,connectNulls:o,fill:"none",points:n})))}},{key:"renderAreaWithAnimation",value:function(r,n){var m=this,l=this.props,d=l.points,h=l.baseLine,x=l.isAnimationActive,t=l.animationBegin,o=l.animationDuration,u=l.animationEasing,c=l.animationId,j=this.state,p=j.prevPoints,g=j.prevBaseLine;return y.createElement(He,{begin:t,duration:o,isActive:x,easing:u,from:{t:0},to:{t:1},key:"area-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(_){var f=_.t;if(p){var P=p.length/d.length,b=d.map(function(k,R){var L=Math.floor(R*P);if(p[L]){var C=p[L],Q=$(C.x,k.x),V=$(C.y,k.y);return O(O({},k),{},{x:Q(f),y:V(f)})}return k}),v;if(K(h)&&typeof h=="number"){var N=$(g,h);v=N(f)}else if(ye(h)||Xe(h)){var S=$(g,0);v=S(f)}else v=h.map(function(k,R){var L=Math.floor(R*P);if(g[L]){var C=g[L],Q=$(C.x,k.x),V=$(C.y,k.y);return O(O({},k),{},{x:Q(f),y:V(f)})}return k});return m.renderAreaStatically(b,v,r,n)}return y.createElement(W,null,y.createElement("defs",null,y.createElement("clipPath",{id:"animationClipPath-".concat(n)},m.renderClipRect(f))),y.createElement(W,{clipPath:"url(#animationClipPath-".concat(n,")")},m.renderAreaStatically(d,h,r,n)))})}},{key:"renderArea",value:function(r,n){var m=this.props,l=m.points,d=m.baseLine,h=m.isAnimationActive,x=this.state,t=x.prevPoints,o=x.prevBaseLine,u=x.totalLength;return h&&l&&l.length&&(!t&&u>0||!be(t,l)||!be(o,d))?this.renderAreaWithAnimation(r,n):this.renderAreaStatically(l,d,r,n)}},{key:"render",value:function(){var r,n=this.props,m=n.hide,l=n.dot,d=n.points,h=n.className,x=n.top,t=n.left,o=n.xAxis,u=n.yAxis,c=n.width,j=n.height,p=n.isAnimationActive,g=n.id;if(m||!d||!d.length)return null;var _=this.state.isAnimationFinished,f=d.length===1,P=Se("recharts-area",h),b=o&&o.allowDataOverflow,v=u&&u.allowDataOverflow,N=b||v,S=ye(g)?this.id:g,k=(r=I(l,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},R=k.r,L=R===void 0?3:R,C=k.strokeWidth,Q=C===void 0?2:C,V=Ue(l)?l:{},he=V.clipDot,ue=he===void 0?!0:he,Y=L*2+Q;return y.createElement(W,{className:P},b||v?y.createElement("defs",null,y.createElement("clipPath",{id:"clipPath-".concat(S)},y.createElement("rect",{x:b?t:t-c/2,y:v?x:x-j/2,width:b?c:c*2,height:v?j:j*2})),!ue&&y.createElement("clipPath",{id:"clipPath-dots-".concat(S)},y.createElement("rect",{x:t-Y/2,y:x-Y/2,width:c+Y,height:j+Y}))):null,f?null:this.renderArea(N,S),(l||f)&&this.renderDots(N,ue,S),(!p||_)&&Ye.renderCallByParent(this.props,d))}}],[{key:"getDerivedStateFromProps",value:function(r,n){return r.animationId!==n.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:n.curPoints,prevBaseLine:n.curBaseLine}:r.points!==n.curPoints||r.baseLine!==n.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(ee.PureComponent);Oe=q;A(q,"displayName","Area");A(q,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ze.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});A(q,"getBaseValue",function(s,a,i,r){var n=s.layout,m=s.baseValue,l=a.props.baseValue,d=l??m;if(K(d)&&typeof d=="number")return d;var h=n==="horizontal"?r:i,x=h.scale.domain();if(h.type==="number"){var t=Math.max(x[0],x[1]),o=Math.min(x[0],x[1]);return d==="dataMin"?o:d==="dataMax"||t<0?t:Math.max(Math.min(x[0],x[1]),0)}return d==="dataMin"?x[0]:d==="dataMax"?x[1]:x[0]});A(q,"getComposedData",function(s){var a=s.props,i=s.item,r=s.xAxis,n=s.yAxis,m=s.xAxisTicks,l=s.yAxisTicks,d=s.bandSize,h=s.dataKey,x=s.stackedData,t=s.dataStartIndex,o=s.displayedData,u=s.offset,c=a.layout,j=x&&x.length,p=Oe.getBaseValue(a,i,r,n),g=c==="horizontal",_=!1,f=o.map(function(b,v){var N;j?N=x[t+v]:(N=ve(b,h),Array.isArray(N)?_=!0:N=[p,N]);var S=N[1]==null||j&&ve(b,h)==null;return g?{x:fe({axis:r,ticks:m,bandSize:d,entry:b,index:v}),y:S?null:n.scale(N[1]),value:N,payload:b}:{x:S?null:r.scale(N[1]),y:fe({axis:n,ticks:l,bandSize:d,entry:b,index:v}),value:N,payload:b}}),P;return j||_?P=f.map(function(b){var v=Array.isArray(b.value)?b.value[0]:null;return g?{x:b.x,y:v!=null&&b.y!=null?n.scale(v):null}:{x:v!=null?r.scale(v):null,y:b.y}}):P=g?n.scale(p):r.scale(p),O({points:f,baseLine:P,layout:c,isRange:_},u)});A(q,"renderDotItem",function(s,a){var i;if(y.isValidElement(s))i=y.cloneElement(s,a);else if(me(s))i=s(a);else{var r=Se("recharts-area-dot",typeof s!="boolean"?s.className:""),n=a.key,m=Ee(a,vs);i=y.createElement(es,D({},m,{key:n,className:r}))}return i});function Ws(){const[s,a]=ee.useState("operations"),[i,r]=ee.useState(null),{isEmployee:n}=Me(),{data:m,isLoading:l}=G({queryKey:["dashboard-employee"],queryFn:()=>ne.get().then(p=>p.data),enabled:n,refetchInterval:6e4}),{data:d,isLoading:h}=G({queryKey:["dashboard"],queryFn:()=>ne.get().then(p=>p.data),enabled:!n&&s==="business"}),{data:x,isLoading:t}=G({queryKey:["dashboard-operations"],queryFn:()=>ne.getOperations().then(p=>p.data),enabled:!n&&s==="operations",refetchInterval:6e4});if(n?l:s==="business"?h:t)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(je,{className:"h-8 w-48"}),e.jsx(je,{className:"h-4 w-64"})]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((p,g)=>e.jsx(We,{},g))}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Array.from({length:4}).map((p,g)=>e.jsx(Ge,{},g))})]});if(n){const p=new Date().getHours(),g=pe.getState().user,_=p<12?"â˜€ï¸ ×‘×•×§×¨ ×˜×•×‘":p<17?"ğŸŒ¤ï¸ ×¦×”×¨×™×™× ×˜×•×‘×™×":"ğŸŒ™ ×¢×¨×‘ ×˜×•×‘";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"page-title",children:[_,", ",(g==null?void 0:g.firstName)||""]}),e.jsx("p",{className:"page-subtitle",children:"×‘×¨×•×š ×”×‘× ×œ××¢×¨×›×ª ×¦×•×•×ª ×™×”×œ×•×"})]}),e.jsx(Cs,{data:m})]})}const u=new Date().getHours(),c=pe.getState().user,j=u<12?"â˜€ï¸ ×‘×•×§×¨ ×˜×•×‘":u<17?"ğŸŒ¤ï¸ ×¦×”×¨×™×™× ×˜×•×‘×™×":"ğŸŒ™ ×¢×¨×‘ ×˜×•×‘";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"page-title",children:[j,", ",(c==null?void 0:c.firstName)||""]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("p",{className:"page-subtitle",children:"×‘×¨×•×š ×”×‘× ×œ××¢×¨×›×ª ×¦×•×•×ª ×™×”×œ×•×"}),e.jsxs("span",{className:"flex items-center gap-1.5 text-[11px] text-gray-400",children:[e.jsx("span",{className:"dot-live"}),"××ª×¢×“×›×Ÿ ×›×œ ×“×§×”"]})]})]}),e.jsxs("div",{className:"view-toggle",children:[e.jsxs("button",{onClick:()=>a("operations"),className:`view-toggle-btn ${s==="operations"?"view-toggle-btn-active":"view-toggle-btn-inactive"}`,children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"×ª×¤×¢×•×œ×™"})]}),e.jsxs("button",{onClick:()=>a("business"),className:`view-toggle-btn ${s==="business"?"view-toggle-btn-active":"view-toggle-btn-inactive"}`,children:[e.jsx(Pe,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"×¢×¡×§×™"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>r("lead"),className:"rounded-2xl p-4 flex items-center gap-3 text-right bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0 hover:-translate-y-1 hover:shadow-lg transition-all duration-200",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 text-white rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ns,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-white truncate",children:"×œ×™×“ ×—×“×©"}),e.jsx("div",{className:"text-xs text-white/70",children:"×”×•×¡×£ ×œ×™×“ ××”×™×¨"})]})]}),e.jsxs("button",{onClick:()=>r("shift"),className:"rounded-2xl p-4 flex items-center gap-3 text-right bg-gradient-to-br from-violet-500 to-violet-600 text-white border-0 hover:-translate-y-1 hover:shadow-lg transition-all duration-200",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 text-white rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Fe,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-white truncate",children:"××©××¨×ª ×—×“×©×”"}),e.jsx("div",{className:"text-xs text-white/70",children:"×¦×•×¨ ××©××¨×ª ××”×™×¨×”"})]})]}),e.jsxs("button",{onClick:()=>r("invoice"),className:"rounded-2xl p-4 flex items-center gap-3 text-right bg-gradient-to-br from-emerald-500 to-emerald-600 text-white border-0 hover:-translate-y-1 hover:shadow-lg transition-all duration-200",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 text-white rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(ze,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-white truncate",children:"×—×©×‘×•× ×™×ª ×—×“×©×”"}),e.jsx("div",{className:"text-xs text-white/70",children:"×”×¤×§ ×—×©×‘×•× ×™×ª ××”×™×¨×”"})]})]}),e.jsxs("button",{onClick:()=>r("incident"),className:"rounded-2xl p-4 flex items-center gap-3 text-right bg-gradient-to-br from-red-500 to-red-600 text-white border-0 hover:-translate-y-1 hover:shadow-lg transition-all duration-200",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 text-white rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-sm text-white truncate",children:"×“×•×— ××™×¨×•×¢"}),e.jsx("div",{className:"text-xs text-white/70",children:"×“×•×•×— ××™×¨×•×¢ ×—×“×©"})]})]})]}),s==="operations"?e.jsx(Os,{data:x}):e.jsx(Es,{data:d}),e.jsx(xs,{isOpen:i==="lead",onClose:()=>r(null)}),e.jsx(us,{isOpen:i==="shift",onClose:()=>r(null)}),e.jsx(gs,{isOpen:i==="invoice",onClose:()=>r(null)}),e.jsx(ys,{isOpen:i==="incident",onClose:()=>r(null)})]})}function Ae(){return navigator.geolocation?new Promise(s=>{navigator.geolocation.getCurrentPosition(a=>s({latitude:a.coords.latitude,longitude:a.coords.longitude}),()=>s(null),{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}):Promise.resolve(null)}function Cs({data:s}){const a=(s==null?void 0:s.myShiftsToday)||[],i=(s==null?void 0:s.myUpcomingEvents)||[],r=(s==null?void 0:s.myRecentShifts)||[],n=(s==null?void 0:s.myEquipment)||[],m=U(),[l,d]=ee.useState(null),h=B({mutationFn:async t=>{const o=await Ae();return(await oe.checkIn(t,o||{})).data},onSuccess:t=>{m.invalidateQueries({queryKey:["dashboard-employee"]}),m.invalidateQueries({queryKey:["my-active-assignment"]}),t!=null&&t.location_warning&&(d(t.location_warning),setTimeout(()=>d(null),8e3))}}),x=B({mutationFn:async t=>{const o=await Ae();return(await oe.checkOut(t,o||{})).data},onSuccess:()=>{m.invalidateQueries({queryKey:["dashboard-employee"]}),m.invalidateQueries({queryKey:["my-active-assignment"]})}});return e.jsxs("div",{className:"space-y-6",children:[l&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 text-amber-800 px-4 py-3 rounded-xl text-sm flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 flex-shrink-0"}),l]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value font-heading",children:a.length}),e.jsx("p",{className:"stat-card-label",children:"××©××¨×•×ª ×”×™×•×"})]}),e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-sky-100 to-sky-50 flex items-center justify-center",children:e.jsx(H,{className:"w-5 h-5 text-sky-600"})})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value font-heading",children:i.length}),e.jsx("p",{className:"stat-card-label",children:"××™×¨×•×¢×™× ×‘-7 ×™××™×"})]}),e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-amber-100 to-amber-50 flex items-center justify-center",children:e.jsx(M,{className:"w-5 h-5 text-amber-600"})})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value font-heading",children:n.length}),e.jsx("p",{className:"stat-card-label",children:"×¤×¨×™×˜×™ ×¦×™×•×“"})]}),e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-violet-100 to-violet-50 flex items-center justify-center",children:e.jsx(ce,{className:"w-5 h-5 text-violet-600"})})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value font-heading",children:r.length}),e.jsx("p",{className:"stat-card-label",children:"××©××¨×•×ª ××—×¨×•× ×•×ª"})]}),e.jsx("div",{className:"w-11 h-11 rounded-xl bg-gradient-to-br from-emerald-100 to-emerald-50 flex items-center justify-center",children:e.jsx(Z,{className:"w-5 h-5 text-emerald-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-sky-100 to-sky-50",children:e.jsx(H,{className:"w-4 h-4 text-sky-600"})}),e.jsx("h3",{className:"section-header-title",children:"×”××©××¨×•×ª ×©×œ×™ ×”×™×•×"})]}),a.length>0?e.jsx("div",{className:"space-y-2.5",children:a.map(t=>{const o=t.assignment_status==="assigned",u=t.assignment_status==="checked_in",c=t.assignment_status==="completed",j=h.isPending||x.isPending;return e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/60 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:t.site_name||t.company_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[t.start_time," - ",t.end_time]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.check_in_time?e.jsxs("span",{className:"badge badge-success flex items-center gap-1",children:[e.jsx(z,{className:"w-3 h-3"}),"×¦'×§-××™×Ÿ ",t.check_in_time]}):e.jsx("span",{className:"badge badge-warning",children:"×××ª×™×Ÿ ×œ×¦'×§-××™×Ÿ"}),t.check_out_time&&e.jsxs("span",{className:"badge badge-gray",children:["×¦'×§-×××•×˜ ",t.check_out_time]})]})]}),t.assignment_id&&!c&&e.jsxs("div",{className:"mt-3 flex gap-2",children:[o&&e.jsxs("button",{onClick:()=>h.mutate(t.assignment_id),disabled:j,className:"flex-1 btn-success text-sm py-2 flex items-center justify-center gap-1.5",children:[h.isPending?e.jsx(ge,{className:"w-4 h-4 animate-spin"}):e.jsx(ls,{className:"w-4 h-4"}),"×¦'×§-××™×Ÿ"]}),u&&!t.check_out_time&&e.jsxs("button",{onClick:()=>x.mutate(t.assignment_id),disabled:j,className:"flex-1 btn-danger text-sm py-2 flex items-center justify-center gap-1.5",children:[x.isPending?e.jsx(ge,{className:"w-4 h-4 animate-spin"}):e.jsx(Be,{className:"w-4 h-4"}),"×¦'×§-×××•×˜"]})]})]},t.assignment_id||t.id)})}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx(H,{className:"w-6 h-6 text-gray-400"})}),e.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"××™×Ÿ ××©××¨×•×ª ×”×™×•×"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-amber-100 to-amber-50",children:e.jsx(M,{className:"w-4 h-4 text-amber-600"})}),e.jsx("h3",{className:"section-header-title",children:"××™×¨×•×¢×™× ×§×¨×•×‘×™× ×©×œ×™"})]}),i.length>0?e.jsx("div",{className:"space-y-2.5",children:i.map(t=>e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/60 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:t.event_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[t.event_date," | ",t.start_time," | ",t.location||t.company_name]}),t.role&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1.5 font-medium",children:["×ª×¤×§×™×“: ",t.role]})]},t.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx(M,{className:"w-6 h-6 text-gray-400"})}),e.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"××™×Ÿ ××™×¨×•×¢×™× ×§×¨×•×‘×™×"})]})]}),n.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-violet-100 to-violet-50",children:e.jsx(ce,{className:"w-4 h-4 text-violet-600"})}),e.jsx("h3",{className:"section-header-title",children:"×”×¦×™×•×“ ×©×œ×™"})]}),e.jsx("div",{className:"space-y-1.5",children:n.map((t,o)=>e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-gray-50/60 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx(ce,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium text-sm text-gray-900",children:t.item_name}),e.jsx("span",{className:"text-xs text-gray-500",children:t.item_type})]}),t.serial_number&&e.jsx("span",{className:"text-xs text-gray-400 font-mono",dir:"ltr",children:t.serial_number})]},o))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-emerald-100 to-emerald-50",children:e.jsx(Z,{className:"w-4 h-4 text-emerald-600"})}),e.jsx("h3",{className:"section-header-title",children:"×”×™×¡×˜×•×¨×™×™×ª ××©××¨×•×ª ××—×¨×•× ×•×ª"})]}),r.length>0?e.jsx("div",{className:"space-y-1.5",children:r.map((t,o)=>e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-gray-50/60 rounded-lg text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:t.site_name||t.company_name}),e.jsx("span",{className:"text-gray-300 mx-2",children:"Â·"}),e.jsx("span",{className:"text-gray-500",children:t.date})]}),e.jsxs("span",{className:"text-gray-500 font-mono text-xs",children:[t.start_time," - ",t.end_time]})]},o))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx(Z,{className:"w-6 h-6 text-gray-400"})}),e.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"××™×Ÿ ×”×™×¡×˜×•×¨×™×”"})]})]})]})]})}function Os({data:s}){var i,r,n,m,l,d,h,x,t,o,u;const a=[{name:"×××‘×˜×—×™× ×‘×©×˜×—",value:`${(s==null?void 0:s.guards_on_duty)||0}/${(s==null?void 0:s.guards_expected_today)||0}`,icon:H,iconColor:"text-sky-600",bgColor:"bg-gradient-to-br from-sky-100 to-sky-50"},{name:"××ª×¨×™× ××›×•×¡×™×",value:(s==null?void 0:s.sites_with_coverage)||0,icon:Ne,iconColor:"text-emerald-600",bgColor:"bg-gradient-to-br from-emerald-100 to-emerald-50"},{name:"××™×¨×•×¢×™ ××‘×˜×—×” ×¤×ª×•×—×™×",value:((i=s==null?void 0:s.open_incidents)==null?void 0:i.count)||0,icon:X,iconColor:((r=s==null?void 0:s.open_incidents)==null?void 0:r.critical)>0?"text-red-600":"text-red-500",bgColor:((n=s==null?void 0:s.open_incidents)==null?void 0:n.critical)>0?"bg-gradient-to-br from-red-200 to-red-100":"bg-gradient-to-br from-red-100 to-red-50",urgent:(((m=s==null?void 0:s.open_incidents)==null?void 0:m.critical)||0)>0,href:"/incidents"},{name:"×¨×™×©×™×•× ×•×ª ×©×¤×’×™×",value:((l=s==null?void 0:s.expiring_licenses)==null?void 0:l.length)||0,icon:de,iconColor:"text-amber-600",bgColor:"bg-gradient-to-br from-amber-100 to-amber-50"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:a.map(c=>{const j=c.href?F:"div",p=c.href?{to:c.href}:{};return e.jsx(j,{...p,className:`stat-card hover:shadow-elevated transition-all duration-200 ${c.urgent?"ring-2 ring-red-200 bg-red-50/30":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value font-heading",children:c.value}),e.jsx("p",{className:"stat-card-label",children:c.name})]}),e.jsx("div",{className:`w-11 h-11 rounded-xl ${c.bgColor} flex items-center justify-center`,children:e.jsx(c.icon,{className:`w-5 h-5 ${c.iconColor}`})})]})},c.name)})}),((d=s==null?void 0:s.open_incidents)==null?void 0:d.critical)>0&&e.jsxs("div",{className:"bg-gradient-to-r from-danger-50 to-danger-100/50 border border-danger-200 ring-1 ring-danger-200/50 rounded-xl p-4 flex items-center gap-3 animate-fade-in",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-100 flex items-center justify-center flex-shrink-0",children:e.jsx(X,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-red-800 text-sm",children:[s.open_incidents.critical," ××™×¨×•×¢×™ ××‘×˜×—×” ×§×¨×™×˜×™×™× ×¤×ª×•×—×™×!"]}),e.jsx(F,{to:"/incidents?severity=critical",className:"text-red-600 hover:text-red-700 text-sm font-medium hover:underline",children:"×¦×¤×” ×‘××™×¨×•×¢×™× â†"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-red-100 to-red-50",children:e.jsx(Ce,{className:"w-4 h-4 text-red-500"})}),e.jsx("h3",{className:"section-header-title",children:"×××‘×˜×—×™× ×©×œ× ×¢×©×• ×¦'×§-××™×Ÿ"})]}),((h=s==null?void 0:s.guards_not_checked_in)==null?void 0:h.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.guards_not_checked_in.map(c=>e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/60 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm text-gray-900",children:[c.first_name," ",c.last_name]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[c.site_name||c.company_name," Â· ",c.start_time," - ",c.end_time]})]}),c.phone&&e.jsx("a",{href:`tel:${c.phone}`,className:"w-8 h-8 rounded-lg bg-red-50 hover:bg-red-100 flex items-center justify-center transition-colors",title:"×”×ª×§×©×¨",children:e.jsx(cs,{className:"w-3.5 h-3.5 text-red-600"})})]},c.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center mx-auto mb-2",children:e.jsx(z,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"×›×œ ×”×××‘×˜×—×™× ×¢×©×• ×¦'×§-××™×Ÿ"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-amber-100 to-amber-50",children:e.jsx(Ne,{className:"w-4 h-4 text-amber-600"})}),e.jsx("h3",{className:"section-header-title",children:"××ª×¨×™× ×œ×œ× ×›×™×¡×•×™"})]}),((x=s==null?void 0:s.sites_without_coverage)==null?void 0:x.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.sites_without_coverage.map(c=>e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/60 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:c.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[c.company_name," Â· ",c.start_time," - ",c.end_time]}),c.address&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:c.address})]},c.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center mx-auto mb-2",children:e.jsx(z,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"×›×œ ×”××ª×¨×™× ××›×•×¡×™×"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-sky-100 to-sky-50",children:e.jsx(we,{className:"w-4 h-4 text-sky-600"})}),e.jsx("h3",{className:"section-header-title",children:"×”×—×œ×¤×•×ª ××©××¨×•×ª ×‘×©×¢×ª×™×™× ×”×§×¨×•×‘×•×ª"})]}),((t=s==null?void 0:s.upcoming_shift_changes)==null?void 0:t.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.upcoming_shift_changes.map(c=>e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/60 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:c.site_name||c.company_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[c.start_time," - ",c.end_time," Â· ",c.assigned_count,"/",c.required_employees," ××©×•×‘×¦×™×"]})]}),e.jsx("span",{className:`badge ${c.change_type==="starting"?"badge-success":"badge-warning"}`,children:c.change_type==="starting"?"××ª×—×™×œ×”":"××¡×ª×™×™××ª"})]},c.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx(we,{className:"w-6 h-6 text-gray-400"})}),e.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"××™×Ÿ ×”×—×œ×¤×•×ª ×§×¨×•×‘×•×ª"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-amber-100 to-amber-50",children:e.jsx(de,{className:"w-4 h-4 text-amber-600"})}),e.jsx("h3",{className:"section-header-title",children:"×¨×™×©×™×•× ×•×ª ×•×”×¡××›×•×ª ×©×¤×’×™× ×‘-7 ×™××™×"})]}),((o=s==null?void 0:s.expiring_licenses)==null?void 0:o.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.expiring_licenses.map(c=>e.jsx("div",{className:"p-3.5 rounded-xl bg-gray-50/60 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:c.employee_name}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:c.cert_name})]}),e.jsxs("span",{className:`text-xs font-bold px-2.5 py-1 rounded-lg ${c.days_left<=3?"bg-red-50 text-red-600":"bg-amber-50 text-amber-600"}`,children:[c.days_left," ×™××™×"]})]})},c.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center mx-auto mb-2",children:e.jsx(z,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"××™×Ÿ ×¨×™×©×™×•× ×•×ª ×©×¤×’×™× ×‘×§×¨×•×‘"})]})]}),((u=s==null?void 0:s.today_incidents)==null?void 0:u.length)>0&&e.jsxs("div",{className:"card lg:col-span-2",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-red-100 to-red-50",children:e.jsx(X,{className:"w-4 h-4 text-red-500"})}),e.jsx("h3",{className:"section-header-title",children:"××™×¨×•×¢×™ ××‘×˜×—×” ×”×™×•×"})]}),e.jsx("div",{className:"space-y-2.5",children:s.today_incidents.map(c=>{const j={critical:"bg-red-50 text-red-700 border-red-200",high:"bg-orange-50 text-orange-700 border-orange-200",medium:"bg-amber-50 text-amber-700 border-amber-200",low:"bg-emerald-50 text-emerald-700 border-emerald-200"},p={critical:"×§×¨×™×˜×™",high:"×’×‘×•×”",medium:"×‘×™× ×•× ×™",low:"× ××•×š"};return e.jsx(F,{to:"/incidents",className:"block p-3.5 rounded-xl bg-gray-50/80 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-bold border ${j[c.severity]||j.low}`,children:p[c.severity]||c.severity}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:c.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[c.site_name||c.company_name," Â· ",c.incident_time]})]})]})},c.id)})})]})]})]})}function Es({data:s}){var i,r,n,m,l,d,h,x;const a=[{name:"×œ×™×“×™× ×—×“×©×™×",value:((i=s==null?void 0:s.leads)==null?void 0:i.new_leads)||0,icon:Te,iconColor:"text-sky-600",bgColor:"bg-gradient-to-br from-sky-100 to-sky-50",href:"/leads?status=new"},{name:"×œ×§×•×—×•×ª ×¤×¢×™×œ×™×",value:((r=s==null?void 0:s.customers)==null?void 0:r.active_customers)||0,icon:Qe,iconColor:"text-emerald-600",bgColor:"bg-gradient-to-br from-emerald-100 to-emerald-50",href:"/customers"},{name:"××©××¨×•×ª ×”×™×•×",value:((n=s==null?void 0:s.shiftsToday)==null?void 0:n.total)||0,icon:Ve,iconColor:"text-violet-600",bgColor:"bg-gradient-to-br from-violet-100 to-violet-50",href:"/shifts"},{name:"××™×¨×•×¢×™× ×”×©×‘×•×¢",value:((m=s==null?void 0:s.upcomingEvents)==null?void 0:m.length)||0,icon:M,iconColor:"text-amber-600",bgColor:"bg-gradient-to-br from-amber-100 to-amber-50",href:"/events"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:a.map(t=>e.jsx(F,{to:t.href,className:"stat-card hover:shadow-elevated transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value font-heading",children:t.value}),e.jsx("p",{className:"stat-card-label",children:t.name})]}),e.jsx("div",{className:`w-11 h-11 rounded-xl ${t.bgColor} flex items-center justify-center`,children:e.jsx(t.icon,{className:`w-5 h-5 ${t.iconColor}`})})]})},t.name))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-primary-100 to-primary-50",children:e.jsx(Pe,{className:"w-4 h-4 text-primary-600"})}),e.jsx("h3",{className:"section-header-title",children:"×”×›× ×¡×•×ª - 6 ×—×•×“×©×™× ××—×¨×•× ×™×"})]}),e.jsx("div",{className:"h-48 sm:h-64",children:e.jsx(ss,{width:"100%",height:"100%",children:e.jsxs(os,{data:(s==null?void 0:s.monthlyRevenue)||[],children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"revenueGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.15}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),e.jsx(ts,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(rs,{dataKey:"month",tick:{fontSize:12,fill:"#94a3b8"}}),e.jsx(as,{tick:{fontSize:12,fill:"#94a3b8"}}),e.jsx(is,{formatter:t=>[`â‚ª${t==null?void 0:t.toLocaleString()}`,"×”×›× ×¡×•×ª"],contentStyle:{borderRadius:"12px",border:"1px solid #e2e8f0",boxShadow:"0 4px 16px -2px rgba(0,0,0,0.08)",fontSize:"13px"}}),e.jsx(q,{type:"monotone",dataKey:"revenue",stroke:"none",fill:"url(#revenueGradient)"}),e.jsx(ds,{type:"monotone",dataKey:"revenue",stroke:"#6366f1",strokeWidth:2.5,dot:{r:4,fill:"#6366f1",strokeWidth:2,stroke:"#fff"},activeDot:{r:6}})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-amber-100 to-amber-50",children:e.jsx(M,{className:"w-4 h-4 text-amber-600"})}),e.jsx("h3",{className:"section-header-title",children:"××™×¨×•×¢×™× ×§×¨×•×‘×™×"})]}),((l=s==null?void 0:s.upcomingEvents)==null?void 0:l.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.upcomingEvents.map(t=>e.jsx(F,{to:`/events/${t.id}`,className:"block p-3.5 rounded-xl bg-gray-50/80 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:t.event_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[t.event_date," Â· ",t.start_time," Â· ",t.company_name]})]}),e.jsxs("span",{className:`badge ${t.assigned_count>=t.required_guards?"badge-success":"badge-warning"}`,children:[t.assigned_count,"/",t.required_guards]})]})},t.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gray-100 flex items-center justify-center mx-auto mb-3",children:e.jsx(M,{className:"w-6 h-6 text-gray-400"})}),e.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"××™×Ÿ ××™×¨×•×¢×™× ×§×¨×•×‘×™×"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-red-100 to-red-50",children:e.jsx(Ce,{className:"w-4 h-4 text-red-500"})}),e.jsx("h3",{className:"section-header-title",children:"××©××¨×•×ª ×œ× ×××•×™×©×•×ª ×”×™×•×"})]}),((d=s==null?void 0:s.unassignedShifts)==null?void 0:d.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.unassignedShifts.map(t=>e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/60 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:[e.jsxs("p",{className:"font-medium text-sm text-gray-900",children:[t.company_name," - ",t.site_name]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[t.start_time," - ",t.end_time]})]},t.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center mx-auto mb-2",children:e.jsx(z,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"×›×œ ×”××©××¨×•×ª ×××•×™×©×•×ª"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-amber-100 to-amber-50",children:e.jsx(de,{className:"w-4 h-4 text-amber-600"})}),e.jsx("h3",{className:"section-header-title",children:"×—×©×‘×•× ×™×•×ª ×‘××™×—×•×¨"})]}),((h=s==null?void 0:s.overdueInvoices)==null?void 0:h.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.overdueInvoices.map(t=>{var o;return e.jsx("div",{className:"p-3.5 rounded-xl bg-gray-50/60 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:t.company_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["×—×©×‘×•× ×™×ª #",t.invoice_number]})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-sm text-gray-900",children:["â‚ª",(o=t.total_amount)==null?void 0:o.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-red-500 font-medium",children:[t.days_overdue," ×™××™× ×‘××™×—×•×¨"]})]})]})},t.id)})}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center mx-auto mb-2",children:e.jsx(z,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"××™×Ÿ ×—×©×‘×•× ×™×•×ª ×‘××™×—×•×¨"})]})]}),((x=s==null?void 0:s.contractsExpiring)==null?void 0:x.length)>0&&e.jsxs("div",{className:"card lg:col-span-2",children:[e.jsxs("div",{className:"section-header",children:[e.jsx("div",{className:"section-header-icon bg-gradient-to-br from-sky-100 to-sky-50",children:e.jsx(Z,{className:"w-4 h-4 text-sky-600"})}),e.jsx("h3",{className:"section-header-title",children:"×—×•×–×™× ×œ×—×™×“×•×© ×‘×§×¨×•×‘"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:s.contractsExpiring.map(t=>{var o;return e.jsxs(F,{to:`/customers/${t.customer_id}`,className:"p-3.5 rounded-xl bg-gray-50/80 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:t.company_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["×ª×•× ×—×•×–×”: ",t.end_date," Â· â‚ª",(o=t.monthly_value)==null?void 0:o.toLocaleString(),"/×—×•×“×©"]})]},t.id)})})]})]})]})}export{Ws as default};
