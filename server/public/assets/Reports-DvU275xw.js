import{g as nt,$ as F,a0 as h,a1 as Ue,r as je,d as q,j as a,n as it,B as st,U as ot,x as lt,a2 as ce,v as ct,a3 as dt}from"./index-D-jMUT0A.js";import{D as ut,P as ft,a as z}from"./pdfExport-BNemLwsD.js";import{f as N,_ as We,c as mt,d as ze,e as ht,i as U,g as Re,p as I,h as R,j as Ge,k as Te,l as Ye,D as pt,m as xt,n as ae,o as X,S as yt,A as gt,q as vt,r as Le,s as bt,t as ee,u as jt,v as At,G as Nt,w as xe,x as _t,y as Ze,z as Pt,B as he,E as Ee,F as Xe,H as $,X as J,Y as Q,I as kt,J as Ot,T as wt,R as G,a as Y,C as de,K as St,L as Rt,b as Tt}from"./LineChart-DcFu4nTl.js";import{S as Lt}from"./shield-BwdOBKRw.js";import{S as Et}from"./star-Dzf8Se4t.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=nt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var $t=["points","className","baseLinePoints","connectNulls"];function te(){return te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},te.apply(this,arguments)}function It(t,e){if(t==null)return{};var n=Ct(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ct(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Ke(t){return Mt(t)||Dt(t)||Ft(t)||Bt()}function Bt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ft(t,e){if(t){if(typeof t=="string")return ke(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ke(t,e)}}function Dt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Mt(t){if(Array.isArray(t))return ke(t)}function ke(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var $e=function(e){return e&&e.x===+e.x&&e.y===+e.y},qt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return e.forEach(function(r){$e(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),$e(e[0])&&n[n.length-1].push(e[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},ue=function(e,n){var r=qt(e);n&&(r=[r.reduce(function(o,s){return[].concat(Ke(o),Ke(s))},[])]);var i=r.map(function(o){return o.reduce(function(s,c,u){return"".concat(s).concat(u===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},Vt=function(e,n,r){var i=ue(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(ue(n.reverse(),r).slice(1))},Ht=function(e){var n=e.points,r=e.className,i=e.baseLinePoints,o=e.connectNulls,s=It(e,$t);if(!n||!n.length)return null;var c=F("recharts-polygon",r);if(i&&i.length){var u=s.stroke&&s.stroke!=="none",d=Vt(n,i,o);return h.createElement("g",{className:c},h.createElement("path",te({},N(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",stroke:"none",d})),u?h.createElement("path",te({},N(s,!0),{fill:"none",d:ue(n,o)})):null,u?h.createElement("path",te({},N(s,!0),{fill:"none",d:ue(i,o)})):null)}var m=ue(n,o);return h.createElement("path",te({},N(s,!0),{fill:m.slice(-1)==="Z"?s.fill:"none",className:c,d:m}))},Ut=We,Wt=mt,zt=ze;function Gt(t,e){return t&&t.length?Ut(t,zt(e),Wt):void 0}var Yt=Gt;const Zt=Ue(Yt);var Xt=We,Jt=ze,Qt=ht;function er(t,e){return t&&t.length?Xt(t,Jt(e),Qt):void 0}var tr=er;const rr=Ue(tr);var ar=["cx","cy","angle","ticks","axisLine"],nr=["ticks","tick","angle","tickFormatter","stroke"];function ne(t){"@babel/helpers - typeof";return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(t)}function fe(){return fe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fe.apply(this,arguments)}function Ie(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function V(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ie(Object(n),!0).forEach(function(r){Ae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ce(t,e){if(t==null)return{};var n=ir(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ir(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function sr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qe(r.key),r)}}function or(t,e,n){return e&&Be(t.prototype,e),n&&Be(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lr(t,e,n){return e=ge(e),cr(t,Je()?Reflect.construct(e,n||[],ge(t).constructor):e.apply(t,n))}function cr(t,e){if(e&&(ne(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dr(t)}function dr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Je(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Je=function(){return!!t})()}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ge(t)}function ur(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}function Oe(t,e){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Oe(t,e)}function Ae(t,e,n){return e=Qe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qe(t){var e=fr(t,"string");return ne(e)=="symbol"?e:e+""}function fr(t,e){if(ne(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ne(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ne=function(t){function e(){return sr(this,e),lr(this,e,arguments)}return ur(e,t),or(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,o=this.props,s=o.angle,c=o.cx,u=o.cy;return I(c,u,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.angle,c=r.ticks,u=Zt(c,function(m){return m.coordinate||0}),d=rr(c,function(m){return m.coordinate||0});return{cx:i,cy:o,startAngle:s,endAngle:s,innerRadius:d.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.angle,c=r.ticks,u=r.axisLine,d=Ce(r,ar),m=c.reduce(function(p,f){return[Math.min(p[0],f.coordinate),Math.max(p[1],f.coordinate)]},[1/0,-1/0]),x=I(i,o,m[0],s),y=I(i,o,m[1],s),j=V(V(V({},N(d,!1)),{},{fill:"none"},N(u,!1)),{},{x1:x.x,y1:x.y,x2:y.x,y2:y.y});return h.createElement("line",fe({className:"recharts-polar-radius-axis-line"},j))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,s=i.tick,c=i.angle,u=i.tickFormatter,d=i.stroke,m=Ce(i,nr),x=this.getTickTextAnchor(),y=N(m,!1),j=N(s,!1),p=o.map(function(f,g){var b=r.getTickValueCoord(f),A=V(V(V(V({textAnchor:x,transform:"rotate(".concat(90-c,", ").concat(b.x,", ").concat(b.y,")")},y),{},{stroke:"none",fill:d},j),{},{index:g},b),{},{payload:f});return h.createElement(R,fe({className:F("recharts-polar-radius-axis-tick",Ge(s)),key:"tick-".concat(f.coordinate)},Te(r.props,f,g)),e.renderTickItem(s,A,u?u(f.value,g):f.value))});return h.createElement(R,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.axisLine,s=r.tick;return!i||!i.length?null:h.createElement(R,{className:F("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),s&&this.renderTicks(),Ye.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,o){var s;return h.isValidElement(r)?s=h.cloneElement(r,i):U(r)?s=r(i):s=h.createElement(Re,fe({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),s}}])}(je.PureComponent);Ae(Ne,"displayName","PolarRadiusAxis");Ae(Ne,"axisType","radiusAxis");Ae(Ne,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ie(t){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(t)}function W(){return W=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},W.apply(this,arguments)}function Fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fe(Object(n),!0).forEach(function(r){_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tt(r.key),r)}}function hr(t,e,n){return e&&De(t.prototype,e),n&&De(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function pr(t,e,n){return e=ve(e),xr(t,et()?Reflect.construct(e,n||[],ve(t).constructor):e.apply(t,n))}function xr(t,e){if(e&&(ie(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yr(t)}function yr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function et(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(et=function(){return!!t})()}function ve(t){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ve(t)}function gr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&we(t,e)}function we(t,e){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},we(t,e)}function _e(t,e,n){return e=tt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tt(t){var e=vr(t,"string");return ie(e)=="symbol"?e:e+""}function vr(t,e){if(ie(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(ie(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var br=Math.PI/180,Me=1e-5,Pe=function(t){function e(){return mr(this,e),pr(this,e,arguments)}return gr(e,t),hr(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.cx,s=i.cy,c=i.radius,u=i.orientation,d=i.tickSize,m=d||8,x=I(o,s,c,r.coordinate),y=I(o,s,c+(u==="inner"?-1:1)*m,r.coordinate);return{x1:x.x,y1:x.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,o=Math.cos(-r.coordinate*br),s;return o>Me?s=i==="outer"?"start":"end":o<-Me?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.radius,c=r.axisLine,u=r.axisLineType,d=H(H({},N(this.props,!1)),{},{fill:"none"},N(c,!1));if(u==="circle")return h.createElement(pt,W({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:o,r:s}));var m=this.props.ticks,x=m.map(function(y){return I(i,o,s,y.coordinate)});return h.createElement(Ht,W({className:"recharts-polar-angle-axis-line"},d,{points:x}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,s=i.tick,c=i.tickLine,u=i.tickFormatter,d=i.stroke,m=N(this.props,!1),x=N(s,!1),y=H(H({},m),{},{fill:"none"},N(c,!1)),j=o.map(function(p,f){var g=r.getTickLineCoord(p),b=r.getTickTextAnchor(p),A=H(H(H({textAnchor:b},m),{},{stroke:"none",fill:d},x),{},{index:f,payload:p,x:g.x2,y:g.y2});return h.createElement(R,W({className:F("recharts-polar-angle-axis-tick",Ge(s)),key:"tick-".concat(p.coordinate)},Te(r.props,p,f)),c&&h.createElement("line",W({className:"recharts-polar-angle-axis-tick-line"},y,g)),s&&e.renderTickItem(s,A,u?u(p.value,f):p.value))});return h.createElement(R,{className:"recharts-polar-angle-axis-ticks"},j)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.radius,s=r.axisLine;return o<=0||!i||!i.length?null:h.createElement(R,{className:F("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,o){var s;return h.isValidElement(r)?s=h.cloneElement(r,i):U(r)?s=r(i):s=h.createElement(Re,W({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),s}}])}(je.PureComponent);_e(Pe,"displayName","PolarAngleAxis");_e(Pe,"axisType","angleAxis");_e(Pe,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ye;function se(t){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(t)}function re(){return re=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},re.apply(this,arguments)}function qe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qe(Object(n),!0).forEach(function(r){w(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,at(r.key),r)}}function Ar(t,e,n){return e&&Ve(t.prototype,e),n&&Ve(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nr(t,e,n){return e=be(e),_r(t,rt()?Reflect.construct(e,n||[],be(t).constructor):e.apply(t,n))}function _r(t,e){if(e&&(se(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pr(t)}function Pr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rt=function(){return!!t})()}function be(t){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},be(t)}function kr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Se(t,e)}function w(t,e,n){return e=at(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function at(t){var e=Or(t,"string");return se(e)=="symbol"?e:e+""}function Or(t,e){if(se(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(se(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var C=function(t){function e(n){var r;return jr(this,e),r=Nr(this,e,[n]),w(r,"pieRef",null),w(r,"sectorRefs",[]),w(r,"id",At("recharts-pie-")),w(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),U(i)&&i()}),w(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),U(i)&&i()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return kr(e,t),Ar(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.label,c=o.labelLine,u=o.dataKey,d=o.valueKey,m=N(this.props,!1),x=N(s,!1),y=N(c,!1),j=s&&s.offsetRadius||20,p=r.map(function(f,g){var b=(f.startAngle+f.endAngle)/2,A=I(f.cx,f.cy,f.outerRadius+j,b),P=v(v(v(v({},m),f),{},{stroke:"none"},x),{},{index:g,textAnchor:e.getTextAnchor(A.x,f.cx)},A),E=v(v(v(v({},m),f),{},{fill:"none",stroke:f.fill},y),{},{index:g,points:[I(f.cx,f.cy,f.outerRadius,b),A]}),k=u;return ae(u)&&ae(d)?k="value":ae(u)&&(k=d),h.createElement(R,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(g)},c&&e.renderLabelLineItem(c,E,"line"),e.renderLabelItem(s,P,X(f,k)))});return h.createElement(R,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(r){var i=this,o=this.props,s=o.activeShape,c=o.blendStroke,u=o.inactiveShape;return r.map(function(d,m){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&r.length!==1)return null;var x=i.isActiveIndex(m),y=u&&i.hasActiveIndex()?u:null,j=x?s:y,p=v(v({},d),{},{stroke:c?d.fill:d.stroke,tabIndex:-1});return h.createElement(R,re({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Te(i.props,d,m),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(m)}),h.createElement(yt,re({option:j,isActive:x,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,o=i.sectors,s=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,m=i.animationId,x=this.state,y=x.prevSectors,j=x.prevIsAnimationActive;return h.createElement(gt,{begin:c,duration:u,isActive:s,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(j),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var f=p.t,g=[],b=o&&o[0],A=b.startAngle;return o.forEach(function(P,E){var k=y&&y[E],T=E>0?vt(P,"paddingAngle",0):0;if(k){var B=Le(k.endAngle-k.startAngle,P.endAngle-P.startAngle),_=v(v({},P),{},{startAngle:A+T,endAngle:A+B(f)+T});g.push(_),A=_.endAngle}else{var K=P.endAngle,O=P.startAngle,D=Le(0,K-O),M=D(f),S=v(v({},P),{},{startAngle:A+T,endAngle:A+M+T});g.push(S),A=S.endAngle}}),h.createElement(R,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var c=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,o=r.isAnimationActive,s=this.state.prevSectors;return o&&i&&i.length&&(!s||!bt(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,o=i.hide,s=i.sectors,c=i.className,u=i.label,d=i.cx,m=i.cy,x=i.innerRadius,y=i.outerRadius,j=i.isAnimationActive,p=this.state.isAnimationFinished;if(o||!s||!s.length||!ee(d)||!ee(m)||!ee(x)||!ee(y))return null;var f=F("recharts-pie",c);return h.createElement(R,{tabIndex:this.props.rootTabIndex,className:f,ref:function(b){r.pieRef=b}},this.renderSectors(),u&&this.renderLabels(s),Ye.renderCallByParent(this.props,null,!1),(!j||p)&&jt.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,o){if(h.isValidElement(r))return h.cloneElement(r,i);if(U(r))return r(i);var s=F("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return h.createElement(xt,re({},i,{key:o,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,o){if(h.isValidElement(r))return h.cloneElement(r,i);var s=o;if(U(r)&&(s=r(i),h.isValidElement(s)))return s;var c=F("recharts-pie-label-text",typeof r!="boolean"&&!U(r)?r.className:"");return h.createElement(Re,re({},i,{alignmentBaseline:"middle",className:c}),s)}}])}(je.PureComponent);ye=C;w(C,"displayName","Pie");w(C,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Nt.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});w(C,"parseDeltaAngle",function(t,e){var n=xe(e-t),r=Math.min(Math.abs(e-t),360);return n*r});w(C,"getRealPieData",function(t){var e=t.data,n=t.children,r=N(t,!1),i=_t(n,Ze);return e&&e.length?e.map(function(o,s){return v(v(v({payload:o},r),o),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(o){return v(v({},r),o.props)}):[]});w(C,"parseCoordinateOfPie",function(t,e){var n=e.top,r=e.left,i=e.width,o=e.height,s=Pt(i,o),c=r+he(t.cx,i,i/2),u=n+he(t.cy,o,o/2),d=he(t.innerRadius,s,0),m=he(t.outerRadius,s,s*.8),x=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:m,maxRadius:x}});w(C,"getComposedData",function(t){var e=t.item,n=t.offset,r=e.type.defaultProps!==void 0?v(v({},e.type.defaultProps),e.props):e.props,i=ye.getRealPieData(r);if(!i||!i.length)return null;var o=r.cornerRadius,s=r.startAngle,c=r.endAngle,u=r.paddingAngle,d=r.dataKey,m=r.nameKey,x=r.valueKey,y=r.tooltipType,j=Math.abs(r.minAngle),p=ye.parseCoordinateOfPie(r,n),f=ye.parseDeltaAngle(s,c),g=Math.abs(f),b=d;ae(d)&&ae(x)?(Ee(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):ae(d)&&(Ee(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=x);var A=i.filter(function(_){return X(_,b,0)!==0}).length,P=(g>=360?A:A-1)*u,E=g-A*j-P,k=i.reduce(function(_,K){var O=X(K,b,0);return _+(ee(O)?O:0)},0),T;if(k>0){var B;T=i.map(function(_,K){var O=X(_,b,0),D=X(_,m,K),M=(ee(O)?O:0)/k,S;K?S=B.endAngle+xe(f)*u*(O!==0?1:0):S=s;var oe=S+xe(f)*((O!==0?j:0)+M*E),l=(S+oe)/2,L=(p.innerRadius+p.outerRadius)/2,le=[{name:D,value:O,payload:_,dataKey:b,type:y}],me=I(p.cx,p.cy,L,l);return B=v(v(v({percent:M,cornerRadius:o,name:D,tooltipPayload:le,midAngle:l,middleRadius:L,tooltipPosition:me},_),p),{},{value:X(_,b),startAngle:S,endAngle:oe,payload:_,paddingAngle:xe(f)*u}),B})}return v(v({},p),{},{sectors:T,data:i})});var pe=Xe({chartName:"BarChart",GraphicalChild:$,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:J},{axisType:"yAxis",AxisComp:Q}],formatAxisMap:kt}),wr=Xe({chartName:"PieChart",GraphicalChild:C,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Pe},{axisType:"radiusAxis",AxisComp:Ne}],formatAxisMap:Ot,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const He=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6"];function Z(t,e,n){if(!t||t.length===0)return;const r=Object.keys(e),o=[Object.values(e).join(",")];for(const m of t){const x=r.map(y=>{const j=m[y]??"";return`"${String(j).replace(/"/g,'""')}"`});o.push(x.join(","))}const s="\uFEFF"+o.join(`
`),c=new Blob([s],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=n,d.click(),URL.revokeObjectURL(u)}function Kr(){var y,j,p,f,g,b,A,P,E,k,T,B,_,K,O,D,M,S,oe;const[t,e]=je.useState("sales"),{data:n}=q({queryKey:["reports","sales"],queryFn:()=>ce.sales().then(l=>l.data),enabled:t==="sales"}),{data:r}=q({queryKey:["reports","customers"],queryFn:()=>ce.customers().then(l=>l.data),enabled:t==="customers"}),{data:i}=q({queryKey:["reports","employees"],queryFn:()=>ce.employees().then(l=>l.data),enabled:t==="employees"}),{data:o}=q({queryKey:["reports","financial"],queryFn:()=>ce.financial().then(l=>l.data),enabled:t==="financial"}),{data:s}=q({queryKey:["reports","profit-loss"],queryFn:()=>ce.profitLoss().then(l=>l.data),enabled:t==="profitloss"}),{data:c}=q({queryKey:["reports","performance-rankings"],queryFn:()=>ct.getRankings().then(l=>l.data),enabled:t==="performance"}),{data:u}=q({queryKey:["reports","incident-stats"],queryFn:()=>dt.getStats().then(l=>l.data),enabled:t==="performance"}),d=[{id:"sales",label:"מכירות",icon:wt},{id:"customers",label:"לקוחות",icon:st},{id:"employees",label:"עובדים",icon:ot},{id:"financial",label:"כספים",icon:Kt},{id:"profitloss",label:"רווח והפסד",icon:lt},{id:"performance",label:"ביצועי מאבטחים",icon:Lt}],m=()=>{switch(t){case"sales":n!=null&&n.leadsBySource&&Z(n.leadsBySource,{source:"מקור",count:"כמות"},"sales-by-source.csv");break;case"customers":r!=null&&r.revenueByCustomer&&Z(r.revenueByCustomer,{company_name:"חברה",total_revenue:"הכנסות"},"customers-revenue.csv");break;case"employees":i!=null&&i.hoursBreakdown&&Z(i.hoursBreakdown,{name:"עובד",total_hours:"שעות",days_worked:"ימי עבודה",saturday_hours:"שעות שבת"},"employees-hours.csv");break;case"financial":o!=null&&o.revenueByCustomer&&Z(o.revenueByCustomer,{company_name:"לקוח",paid:"שולם",pending:"ממתין"},"financial-revenue.csv");break;case"profitloss":s!=null&&s.customerProfitability&&Z(s.customerProfitability,{company_name:"לקוח",revenue:"הכנסות",labor_cost:"עלות עבודה",profit:"רווח",margin:"מרווח %",hours:"שעות"},"profit-loss-by-customer.csv");break;case"performance":c!=null&&c.rankings&&Z(c.rankings,{first_name:"שם פרטי",last_name:"שם משפחה",avg_rating:"דירוג ממוצע",total_ratings:"דירוגים",shifts_completed:"משמרות הושלמו",shifts_total:'סה"כ משמרות'},"guard-performance.csv");break}},x=()=>{const l=new Date().toLocaleDateString("he-IL");switch(t){case"sales":n!=null&&n.leadsBySource&&z({title:"Yahalom CRM - Sales Report",subtitle:l,columns:[{header:"Source",dataKey:"source"},{header:"Count",dataKey:"count"}],data:n.leadsBySource,filename:"sales-report.pdf"});break;case"customers":r!=null&&r.revenueByCustomer&&z({title:"Yahalom CRM - Customers Revenue",subtitle:l,columns:[{header:"Company",dataKey:"company_name"},{header:"Revenue",dataKey:"total_revenue"}],data:r.revenueByCustomer,filename:"customers-revenue.pdf"});break;case"employees":i!=null&&i.hoursBreakdown&&z({title:"Yahalom CRM - Employee Hours",subtitle:l,columns:[{header:"Employee",dataKey:"name"},{header:"Total Hours",dataKey:"total_hours"},{header:"Days Worked",dataKey:"days_worked"},{header:"Saturday Hours",dataKey:"saturday_hours"}],data:i.hoursBreakdown,filename:"employees-hours.pdf",orientation:"landscape"});break;case"financial":o!=null&&o.revenueByCustomer&&z({title:"Yahalom CRM - Financial Report",subtitle:l,columns:[{header:"Customer",dataKey:"company_name"},{header:"Paid",dataKey:"paid"},{header:"Pending",dataKey:"pending"}],data:o.revenueByCustomer,filename:"financial-report.pdf"});break;case"profitloss":s!=null&&s.customerProfitability&&z({title:"Yahalom CRM - Profit & Loss",subtitle:l,columns:[{header:"Customer",dataKey:"company_name"},{header:"Revenue",dataKey:"revenue"},{header:"Labor Cost",dataKey:"labor_cost"},{header:"Profit",dataKey:"profit"},{header:"Margin %",dataKey:"margin"},{header:"Hours",dataKey:"hours"}],data:s.customerProfitability,filename:"profit-loss.pdf",orientation:"landscape"});break;case"performance":c!=null&&c.rankings&&z({title:"Yahalom CRM - Guard Performance",subtitle:l,columns:[{header:"First Name",dataKey:"first_name"},{header:"Last Name",dataKey:"last_name"},{header:"Avg Rating",dataKey:"avg_rating"},{header:"Total Ratings",dataKey:"total_ratings"},{header:"Shifts Done",dataKey:"shifts_completed"},{header:"Total Shifts",dataKey:"shifts_total"}],data:c.rankings,filename:"guard-performance.pdf",orientation:"landscape"});break}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"דוחות"}),a.jsx("p",{className:"text-gray-500",children:"ניתוח נתונים וביצועים"})]}),a.jsxs("div",{className:"flex items-center gap-2 no-print",children:[a.jsxs("button",{onClick:m,className:"btn-secondary flex items-center gap-2",children:[a.jsx(ut,{className:"w-5 h-5"}),"ייצוא לאקסל"]}),a.jsxs("button",{onClick:x,className:"btn-secondary flex items-center gap-2",children:[a.jsx(it,{className:"w-5 h-5"}),"ייצוא PDF"]}),a.jsxs("button",{onClick:()=>window.print(),className:"btn-secondary flex items-center gap-2",children:[a.jsx(ft,{className:"w-5 h-5"}),"הדפס"]})]})]}),a.jsx("div",{className:"border-b",children:a.jsx("nav",{className:"flex gap-4",children:d.map(l=>a.jsxs("button",{onClick:()=>e(l.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${t===l.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[a.jsx(l.icon,{className:"w-5 h-5"}),l.label]},l.id))})}),t==="sales"&&n&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"המרת לידים"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:((y=n.conversionRate)==null?void 0:y.total_leads)||0}),a.jsx("p",{className:"text-sm text-gray-500",children:"לידים"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl font-bold text-green-600",children:((j=n.conversionRate)==null?void 0:j.won)||0}),a.jsx("p",{className:"text-sm text-gray-500",children:"נסגרו"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-3xl font-bold text-primary-600",children:[((p=n.conversionRate)==null?void 0:p.conversion_rate)||0,"%"]}),a.jsx("p",{className:"text-sm text-gray-500",children:"אחוז המרה"})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"לידים לפי מקור"}),a.jsx("div",{className:"h-64",children:a.jsx(G,{width:"100%",height:"100%",children:a.jsxs(wr,{children:[a.jsx(C,{data:n.leadsBySource||[],dataKey:"count",nameKey:"source",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:(n.leadsBySource||[]).map((l,L)=>a.jsx(Ze,{fill:He[L%He.length]},L))}),a.jsx(Y,{})]})})})]}),a.jsxs("div",{className:"card lg:col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"לידים חודשיים"}),a.jsx("div",{className:"h-64",children:a.jsx(G,{width:"100%",height:"100%",children:a.jsxs(pe,{data:n.monthlyLeads||[],children:[a.jsx(de,{strokeDasharray:"3 3"}),a.jsx(J,{dataKey:"month"}),a.jsx(Q,{}),a.jsx(Y,{}),a.jsx($,{dataKey:"total",fill:"#0ea5e9",name:"סה״כ"}),a.jsx($,{dataKey:"won",fill:"#22c55e",name:"נסגרו"})]})})})]})]}),t==="customers"&&r&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"הכנסות לפי לקוח (Top 10)"}),a.jsx("div",{className:"h-64",children:a.jsx(G,{width:"100%",height:"100%",children:a.jsxs(pe,{data:r.revenueByCustomer||[],layout:"vertical",children:[a.jsx(de,{strokeDasharray:"3 3"}),a.jsx(J,{type:"number"}),a.jsx(Q,{dataKey:"company_name",type:"category",width:100}),a.jsx(Y,{formatter:l=>`₪${l.toLocaleString()}`}),a.jsx($,{dataKey:"total_revenue",fill:"#0ea5e9"})]})})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"לקוחות בסיכון (90 יום ללא פעילות)"}),((f=r.churnRisk)==null?void 0:f.length)>0?a.jsx("div",{className:"space-y-2",children:r.churnRisk.map(l=>a.jsx("div",{className:"p-3 bg-red-50 rounded-lg",children:a.jsx("p",{className:"font-medium text-red-800",children:l.company_name})},l.id))}):a.jsx("p",{className:"text-green-600 text-center py-8",children:"אין לקוחות בסיכון"})]})]}),t==="employees"&&i&&a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:a.jsxs("div",{className:"card lg:col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"שעות עבודה חודשיות"}),a.jsx("div",{className:"table-container",children:a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"עובד"}),a.jsx("th",{children:"שעות"}),a.jsx("th",{children:"ימי עבודה"}),a.jsx("th",{children:"שעות שבת"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:(i.hoursBreakdown||[]).slice(0,10).map(l=>a.jsxs("tr",{children:[a.jsx("td",{className:"font-medium",children:l.name}),a.jsx("td",{children:l.total_hours||0}),a.jsx("td",{children:l.days_worked||0}),a.jsx("td",{children:l.saturday_hours||0})]},l.id))})]})})]})}),t==="financial"&&o&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card lg:col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"הכנסות חודשיות"}),a.jsx("div",{className:"h-64",children:a.jsx(G,{width:"100%",height:"100%",children:a.jsxs(pe,{data:o.monthlyRevenue||[],children:[a.jsx(de,{strokeDasharray:"3 3"}),a.jsx(J,{dataKey:"month"}),a.jsx(Q,{}),a.jsx(Y,{formatter:l=>`₪${l==null?void 0:l.toLocaleString()}`}),a.jsx($,{dataKey:"collected",fill:"#22c55e",name:"נגבה"}),a.jsx($,{dataKey:"invoiced",fill:"#0ea5e9",name:"הופק"})]})})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"תשלומים פתוחים"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[a.jsx("span",{children:"ממתין לתשלום"}),a.jsxs("span",{className:"font-bold",children:["₪",(((g=o.outstandingPayments)==null?void 0:g.pending)||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[a.jsx("span",{children:"באיחור"}),a.jsxs("span",{className:"font-bold text-red-600",children:["₪",(((b=o.outstandingPayments)==null?void 0:b.overdue)||0).toLocaleString()]})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-100 rounded-lg",children:[a.jsx("span",{children:"באיחור 60+ יום"}),a.jsxs("span",{className:"font-bold text-red-700",children:["₪",(((A=o.outstandingPayments)==null?void 0:A.overdue_60)||0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"הכנסות לפי לקוח"}),a.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(o.revenueByCustomer||[]).map(l=>a.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[a.jsx("span",{className:"truncate",children:l.company_name}),a.jsxs("span",{className:"font-medium text-green-600",children:["₪",(l.paid||0).toLocaleString()]})]},l.company_name))})]})]}),t==="profitloss"&&s&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"card text-center",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"הכנסות (שנתי)"}),a.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₪",(((P=s.totals)==null?void 0:P.revenue)||0).toLocaleString()]})]}),a.jsxs("div",{className:"card text-center",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"עלות עבודה"}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["₪",(((E=s.totals)==null?void 0:E.labor_cost)||0).toLocaleString()]})]}),a.jsxs("div",{className:"card text-center",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"רווח נקי"}),a.jsxs("p",{className:`text-2xl font-bold ${(((k=s.totals)==null?void 0:k.profit)||0)>=0?"text-green-600":"text-red-600"}`,children:["₪",(((T=s.totals)==null?void 0:T.profit)||0).toLocaleString()]})]}),a.jsxs("div",{className:"card text-center",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"מרווח רווח"}),a.jsxs("p",{className:`text-2xl font-bold ${(((B=s.totals)==null?void 0:B.margin)||0)>=0?"text-blue-600":"text-red-600"}`,children:[((_=s.totals)==null?void 0:_.margin)||0,"%"]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"רווח והפסד חודשי"}),a.jsx("div",{className:"h-72",children:a.jsx(G,{width:"100%",height:"100%",children:a.jsxs(pe,{data:s.monthly||[],children:[a.jsx(de,{strokeDasharray:"3 3"}),a.jsx(J,{dataKey:"month"}),a.jsx(Q,{}),a.jsx(Y,{formatter:l=>`₪${l==null?void 0:l.toLocaleString()}`}),a.jsx(St,{}),a.jsx($,{dataKey:"revenue",fill:"#22c55e",name:"הכנסות"}),a.jsx($,{dataKey:"labor_cost",fill:"#ef4444",name:"עלות עבודה"}),a.jsx($,{dataKey:"profit",fill:"#3b82f6",name:"רווח"})]})})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"מגמת מרווח רווח"}),a.jsx("div",{className:"h-56",children:a.jsx(G,{width:"100%",height:"100%",children:a.jsxs(Rt,{data:s.monthly||[],children:[a.jsx(de,{strokeDasharray:"3 3"}),a.jsx(J,{dataKey:"month"}),a.jsx(Q,{unit:"%"}),a.jsx(Y,{formatter:l=>`${l}%`}),a.jsx(Tt,{type:"monotone",dataKey:"margin",stroke:"#8b5cf6",strokeWidth:2,name:"מרווח %"})]})})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"פירוט חודשי"}),a.jsx("div",{className:"table-container",children:a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"חודש"}),a.jsx("th",{children:"הכנסות"}),a.jsx("th",{children:"עלות עבודה"}),a.jsx("th",{children:"רווח"}),a.jsx("th",{children:"מרווח"}),a.jsx("th",{children:"שעות"}),a.jsx("th",{children:"עובדים"})]})}),a.jsxs("tbody",{className:"divide-y divide-gray-200",children:[(s.monthly||[]).map(l=>a.jsxs("tr",{children:[a.jsx("td",{className:"font-medium",children:l.month}),a.jsxs("td",{className:"text-green-600",children:["₪",(l.revenue||0).toLocaleString()]}),a.jsxs("td",{className:"text-red-600",children:["₪",(l.labor_cost||0).toLocaleString()]}),a.jsxs("td",{className:l.profit>=0?"text-green-700 font-bold":"text-red-700 font-bold",children:["₪",(l.profit||0).toLocaleString()]}),a.jsx("td",{children:a.jsxs("span",{className:`badge ${l.margin>=30?"badge-success":l.margin>=10?"badge-warning":"badge-danger"}`,children:[l.margin,"%"]})}),a.jsx("td",{children:(l.total_hours||0).toLocaleString()}),a.jsx("td",{children:l.unique_employees||0})]},l.month)),((K=s.monthly)==null?void 0:K.length)>0&&a.jsxs("tr",{className:"bg-gray-50 font-bold",children:[a.jsx("td",{children:'סה"כ'}),a.jsxs("td",{className:"text-green-600",children:["₪",(((O=s.totals)==null?void 0:O.revenue)||0).toLocaleString()]}),a.jsxs("td",{className:"text-red-600",children:["₪",(((D=s.totals)==null?void 0:D.labor_cost)||0).toLocaleString()]}),a.jsxs("td",{className:((M=s.totals)==null?void 0:M.profit)>=0?"text-green-700":"text-red-700",children:["₪",(((S=s.totals)==null?void 0:S.profit)||0).toLocaleString()]}),a.jsxs("td",{children:[((oe=s.totals)==null?void 0:oe.margin)||0,"%"]}),a.jsx("td",{}),a.jsx("td",{})]})]})]})})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"רווחיות לפי לקוח"}),a.jsx("div",{className:"table-container",children:a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"לקוח"}),a.jsx("th",{children:"הכנסות"}),a.jsx("th",{children:"עלות עבודה"}),a.jsx("th",{children:"רווח"}),a.jsx("th",{children:"מרווח"}),a.jsx("th",{children:"שעות"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:(s.customerProfitability||[]).map(l=>a.jsxs("tr",{children:[a.jsx("td",{className:"font-medium",children:l.company_name}),a.jsxs("td",{className:"text-green-600",children:["₪",(l.revenue||0).toLocaleString()]}),a.jsxs("td",{className:"text-red-600",children:["₪",(l.labor_cost||0).toLocaleString()]}),a.jsxs("td",{className:l.profit>=0?"text-green-700 font-bold":"text-red-700 font-bold",children:["₪",(l.profit||0).toLocaleString()]}),a.jsx("td",{children:a.jsxs("span",{className:`badge ${l.margin>=30?"badge-success":l.margin>=10?"badge-warning":"badge-danger"}`,children:[l.margin,"%"]})}),a.jsx("td",{children:(l.hours||0).toLocaleString()})]},l.company_name))})]})}),(!s.customerProfitability||s.customerProfitability.length===0)&&a.jsx("p",{className:"text-gray-400 text-center py-8",children:"אין נתוני רווחיות"})]})]}),t==="performance"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u&&a.jsxs("div",{className:"card lg:col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"סטטיסטיקות אירועי אבטחה"}),a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.open||0}),a.jsx("p",{className:"text-sm text-gray-500",children:"פתוחים"})]}),a.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:u.investigating||0}),a.jsx("p",{className:"text-sm text-gray-500",children:"בחקירה"})]}),a.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.resolved||0}),a.jsx("p",{className:"text-sm text-gray-500",children:"נפתרו"})]}),a.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.total||0}),a.jsx("p",{className:"text-sm text-gray-500",children:'סה"כ'})]})]})]}),a.jsxs("div",{className:"card lg:col-span-2",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"דירוג מאבטחים"}),a.jsx("div",{className:"table-container",children:a.jsxs("table",{className:"table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"דירוג"}),a.jsx("th",{children:"מאבטח"}),a.jsx("th",{children:"ציון ממוצע"}),a.jsx("th",{children:"דירוגים"}),a.jsx("th",{children:"משמרות הושלמו"}),a.jsx("th",{children:"אחוז נוכחות"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:((c==null?void 0:c.rankings)||[]).map((l,L)=>{const le=l.shifts_total>0?Math.round(l.shifts_completed/l.shifts_total*100):0;return a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:`inline-flex items-center justify-center w-7 h-7 rounded-full text-sm font-bold ${L===0?"bg-yellow-100 text-yellow-700":L===1?"bg-gray-100 text-gray-700":L===2?"bg-orange-100 text-orange-700":"bg-white text-gray-500"}`,children:L+1})}),a.jsxs("td",{className:"font-medium",children:[l.first_name," ",l.last_name]}),a.jsx("td",{children:a.jsx("div",{className:"flex items-center gap-1",children:l.avg_rating?a.jsxs(a.Fragment,{children:[[1,2,3,4,5].map(me=>a.jsx(Et,{className:`w-3.5 h-3.5 ${me<=Math.round(l.avg_rating)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},me)),a.jsx("span",{className:"text-sm mr-1",children:l.avg_rating})]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"אין דירוג"})})}),a.jsx("td",{children:l.total_ratings||0}),a.jsxs("td",{children:[l.shifts_completed,"/",l.shifts_total]}),a.jsx("td",{children:a.jsxs("span",{className:`font-medium ${le>=90?"text-green-600":le>=70?"text-yellow-600":"text-red-600"}`,children:[le,"%"]})})]},l.id)})})]})}),(!(c!=null&&c.rankings)||c.rankings.length===0)&&a.jsx("p",{className:"text-gray-400 text-center py-8",children:"אין נתוני ביצועים"})]})]})]})}export{Kr as default};
