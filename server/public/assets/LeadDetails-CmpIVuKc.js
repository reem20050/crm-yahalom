import{t as O,c as E,r as d,d as S,j as e,X as P,L as Q,z as m,l as _,w as T,u as z,e as A,B as D}from"./index-CYVBYVvl.js";import{W as K,S as $}from"./WhatsAppButton-csVOSNvP.js";import{A as W,E as R}from"./EmailComposeModal-BMaLogfa.js";import{C as B,a as H}from"./chevron-right-BiJ3-t6b.js";import{A as I}from"./arrow-left-right-BjGTqRx7.js";import{A as X,S as Z}from"./save-BK0rCRCi.js";import{T as q}from"./trash-2-BmAQAHXt.js";import{P as G}from"./phone-D7QUjJCD.js";import{M as J}from"./mail-PtKQKhMA.js";import{M as U}from"./map-pin-Dk7RblVh.js";import"./message-circle-CjovvPKe.js";import"./external-link-BuJEn0AY.js";import"./plus-p_an0ThM.js";import"./refresh-cw-Dxqpz4z1.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=O("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),Y=["פרטי לקוח","פרטי חוזה","פרטי אתר"],ee=[{value:"office",label:"משרד"},{value:"warehouse",label:"מחסן"},{value:"residential",label:"מגורים"},{value:"commercial",label:"מסחרי"},{value:"industrial",label:"תעשייתי"},{value:"other",label:"אחר"}],se=[{value:"regular",label:"אבטחה קבועה"},{value:"event",label:"אירוע חד-פעמי"},{value:"both",label:"שניהם"}];function ae({isOpen:o,onClose:u,lead:n,onSuccess:h}){const p=E(),[r,j]=d.useState(1),[b,w]=d.useState(!1),[N,C]=d.useState(!1),[t,c]=d.useState({company_name:n.company_name||"",contact_name:n.contact_name||"",phone:n.phone||"",email:n.email||"",address:"",city:"",service_type:n.service_type||"",notes:n.description||""}),[i,v]=d.useState({monthly_value:n.expected_value||"",start_date:new Date().toISOString().split("T")[0],end_date:"",terms:"שוטף + 30",auto_renewal:!0}),[s,x]=d.useState({name:(n.company_name||n.contact_name)+" - ראשי",address:n.location||"",city:"",type:"office",contact_name:n.contact_name||"",contact_phone:n.phone||"",requirements:"",notes:""}),g=S({mutationFn:()=>{const a={customer:t};return b&&i.monthly_value&&(a.contract=i),N&&s.name&&(a.site=s),_.convert(n.id,a)},onSuccess:a=>{var f,l;p.invalidateQueries({queryKey:["leads"]}),p.invalidateQueries({queryKey:["lead",n.id]}),p.invalidateQueries({queryKey:["customers"]}),m.success("ליד הומר ללקוח בהצלחה!"),u(),h&&((l=(f=a.data)==null?void 0:f.customer)!=null&&l.id)&&h(a.data.customer.id)},onError:()=>{m.error("שגיאה בהמרת הליד")}}),y=()=>{if(r===1){if(!t.contact_name.trim()){m.error("שם איש קשר הוא שדה חובה");return}if(!t.phone.trim()){m.error("מספר טלפון הוא שדה חובה");return}}j(a=>Math.min(a+1,3))},k=()=>{j(a=>Math.max(a-1,1))},F=()=>{g.mutate()};return o?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-5 border-b",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"המרת ליד ללקוח"}),e.jsx("button",{onClick:u,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(P,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"flex items-center justify-center gap-4 p-4 border-b bg-gray-50",children:[1,2,3].map(a=>e.jsxs("div",{className:`flex items-center gap-2 cursor-pointer ${r>=a?"text-primary-600":"text-gray-400"}`,onClick:()=>{a<r&&j(a)},children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-colors ${r===a?"bg-primary-600 text-white":r>a?"bg-green-500 text-white":"bg-gray-200 text-gray-500"}`,children:r>a?"✓":a}),e.jsx("span",{className:"text-sm font-medium hidden sm:block",children:Y[a-1]}),a<3&&e.jsx("div",{className:`w-8 h-0.5 hidden sm:block ${r>a?"bg-green-500":"bg-gray-200"}`})]},a))}),e.jsxs("div",{className:"p-6",children:[r===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"פרטי לקוח"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"label",children:"שם חברה"}),e.jsx("input",{value:t.company_name,onChange:a=>c({...t,company_name:a.target.value}),className:"input",placeholder:"שם החברה"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"שם איש קשר *"}),e.jsx("input",{value:t.contact_name,onChange:a=>c({...t,contact_name:a.target.value}),className:"input",placeholder:"שם מלא"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"טלפון *"}),e.jsx("input",{value:t.phone,onChange:a=>c({...t,phone:a.target.value}),className:"input",dir:"ltr",placeholder:"050-0000000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"אימייל"}),e.jsx("input",{value:t.email,onChange:a=>c({...t,email:a.target.value}),className:"input",dir:"ltr",type:"email",placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"סוג שירות"}),e.jsxs("select",{value:t.service_type,onChange:a=>c({...t,service_type:a.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"בחר סוג שירות"}),se.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"כתובת"}),e.jsx("input",{value:t.address,onChange:a=>c({...t,address:a.target.value}),className:"input",placeholder:"כתובת"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"עיר"}),e.jsx("input",{value:t.city,onChange:a=>c({...t,city:a.target.value}),className:"input",placeholder:"עיר"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"label",children:"הערות"}),e.jsx("textarea",{value:t.notes,onChange:a=>c({...t,notes:a.target.value}),className:"input",rows:3,placeholder:"הערות נוספות..."})]})]})]}),r===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"פרטי חוזה"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:b,onChange:a=>w(a.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"הוסף חוזה"})]})]}),b?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"סכום חודשי (₪) *"}),e.jsx("input",{type:"number",value:i.monthly_value,onChange:a=>v({...i,monthly_value:a.target.value?Number(a.target.value):""}),className:"input",dir:"ltr",placeholder:"0",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"תנאי תשלום"}),e.jsxs("select",{value:i.terms,onChange:a=>v({...i,terms:a.target.value}),className:"input",children:[e.jsx("option",{value:"שוטף + 30",children:"שוטף + 30"}),e.jsx("option",{value:"שוטף + 45",children:"שוטף + 45"}),e.jsx("option",{value:"שוטף + 60",children:"שוטף + 60"}),e.jsx("option",{value:"שוטף + 90",children:"שוטף + 90"}),e.jsx("option",{value:"מזומן",children:"מזומן"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"תאריך התחלה"}),e.jsx("input",{type:"date",value:i.start_date,onChange:a=>v({...i,start_date:a.target.value}),className:"input",dir:"ltr"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"תאריך סיום"}),e.jsx("input",{type:"date",value:i.end_date,onChange:a=>v({...i,end_date:a.target.value}),className:"input",dir:"ltr"})]}),e.jsx("div",{className:"sm:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.auto_renewal,onChange:a=>v({...i,auto_renewal:a.target.checked}),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"חידוש אוטומטי"})]})})]}):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("p",{className:"text-lg",children:"ניתן להוסיף חוזה מאוחר יותר"}),e.jsx("p",{className:"text-sm mt-1",children:"סמן את התיבה למעלה כדי להוסיף פרטי חוזה"})]})]}),r===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"פרטי אתר"}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:a=>C(a.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"הוסף אתר"})]})]}),N?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"label",children:"שם האתר *"}),e.jsx("input",{value:s.name,onChange:a=>x({...s,name:a.target.value}),className:"input",placeholder:"שם האתר"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"כתובת"}),e.jsx("input",{value:s.address,onChange:a=>x({...s,address:a.target.value}),className:"input",placeholder:"כתובת האתר"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"עיר"}),e.jsx("input",{value:s.city,onChange:a=>x({...s,city:a.target.value}),className:"input",placeholder:"עיר"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"סוג אתר"}),e.jsx("select",{value:s.type,onChange:a=>x({...s,type:a.target.value}),className:"input",children:ee.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"איש קשר באתר"}),e.jsx("input",{value:s.contact_name,onChange:a=>x({...s,contact_name:a.target.value}),className:"input",placeholder:"שם איש קשר"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"טלפון איש קשר"}),e.jsx("input",{value:s.contact_phone,onChange:a=>x({...s,contact_phone:a.target.value}),className:"input",dir:"ltr",placeholder:"050-0000000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"דרישות"}),e.jsx("input",{value:s.requirements,onChange:a=>x({...s,requirements:a.target.value}),className:"input",placeholder:"דרישות מיוחדות"})]}),e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("label",{className:"label",children:"הערות"}),e.jsx("textarea",{value:s.notes,onChange:a=>x({...s,notes:a.target.value}),className:"input",rows:2,placeholder:"הערות נוספות..."})]})]}):e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx("p",{className:"text-lg",children:"ניתן להוסיף אתר מאוחר יותר"}),e.jsx("p",{className:"text-sm mt-1",children:"סמן את התיבה למעלה כדי להוסיף פרטי אתר"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-5 border-t bg-gray-50",children:[e.jsx("div",{children:r>1&&e.jsxs("button",{onClick:k,className:"btn-secondary flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"הקודם"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:u,className:"btn-secondary",children:"ביטול"}),r<3?e.jsxs("button",{onClick:y,className:"btn-primary flex items-center gap-2",children:["הבא",e.jsx(H,{className:"w-4 h-4"})]}):e.jsx("button",{onClick:F,disabled:g.isPending,className:"btn-success flex items-center gap-2",children:g.isPending?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-4 h-4 animate-spin"}),"ממיר..."]}):e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"w-4 h-4"}),"המר ליד"]})})]})]})]})}):null}const le=[{value:"new",label:"חדש"},{value:"contacted",label:"נוצר קשר"},{value:"meeting_scheduled",label:"פגישה נקבעה"},{value:"proposal_sent",label:"הצעה נשלחה"},{value:"negotiation",label:"משא ומתן"},{value:"won",label:"נסגר"},{value:"lost",label:"אבד"}],M=[{value:"website",label:"אתר אינטרנט"},{value:"whatsapp",label:"וואטסאפ"},{value:"phone",label:"טלפון"},{value:"referral",label:"הפניה"}],L=[{value:"regular",label:"שמירה רגילה"},{value:"event",label:"אירועים"},{value:"both",label:"שניהם"}];function ge(){var a,f;const{id:o}=T(),u=z(),n=E(),[h,p]=d.useState(!1),[r,j]=d.useState(!1),[b,w]=d.useState(!1),[N,C]=d.useState(!1),[t,c]=d.useState({contact_name:"",company_name:"",phone:"",email:"",location:"",description:"",source:"",service_type:""}),{data:i,isLoading:v}=A({queryKey:["lead",o],queryFn:()=>_.getOne(o).then(l=>l.data),enabled:!!o}),s=i==null?void 0:i.lead;d.useEffect(()=>{s&&c({contact_name:s.contact_name||"",company_name:s.company_name||"",phone:s.phone||"",email:s.email||"",location:s.location||"",description:s.description||"",source:s.source||"",service_type:s.service_type||""})},[s]);const x=S({mutationFn:l=>_.update(o,{status:l}),onSuccess:()=>{n.invalidateQueries({queryKey:["lead",o]}),m.success("סטטוס עודכן")},onError:()=>m.error("שגיאה בעדכון סטטוס")}),g=S({mutationFn:l=>_.update(o,l),onSuccess:()=>{n.invalidateQueries({queryKey:["lead",o]}),n.invalidateQueries({queryKey:["leads"]}),m.success("הליד עודכן בהצלחה"),p(!1)},onError:()=>{m.error("שגיאה בעדכון הליד")}}),y=S({mutationFn:()=>_.delete(o),onSuccess:()=>{n.invalidateQueries({queryKey:["leads"]}),m.success("הליד נמחק בהצלחה"),u("/leads")},onError:()=>{m.error("שגיאה במחיקת הליד")}}),k=()=>{if(!t.contact_name.trim()){m.error("שם איש קשר הוא שדה חובה");return}g.mutate(t)},F=()=>{s&&c({contact_name:s.contact_name||"",company_name:s.company_name||"",phone:s.phone||"",email:s.email||"",location:s.location||"",description:s.description||"",source:s.source||"",service_type:s.service_type||""}),p(!1)};return v?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("button",{onClick:()=>u("/leads"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[e.jsx(X,{className:"w-5 h-5"}),"חזרה ללידים"]}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{children:h?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"שם איש קשר *"}),e.jsx("input",{value:t.contact_name,onChange:l=>c({...t,contact_name:l.target.value}),className:"input text-2xl font-bold",placeholder:"שם איש קשר"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"שם חברה"}),e.jsx("input",{value:t.company_name,onChange:l=>c({...t,company_name:l.target.value}),className:"input",placeholder:"שם חברה"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s==null?void 0:s.contact_name}),(s==null?void 0:s.company_name)&&e.jsxs("p",{className:"text-gray-500 flex items-center gap-2",children:[e.jsx(D,{className:"w-4 h-4"}),s.company_name]})]})}),e.jsx("div",{className:"flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:k,disabled:g.isPending,className:"btn-primary flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5"}),g.isPending?"שומר...":"שמור"]}),e.jsxs("button",{onClick:F,className:"btn-secondary flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5"}),"ביטול"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>p(!0),className:"btn-secondary flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5"}),"עריכה"]}),(s==null?void 0:s.status)!=="lost"&&(s==null?void 0:s.status)!=="won"&&(s==null?void 0:s.status)!=="converted"&&e.jsxs("button",{onClick:()=>w(!0),className:"btn-success flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"המר ללקוח"]}),e.jsxs("button",{onClick:()=>j(!0),className:"btn-danger flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5"}),"מחק ליד"]})]})})]}),r&&e.jsx("div",{className:"fixed inset-0 bg-gray-900/40 backdrop-blur-sm animate-fade-in flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"מחיקת ליד"}),e.jsxs("p",{className:"text-gray-600",children:["האם אתה בטוח שברצונך למחוק את הליד של ",e.jsx("strong",{children:s==null?void 0:s.contact_name}),"?",e.jsx("br",{}),"פעולה זו אינה ניתנת לביטול."]}),e.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[e.jsx("button",{onClick:()=>j(!1),className:"btn-secondary",children:"ביטול"}),e.jsxs("button",{onClick:()=>{y.mutate(),j(!1)},disabled:y.isPending,className:"btn-danger flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),y.isPending?"מוחק...":"מחק"]})]})]})}),s&&e.jsx(ae,{isOpen:b,onClose:()=>w(!1),lead:{id:s.id,company_name:s.company_name,contact_name:s.contact_name,phone:s.phone,email:s.email,service_type:s.service_type,description:s.description,location:s.location,expected_value:s.expected_value},onSuccess:l=>u(`/customers/${l}`)}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"פרטי קשר"}),h?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"טלפון"}),e.jsx("input",{value:t.phone,onChange:l=>c({...t,phone:l.target.value}),className:"input",dir:"ltr",placeholder:"טלפון"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"אימייל"}),e.jsx("input",{value:t.email,onChange:l=>c({...t,email:l.target.value}),className:"input",dir:"ltr",type:"email",placeholder:"אימייל"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"מיקום"}),e.jsx("input",{value:t.location,onChange:l=>c({...t,location:l.target.value}),className:"input",placeholder:"מיקום"})]})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"טלפון"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`tel:${s==null?void 0:s.phone}`,className:"text-primary-600 font-medium",children:s==null?void 0:s.phone}),(s==null?void 0:s.phone)&&e.jsx(K,{phone:s.phone,name:s.contact_name,size:"sm"})]})]})]}),(s==null?void 0:s.email)&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"אימייל"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("a",{href:`mailto:${s.email}`,className:"text-primary-600 font-medium",children:s.email}),e.jsx("button",{onClick:()=>C(!0),className:"text-blue-500 hover:text-blue-700 p-1 rounded hover:bg-blue-50 transition-colors",title:"שלח אימייל",children:e.jsx($,{className:"w-4 h-4"})})]})]})]}),(s==null?void 0:s.location)&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"מיקום"}),e.jsx("p",{className:"font-medium",children:s.location})]})]})]})]}),h?e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"תיאור"}),e.jsx("textarea",{value:t.description,onChange:l=>c({...t,description:l.target.value}),className:"input",rows:4,placeholder:"תיאור הליד..."})]}):(s==null?void 0:s.description)&&e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"תיאור"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s.description})]}),o&&e.jsx(W,{entityType:"lead",entityId:o})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"סטטוס"}),e.jsx("select",{value:s==null?void 0:s.status,onChange:l=>x.mutate(l.target.value),className:"input",children:le.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"פרטים"}),h?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"מקור"}),e.jsxs("select",{value:t.source,onChange:l=>c({...t,source:l.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"בחר מקור"}),M.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"סוג שירות"}),e.jsxs("select",{value:t.service_type,onChange:l=>c({...t,service_type:l.target.value}),className:"input",children:[e.jsx("option",{value:"",children:"בחר סוג שירות"}),L.map(l=>e.jsx("option",{value:l.value,children:l.label},l.value))]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"תאריך יצירה"}),e.jsx("dd",{className:"font-medium",children:(s==null?void 0:s.created_at)&&new Date(s.created_at).toLocaleDateString("he-IL")})]})]}):e.jsxs("dl",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"מקור"}),e.jsx("dd",{className:"font-medium",children:((a=M.find(l=>l.value===(s==null?void 0:s.source)))==null?void 0:a.label)||(s==null?void 0:s.source)||"-"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"סוג שירות"}),e.jsx("dd",{className:"font-medium",children:((f=L.find(l=>l.value===(s==null?void 0:s.service_type)))==null?void 0:f.label)||(s==null?void 0:s.service_type)||"-"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-gray-500",children:"תאריך יצירה"}),e.jsx("dd",{className:"font-medium",children:(s==null?void 0:s.created_at)&&new Date(s.created_at).toLocaleDateString("he-IL")})]})]})]})]})]}),e.jsx(R,{isOpen:N,onClose:()=>C(!1),defaultTo:(s==null?void 0:s.email)||"",defaultName:(s==null?void 0:s.contact_name)||"",entityType:"lead",entityId:o})]})}export{ge as default};
