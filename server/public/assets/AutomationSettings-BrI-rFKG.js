import{x as y,c as O,r as k,e as C,d as q,j as e,af as E,N as L,z as v,ag as N,A as J,ah as Q,ai as X,aj as U,t as Y,o as $}from"./index-DNhSfFTF.js";import{S as u}from"./Skeleton-B57jvd7z.js";import{E as G}from"./eye-BSeQiPpe.js";import{F as W}from"./filter-DxBDU594.js";import{R as T}from"./refresh-cw-JBVqlPPd.js";import{T as A,R as Z,l as V,X as ee,Y as se,n as ae,M as te,K as D}from"./generateCategoricalChart-BEV_wULb.js";import{X as z}from"./x-circle-BHCg12U1.js";import{B as re}from"./BarChart-0Gpn_WDZ.js";import{C as ne}from"./check-circle-2-DsWuF0aa.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=y("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=y("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=y("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=y("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=y("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=y("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);function w(s){if(!s)return"-";try{return new Date(s).toLocaleDateString("he-IL",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return s}}function I(s){try{return new Date(s).toLocaleDateString("he-IL",{month:"2-digit",day:"2-digit"})}catch{return s}}function R(s,i){if(!i)return"רץ...";const l=new Date(i).getTime()-new Date(s).getTime();return l<1e3?`${l}ms`:l<6e4?`${Math.round(l/1e3)}s`:`${Math.round(l/6e4)}m`}function oe(s){const i=s.split(" ");if(i.length!==5)return s;const[l,t,d,,m]=i;if(l.startsWith("*/"))return`כל ${l.substring(2)} דקות`;const o=`${t.padStart(2,"0")}:${l.padStart(2,"0")}`,g={0:"ראשון",1:"שני",2:"שלישי",3:"רביעי",4:"חמישי",5:"שישי",6:"שבת"};return m!=="*"?`כל יום ${g[m]||m} ב-${o}`:d!=="*"?`ב-${d} לחודש ב-${o}`:`כל יום ב-${o}`}function S(s){switch(s){case"success":return{className:"badge-success",icon:ne,text:"הצלחה"};case"failed":case"failed_max_retries":return{className:"badge-danger",icon:z,text:"נכשל"};case"running":return{className:"badge-info",icon:T,text:"רץ"};case"skipped":return{className:"bg-gray-100 text-gray-600",icon:ce,text:"דולג"};default:return{className:"bg-gray-100 text-gray-500",icon:$,text:"טרם רץ"}}}const me={reminders:{label:"תזכורות",icon:X,color:"text-blue-600",bg:"from-blue-100 to-blue-50"},generation:{label:"יצירה אוטומטית",icon:Q,color:"text-green-600",bg:"from-green-100 to-green-50"},predictive:{label:"התראות חיזוי",icon:J,color:"text-amber-600",bg:"from-amber-100 to-amber-50"},monitoring:{label:"מעקב",icon:G,color:"text-purple-600",bg:"from-purple-100 to-purple-50"},intelligence:{label:"אינטליגנציה",icon:L,color:"text-indigo-600",bg:"from-indigo-100 to-indigo-50"}};function ke(){const s=O(),[i,l]=k.useState("jobs"),[t,d]=k.useState(null),{data:m,isLoading:o}=C({queryKey:["automation-jobs"],queryFn:async()=>{var c;return((c=(await N.getJobs()).data)==null?void 0:c.jobs)||[]},refetchInterval:3e4}),{data:g,isLoading:a}=C({queryKey:["automation-runs",i],queryFn:async()=>{var c;return((c=(await N.getRuns({limit:100})).data)==null?void 0:c.runs)||[]},enabled:i==="history",refetchInterval:3e4}),{data:n,isLoading:x}=C({queryKey:["automation-stats"],queryFn:async()=>(await N.getStats()).data,enabled:i==="stats",staleTime:6e4}),p=q({mutationFn:({name:r,enabled:c})=>N.toggleJob(r,c),onSuccess:(r,c)=>{v.success(c.enabled?"המשימה הופעלה":"המשימה הושבתה"),s.invalidateQueries({queryKey:["automation-jobs"]})},onError:()=>v.error("שגיאה בעדכון המשימה")}),f=q({mutationFn:r=>N.triggerJob(r),onSuccess:r=>{var c;v.success(((c=r.data)==null?void 0:c.message)||"המשימה הופעלה בהצלחה"),s.invalidateQueries({queryKey:["automation-jobs"]}),s.invalidateQueries({queryKey:["automation-runs"]}),s.invalidateQueries({queryKey:["automation-stats"]})},onError:r=>{var c,j;v.error(((j=(c=r.response)==null?void 0:c.data)==null?void 0:j.error)||"שגיאה בהפעלת המשימה")}}),b=(m||[]).reduce((r,c)=>{const j=c.category||"general";return r[j]||(r[j]=[]),r[j].push(c),r},{}),_=["reminders","generation","predictive","monitoring","intelligence"],[h,B]=k.useState({jobName:"",status:""}),H=(g||[]).filter(r=>!(h.jobName&&r.job_name!==h.jobName||h.status&&r.status!==h.status)),K=Array.from(new Set((g||[]).map(r=>r.job_name))),P=[{key:"jobs",label:"משימות",icon:le},{key:"history",label:"היסטוריית ריצות",icon:F},{key:"stats",label:"סטטיסטיקות",icon:L}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"page-header",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-100 to-primary-50 rounded-xl flex items-center justify-center",children:e.jsx(E,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:"לוח בקרה אוטומציה"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"ניהול, מעקב והפעלה של כל המשימות האוטומטיות במערכת"})]})]})}),e.jsx("div",{className:"flex gap-1 bg-gray-100 rounded-xl p-1",children:P.map(r=>e.jsxs("button",{onClick:()=>l(r.key),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg text-sm font-medium transition-all ${i===r.key?"bg-white text-primary-700 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(r.icon,{className:"w-4 h-4"}),r.label]},r.key))}),i==="jobs"&&e.jsx(xe,{groupedJobs:b,categoryOrder:_,isLoading:o,expandedCategory:t,setExpandedCategory:d,onToggle:(r,c)=>p.mutate({name:r,enabled:c}),onTrigger:r=>f.mutate(r),triggerPending:f.isPending,triggerJobName:f.variables}),i==="history"&&e.jsx(ge,{runs:H,isLoading:a,filter:h,setFilter:B,uniqueJobNames:K,allJobs:m||[],onRefresh:()=>s.invalidateQueries({queryKey:["automation-runs"]})}),i==="stats"&&e.jsx(ue,{stats:n,isLoading:x})]})}function xe({groupedJobs:s,categoryOrder:i,isLoading:l,expandedCategory:t,setExpandedCategory:d,onToggle:m,onTrigger:o,triggerPending:g,triggerJobName:a}){return l?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(n=>e.jsxs("div",{className:"card",children:[e.jsx(u,{className:"h-6 w-48 mb-4"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(u,{className:"h-32"}),e.jsx(u,{className:"h-32"})]})]},n))}):e.jsx("div",{className:"space-y-4",children:i.map(n=>{const x=s[n];if(!x||x.length===0)return null;const p=me[n]||{label:n,icon:E,color:"text-gray-600",bg:"from-gray-100 to-gray-50"},f=p.icon,b=t===null||t===n,_=x.filter(h=>h.is_enabled).length;return e.jsxs("div",{className:"card",children:[e.jsxs("button",{onClick:()=>d(t===n?null:n),className:"w-full flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-9 h-9 bg-gradient-to-br ${p.bg} rounded-lg flex items-center justify-center`,children:e.jsx(f,{className:`w-4 h-4 ${p.color}`})}),e.jsxs("div",{className:"text-right",children:[e.jsx("h3",{className:"font-semibold text-gray-900 font-heading",children:p.label}),e.jsxs("span",{className:"text-xs text-gray-500",children:[_,"/",x.length," פעילות"]})]})]}),b?e.jsx(ie,{className:"w-5 h-5 text-gray-400"}):e.jsx(U,{className:"w-5 h-5 text-gray-400"})]}),b&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x.map(h=>e.jsx(he,{job:h,onToggle:m,onTrigger:o,triggerPending:g&&a===h.job_name},h.job_name))})]},n)})})}function he({job:s,onToggle:i,onTrigger:l,triggerPending:t}){const d=S(s.last_run_status),m=d.icon,o=s.is_enabled===1;return e.jsxs("div",{className:`rounded-xl border p-4 transition-all ${o?"border-gray-200 bg-white hover:shadow-md":"border-gray-100 bg-gray-50 opacity-70"}`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm truncate",children:s.display_name}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-2",children:s.description})]}),e.jsx("button",{onClick:()=>i(s.job_name,!o),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors flex-shrink-0 ${o?"bg-primary-600":"bg-gray-300"}`,"aria-label":o?"השבת משימה":"הפעל משימה",children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${o?"translate-x-1":"translate-x-6"}`})})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 mb-2",children:[e.jsx($,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:oe(s.cron_schedule)})]}),e.jsx("div",{className:"flex items-center justify-between gap-2 mb-3",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${d.className}`,children:[e.jsx(m,{className:`w-3 h-3 ${s.last_run_status==="running"?"animate-spin":""}`}),d.text]}),s.retry_count>0&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-700",children:[e.jsx(J,{className:"w-3 h-3"}),s.retry_count,"/",s.max_retries]})]})}),e.jsxs("div",{className:"flex flex-col gap-1 text-xs text-gray-500 mb-3",children:[s.last_run_at&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),e.jsxs("span",{children:["ריצה אחרונה: ",w(s.last_run_at)]})]}),s.next_run_at&&o&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"}),e.jsxs("span",{children:["הבא: ",w(s.next_run_at)]})]})]}),s.last_run_status==="failed"&&s.last_run_details&&e.jsx("div",{className:"mb-3 p-2 bg-red-50 rounded-lg border border-red-100",children:e.jsx("p",{className:"text-xs text-red-700 line-clamp-2",children:s.last_run_details})}),e.jsxs("button",{onClick:()=>l(s.job_name),disabled:t,className:"w-full btn-ghost text-xs py-1.5 flex items-center justify-center gap-1.5",children:[t?e.jsx(T,{className:"w-3.5 h-3.5 animate-spin"}):e.jsx(de,{className:"w-3.5 h-3.5"}),t?"מריץ...":"הפעל עכשיו"]})]})}function ge({runs:s,isLoading:i,filter:l,setFilter:t,uniqueJobNames:d,allJobs:m,onRefresh:o}){const g=m.reduce((a,n)=>(a[n.job_name]=n.display_name,a),{});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4 text-gray-400"}),e.jsxs("select",{value:l.jobName,onChange:a=>t({...l,jobName:a.target.value}),className:"input text-sm py-1.5 min-w-[180px]",children:[e.jsx("option",{value:"",children:"כל המשימות"}),d.map(a=>e.jsx("option",{value:a,children:g[a]||a},a))]})]}),e.jsxs("select",{value:l.status,onChange:a=>t({...l,status:a.target.value}),className:"input text-sm py-1.5 min-w-[140px]",children:[e.jsx("option",{value:"",children:"כל הסטטוסים"}),e.jsx("option",{value:"success",children:"הצלחה"}),e.jsx("option",{value:"failed",children:"נכשל"}),e.jsx("option",{value:"running",children:"רץ"})]})]}),e.jsxs("button",{onClick:o,className:"btn-ghost text-sm flex items-center gap-1.5",children:[e.jsx(T,{className:"w-3.5 h-3.5"}),"רענן"]})]})}),e.jsx("div",{className:"card p-0",children:i?e.jsx("div",{className:"p-4 space-y-3",children:Array.from({length:8}).map((a,n)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx(u,{className:"h-5 w-32"}),e.jsx(u,{className:"h-5 w-24"}),e.jsx(u,{className:"h-5 w-16"}),e.jsx(u,{className:"h-5 w-20"}),e.jsx(u,{className:"h-5 flex-1"})]},n))}):s.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-400",children:[e.jsx(F,{className:"w-10 h-10 mx-auto mb-2 opacity-40"}),e.jsx("p",{className:"text-sm",children:"אין רשומות ריצה"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 text-gray-500 bg-gray-50/50",children:[e.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"משימה"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"התחלה"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"משך"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"סטטוס"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"עיבוד"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"נוצרו"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"דולגו"}),e.jsx("th",{className:"text-right py-3 px-4 font-medium",children:"שגיאה / פרטים"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(a=>{const n=S(a.status),x=n.icon;return e.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${a.status==="failed"?"bg-red-50/30":""}`,children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:a.display_name||g[a.job_name]||a.job_name}),e.jsx("td",{className:"py-3 px-4 text-gray-600 whitespace-nowrap",children:w(a.started_at)}),e.jsx("td",{className:"py-3 px-4 text-gray-600 whitespace-nowrap",children:R(a.started_at,a.completed_at)}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${n.className}`,children:[e.jsx(x,{className:`w-3 h-3 ${a.status==="running"?"animate-spin":""}`}),n.text]})}),e.jsx("td",{className:"py-3 px-4 text-gray-700 tabular-nums",children:a.items_processed}),e.jsx("td",{className:"py-3 px-4 text-gray-700 tabular-nums",children:a.items_created}),e.jsx("td",{className:"py-3 px-4 text-gray-700 tabular-nums",children:a.items_skipped}),e.jsx("td",{className:"py-3 px-4 max-w-[250px]",children:a.error_message?e.jsx("span",{className:"text-red-600 text-xs truncate block",children:a.error_message}):a.details?e.jsx("span",{className:"text-gray-500 text-xs truncate block",children:a.details}):e.jsx("span",{className:"text-gray-300",children:"-"})})]},a.id)})})]})}),e.jsx("div",{className:"md:hidden p-3 space-y-3",children:s.map(a=>{const n=S(a.status),x=n.icon;return e.jsxs("div",{className:`responsive-table-card rounded-xl border p-3 space-y-2 ${a.status==="failed"?"border-red-200 bg-red-50/30":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900 text-sm truncate",children:a.display_name||g[a.job_name]||a.job_name}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium flex-shrink-0 ${n.className}`,children:[e.jsx(x,{className:`w-3 h-3 ${a.status==="running"?"animate-spin":""}`}),n.text]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[e.jsx("span",{children:w(a.started_at)}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsx("span",{children:R(a.started_at,a.completed_at)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"עיבוד"}),e.jsx("span",{className:"text-gray-700 font-medium tabular-nums",children:a.items_processed})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"נוצרו"}),e.jsx("span",{className:"text-gray-700 font-medium tabular-nums",children:a.items_created})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block",children:"דולגו"}),e.jsx("span",{className:"text-gray-700 font-medium tabular-nums",children:a.items_skipped})]})]}),a.error_message&&e.jsx("p",{className:"text-xs text-red-600 bg-red-50 rounded-lg p-2 line-clamp-2",children:a.error_message}),!a.error_message&&a.details&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2",children:a.details})]},a.id)})})]})})]})}function ue({stats:s,isLoading:i}){if(i||!s)return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4].map(t=>e.jsx(u,{className:"h-24 rounded-xl"},t))}),e.jsx(u,{className:"h-64 rounded-xl"})]});const l=[{label:"ריצות היום",value:s.today.count||0,sub:`${s.today.success_count||0} הצלחות`,icon:M,color:"text-blue-600",bg:"from-blue-100 to-blue-50"},{label:"ריצות השבוע",value:s.week.count||0,sub:`${s.week.failed_count||0} נכשלו`,icon:Y,color:"text-green-600",bg:"from-green-100 to-green-50"},{label:"אחוז הצלחה",value:`${s.successRate}%`,sub:`מתוך ${s.month.count||0} ריצות`,icon:A,color:"text-emerald-600",bg:"from-emerald-100 to-emerald-50"},{label:"משימות פעילות",value:s.jobCounts.enabled||0,sub:`מתוך ${s.jobCounts.total||0} סה"כ`,icon:Q,color:"text-purple-600",bg:"from-purple-100 to-purple-50"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:l.map((t,d)=>{const m=t.icon;return e.jsxs("div",{className:"stat-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:t.label}),e.jsx("div",{className:`w-8 h-8 bg-gradient-to-br ${t.bg} rounded-lg flex items-center justify-center`,children:e.jsx(m,{className:`w-4 h-4 ${t.color}`})})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 font-heading",children:t.value}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.sub})]},d)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h4",{className:"section-header text-sm flex items-center gap-2 mb-3",children:[e.jsx(M,{className:"w-4 h-4 text-blue-500"}),"המשימה הכי פעילה (30 יום)"]}),s.mostActive?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.mostActive.display_name||s.mostActive.job_name}),e.jsxs("span",{className:"badge-info text-xs",children:[s.mostActive.run_count," ריצות"]})]}):e.jsx("p",{className:"text-gray-400 text-sm",children:"אין נתונים"})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h4",{className:"section-header text-sm flex items-center gap-2 mb-3",children:[e.jsx(z,{className:"w-4 h-4 text-red-500"}),"המשימה עם הכי הרבה כשלונות (30 יום)"]}),s.mostFailed?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.mostFailed.display_name||s.mostFailed.job_name}),e.jsxs("span",{className:"badge-danger text-xs",children:[s.mostFailed.fail_count," כשלונות"]})]}):e.jsx("p",{className:"text-gray-400 text-sm",children:"אין כשלונות - מצוין!"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h4",{className:"section-header text-sm flex items-center gap-2 mb-3",children:[e.jsx(L,{className:"w-4 h-4 text-gray-500"}),"סיכום חודשי"]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.month.total_processed||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"פריטים עובדו"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.month.total_created||0}),e.jsx("p",{className:"text-xs text-gray-500",children:"פריטים נוצרו"})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.month.count||0}),e.jsx("p",{className:"text-xs text-gray-500",children:'סה"כ ריצות'})]})]})]}),s.runsOverTime&&s.runsOverTime.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("h4",{className:"section-header text-sm flex items-center gap-2 mb-4",children:[e.jsx(A,{className:"w-4 h-4 text-gray-500"}),"ריצות ב-14 ימים אחרונים"]}),e.jsx("div",{className:"h-[200px] sm:h-[280px]",style:{width:"100%",direction:"ltr"},children:e.jsx(Z,{children:e.jsxs(re,{data:s.runsOverTime,children:[e.jsx(V,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(ee,{dataKey:"day",tickFormatter:I,tick:{fontSize:11}}),e.jsx(se,{tick:{fontSize:11}}),e.jsx(ae,{formatter:(t,d)=>[t,d==="success"?"הצלחה":d==="failed"?"נכשל":'סה"כ'],labelFormatter:t=>I(t)}),e.jsx(te,{formatter:t=>t==="success"?"הצלחה":t==="failed"?"נכשל":t}),e.jsx(D,{dataKey:"success",fill:"#22c55e",radius:[4,4,0,0]}),e.jsx(D,{dataKey:"failed",fill:"#ef4444",radius:[4,4,0,0]})]})})})]})]})}export{ke as default};
