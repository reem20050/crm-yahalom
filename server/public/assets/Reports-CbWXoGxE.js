import{k as F,R as m,a6 as We,r as je,e as q,j as n,E as nt,B as at,U as it,N as st,S as ot,a7 as oe,K as lt,f as ct}from"./index-DNhSfFTF.js";import{D as dt,P as ut,a as z}from"./pdfExport-BmWS57uU.js";import{f as N,_ as He,o as ft,p as ze,q as ht,g as W,r as Re,s as $,L as R,t as Ye,v as Te,w as Ge,D as mt,C as pt,b as te,j as X,S as xt,A as gt,x as yt,a as Le,d as vt,i as J,e as bt,u as jt,G as At,y as xe,z as Nt,B as Ze,E as _t,F as me,H as Ee,I as Pt,J as kt,T as Ot,R as Y,n as G,l as le,X as ce,Y as de,K as B,M as wt}from"./generateCategoricalChart-BEV_wULb.js";import{D as St}from"./dollar-sign-dd770Rbk.js";import{B as pe}from"./BarChart-0Gpn_WDZ.js";import{L as Rt,a as Tt}from"./LineChart-Bo_wVrvL.js";import{S as Lt}from"./star-Bi8HfDq8.js";var Et=["points","className","baseLinePoints","connectNulls"];function Q(){return Q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},Q.apply(this,arguments)}function Kt(t,e){if(t==null)return{};var a=$t(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function $t(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Ke(t){return Ft(t)||Bt(t)||Ct(t)||It()}function It(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ct(t,e){if(t){if(typeof t=="string")return ke(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ke(t,e)}}function Bt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ft(t){if(Array.isArray(t))return ke(t)}function ke(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var $e=function(e){return e&&e.x===+e.x&&e.y===+e.y},Dt=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return e.forEach(function(r){$e(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),$e(e[0])&&a[a.length-1].push(e[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},ue=function(e,a){var r=Dt(e);a&&(r=[r.reduce(function(o,s){return[].concat(Ke(o),Ke(s))},[])]);var i=r.map(function(o){return o.reduce(function(s,c,u){return"".concat(s).concat(u===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},Mt=function(e,a,r){var i=ue(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(ue(a.reverse(),r).slice(1))},qt=function(e){var a=e.points,r=e.className,i=e.baseLinePoints,o=e.connectNulls,s=Kt(e,Et);if(!a||!a.length)return null;var c=F("recharts-polygon",r);if(i&&i.length){var u=s.stroke&&s.stroke!=="none",d=Mt(a,i,o);return m.createElement("g",{className:c},m.createElement("path",Q({},N(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",stroke:"none",d})),u?m.createElement("path",Q({},N(s,!0),{fill:"none",d:ue(a,o)})):null,u?m.createElement("path",Q({},N(s,!0),{fill:"none",d:ue(i,o)})):null)}var h=ue(a,o);return m.createElement("path",Q({},N(s,!0),{fill:h.slice(-1)==="Z"?s.fill:"none",className:c,d:h}))},Vt=He,Ut=ft,Wt=ze;function Ht(t,e){return t&&t.length?Vt(t,Wt(e),Ut):void 0}var zt=Ht;const Yt=We(zt);var Gt=He,Zt=ze,Xt=ht;function Jt(t,e){return t&&t.length?Gt(t,Zt(e),Xt):void 0}var Qt=Jt;const er=We(Qt);var tr=["cx","cy","angle","ticks","axisLine"],rr=["ticks","tick","angle","tickFormatter","stroke"];function re(t){"@babel/helpers - typeof";return re=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(t)}function fe(){return fe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},fe.apply(this,arguments)}function Ie(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function V(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Ie(Object(a),!0).forEach(function(r){Ae(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ie(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Ce(t,e){if(t==null)return{};var a=nr(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function nr(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Be(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Je(r.key),r)}}function ir(t,e,a){return e&&Be(t.prototype,e),a&&Be(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function sr(t,e,a){return e=ye(e),or(t,Xe()?Reflect.construct(e,a||[],ye(t).constructor):e.apply(t,a))}function or(t,e){if(e&&(re(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lr(t)}function lr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Xe=function(){return!!t})()}function ye(t){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ye(t)}function cr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}function Oe(t,e){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Oe(t,e)}function Ae(t,e,a){return e=Je(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Je(t){var e=dr(t,"string");return re(e)=="symbol"?e:e+""}function dr(t,e){if(re(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(re(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ne=function(t){function e(){return ar(this,e),sr(this,e,arguments)}return cr(e,t),ir(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,o=this.props,s=o.angle,c=o.cx,u=o.cy;return $(c,u,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.angle,c=r.ticks,u=Yt(c,function(h){return h.coordinate||0}),d=er(c,function(h){return h.coordinate||0});return{cx:i,cy:o,startAngle:s,endAngle:s,innerRadius:d.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.angle,c=r.ticks,u=r.axisLine,d=Ce(r,tr),h=c.reduce(function(p,f){return[Math.min(p[0],f.coordinate),Math.max(p[1],f.coordinate)]},[1/0,-1/0]),x=$(i,o,h[0],s),g=$(i,o,h[1],s),j=V(V(V({},N(d,!1)),{},{fill:"none"},N(u,!1)),{},{x1:x.x,y1:x.y,x2:g.x,y2:g.y});return m.createElement("line",fe({className:"recharts-polar-radius-axis-line"},j))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,s=i.tick,c=i.angle,u=i.tickFormatter,d=i.stroke,h=Ce(i,rr),x=this.getTickTextAnchor(),g=N(h,!1),j=N(s,!1),p=o.map(function(f,y){var b=r.getTickValueCoord(f),A=V(V(V(V({textAnchor:x,transform:"rotate(".concat(90-c,", ").concat(b.x,", ").concat(b.y,")")},g),{},{stroke:"none",fill:d},j),{},{index:y},b),{},{payload:f});return m.createElement(R,fe({className:F("recharts-polar-radius-axis-tick",Ye(s)),key:"tick-".concat(f.coordinate)},Te(r.props,f,y)),e.renderTickItem(s,A,u?u(f.value,y):f.value))});return m.createElement(R,{className:"recharts-polar-radius-axis-ticks"},p)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.axisLine,s=r.tick;return!i||!i.length?null:m.createElement(R,{className:F("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),s&&this.renderTicks(),Ge.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,o){var s;return m.isValidElement(r)?s=m.cloneElement(r,i):W(r)?s=r(i):s=m.createElement(Re,fe({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),s}}])}(je.PureComponent);Ae(Ne,"displayName","PolarRadiusAxis");Ae(Ne,"axisType","radiusAxis");Ae(Ne,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ne(t){"@babel/helpers - typeof";return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(t)}function H(){return H=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},H.apply(this,arguments)}function Fe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function U(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Fe(Object(a),!0).forEach(function(r){_e(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Fe(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function De(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,et(r.key),r)}}function fr(t,e,a){return e&&De(t.prototype,e),a&&De(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function hr(t,e,a){return e=ve(e),mr(t,Qe()?Reflect.construct(e,a||[],ve(t).constructor):e.apply(t,a))}function mr(t,e){if(e&&(ne(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pr(t)}function pr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qe=function(){return!!t})()}function ve(t){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ve(t)}function xr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&we(t,e)}function we(t,e){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},we(t,e)}function _e(t,e,a){return e=et(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function et(t){var e=gr(t,"string");return ne(e)=="symbol"?e:e+""}function gr(t,e){if(ne(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ne(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yr=Math.PI/180,Me=1e-5,Pe=function(t){function e(){return ur(this,e),hr(this,e,arguments)}return xr(e,t),fr(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.cx,s=i.cy,c=i.radius,u=i.orientation,d=i.tickSize,h=d||8,x=$(o,s,c,r.coordinate),g=$(o,s,c+(u==="inner"?-1:1)*h,r.coordinate);return{x1:x.x,y1:x.y,x2:g.x,y2:g.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,o=Math.cos(-r.coordinate*yr),s;return o>Me?s=i==="outer"?"start":"end":o<-Me?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.radius,c=r.axisLine,u=r.axisLineType,d=U(U({},N(this.props,!1)),{},{fill:"none"},N(c,!1));if(u==="circle")return m.createElement(mt,H({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:o,r:s}));var h=this.props.ticks,x=h.map(function(g){return $(i,o,s,g.coordinate)});return m.createElement(qt,H({className:"recharts-polar-angle-axis-line"},d,{points:x}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,s=i.tick,c=i.tickLine,u=i.tickFormatter,d=i.stroke,h=N(this.props,!1),x=N(s,!1),g=U(U({},h),{},{fill:"none"},N(c,!1)),j=o.map(function(p,f){var y=r.getTickLineCoord(p),b=r.getTickTextAnchor(p),A=U(U(U({textAnchor:b},h),{},{stroke:"none",fill:d},x),{},{index:f,payload:p,x:y.x2,y:y.y2});return m.createElement(R,H({className:F("recharts-polar-angle-axis-tick",Ye(s)),key:"tick-".concat(p.coordinate)},Te(r.props,p,f)),c&&m.createElement("line",H({className:"recharts-polar-angle-axis-tick-line"},g,y)),s&&e.renderTickItem(s,A,u?u(p.value,f):p.value))});return m.createElement(R,{className:"recharts-polar-angle-axis-ticks"},j)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.radius,s=r.axisLine;return o<=0||!i||!i.length?null:m.createElement(R,{className:F("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,o){var s;return m.isValidElement(r)?s=m.cloneElement(r,i):W(r)?s=r(i):s=m.createElement(Re,H({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),s}}])}(je.PureComponent);_e(Pe,"displayName","PolarAngleAxis");_e(Pe,"axisType","angleAxis");_e(Pe,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var ge;function ae(t){"@babel/helpers - typeof";return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(t)}function ee(){return ee=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},ee.apply(this,arguments)}function qe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?qe(Object(a),!0).forEach(function(r){w(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):qe(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ve(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rt(r.key),r)}}function br(t,e,a){return e&&Ve(t.prototype,e),a&&Ve(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function jr(t,e,a){return e=be(e),Ar(t,tt()?Reflect.construct(e,a||[],be(t).constructor):e.apply(t,a))}function Ar(t,e){if(e&&(ae(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nr(t)}function Nr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tt=function(){return!!t})()}function be(t){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},be(t)}function _r(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Se(t,e)}function w(t,e,a){return e=rt(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function rt(t){var e=Pr(t,"string");return ae(e)=="symbol"?e:e+""}function Pr(t,e){if(ae(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ae(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var I=function(t){function e(a){var r;return vr(this,e),r=jr(this,e,[a]),w(r,"pieRef",null),w(r,"sectorRefs",[]),w(r,"id",jt("recharts-pie-")),w(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),W(i)&&i()}),w(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),W(i)&&i()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return _r(e,t),br(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.label,c=o.labelLine,u=o.dataKey,d=o.valueKey,h=N(this.props,!1),x=N(s,!1),g=N(c,!1),j=s&&s.offsetRadius||20,p=r.map(function(f,y){var b=(f.startAngle+f.endAngle)/2,A=$(f.cx,f.cy,f.outerRadius+j,b),P=v(v(v(v({},h),f),{},{stroke:"none"},x),{},{index:y,textAnchor:e.getTextAnchor(A.x,f.cx)},A),E=v(v(v(v({},h),f),{},{fill:"none",stroke:f.fill},g),{},{index:y,points:[$(f.cx,f.cy,f.outerRadius,b),A]}),k=u;return te(u)&&te(d)?k="value":te(u)&&(k=d),m.createElement(R,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(y)},c&&e.renderLabelLineItem(c,E,"line"),e.renderLabelItem(s,P,X(f,k)))});return m.createElement(R,{className:"recharts-pie-labels"},p)}},{key:"renderSectorsStatically",value:function(r){var i=this,o=this.props,s=o.activeShape,c=o.blendStroke,u=o.inactiveShape;return r.map(function(d,h){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&r.length!==1)return null;var x=i.isActiveIndex(h),g=u&&i.hasActiveIndex()?u:null,j=x?s:g,p=v(v({},d),{},{stroke:c?d.fill:d.stroke,tabIndex:-1});return m.createElement(R,ee({ref:function(y){y&&!i.sectorRefs.includes(y)&&i.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},Te(i.props,d,h),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(h)}),m.createElement(xt,ee({option:j,isActive:x,shapeType:"sector"},p)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,o=i.sectors,s=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,h=i.animationId,x=this.state,g=x.prevSectors,j=x.prevIsAnimationActive;return m.createElement(gt,{begin:c,duration:u,isActive:s,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(h,"-").concat(j),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(p){var f=p.t,y=[],b=o&&o[0],A=b.startAngle;return o.forEach(function(P,E){var k=g&&g[E],T=E>0?yt(P,"paddingAngle",0):0;if(k){var C=Le(k.endAngle-k.startAngle,P.endAngle-P.startAngle),_=v(v({},P),{},{startAngle:A+T,endAngle:A+C(f)+T});y.push(_),A=_.endAngle}else{var K=P.endAngle,O=P.startAngle,D=Le(0,K-O),M=D(f),S=v(v({},P),{},{startAngle:A+T,endAngle:A+M+T});y.push(S),A=S.endAngle}}),m.createElement(R,null,r.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var c=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,o=r.isAnimationActive,s=this.state.prevSectors;return o&&i&&i.length&&(!s||!vt(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,o=i.hide,s=i.sectors,c=i.className,u=i.label,d=i.cx,h=i.cy,x=i.innerRadius,g=i.outerRadius,j=i.isAnimationActive,p=this.state.isAnimationFinished;if(o||!s||!s.length||!J(d)||!J(h)||!J(x)||!J(g))return null;var f=F("recharts-pie",c);return m.createElement(R,{tabIndex:this.props.rootTabIndex,className:f,ref:function(b){r.pieRef=b}},this.renderSectors(),u&&this.renderLabels(s),Ge.renderCallByParent(this.props,null,!1),(!j||p)&&bt.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,o){if(m.isValidElement(r))return m.cloneElement(r,i);if(W(r))return r(i);var s=F("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return m.createElement(pt,ee({},i,{key:o,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,o){if(m.isValidElement(r))return m.cloneElement(r,i);var s=o;if(W(r)&&(s=r(i),m.isValidElement(s)))return s;var c=F("recharts-pie-label-text",typeof r!="boolean"&&!W(r)?r.className:"");return m.createElement(Re,ee({},i,{alignmentBaseline:"middle",className:c}),s)}}])}(je.PureComponent);ge=I;w(I,"displayName","Pie");w(I,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!At.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});w(I,"parseDeltaAngle",function(t,e){var a=xe(e-t),r=Math.min(Math.abs(e-t),360);return a*r});w(I,"getRealPieData",function(t){var e=t.data,a=t.children,r=N(t,!1),i=Nt(a,Ze);return e&&e.length?e.map(function(o,s){return v(v(v({payload:o},r),o),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(o){return v(v({},r),o.props)}):[]});w(I,"parseCoordinateOfPie",function(t,e){var a=e.top,r=e.left,i=e.width,o=e.height,s=_t(i,o),c=r+me(t.cx,i,i/2),u=a+me(t.cy,o,o/2),d=me(t.innerRadius,s,0),h=me(t.outerRadius,s,s*.8),x=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:h,maxRadius:x}});w(I,"getComposedData",function(t){var e=t.item,a=t.offset,r=e.type.defaultProps!==void 0?v(v({},e.type.defaultProps),e.props):e.props,i=ge.getRealPieData(r);if(!i||!i.length)return null;var o=r.cornerRadius,s=r.startAngle,c=r.endAngle,u=r.paddingAngle,d=r.dataKey,h=r.nameKey,x=r.valueKey,g=r.tooltipType,j=Math.abs(r.minAngle),p=ge.parseCoordinateOfPie(r,a),f=ge.parseDeltaAngle(s,c),y=Math.abs(f),b=d;te(d)&&te(x)?(Ee(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):te(d)&&(Ee(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=x);var A=i.filter(function(_){return X(_,b,0)!==0}).length,P=(y>=360?A:A-1)*u,E=y-A*j-P,k=i.reduce(function(_,K){var O=X(K,b,0);return _+(J(O)?O:0)},0),T;if(k>0){var C;T=i.map(function(_,K){var O=X(_,b,0),D=X(_,h,K),M=(J(O)?O:0)/k,S;K?S=C.endAngle+xe(f)*u*(O!==0?1:0):S=s;var ie=S+xe(f)*((O!==0?j:0)+M*E),l=(S+ie)/2,L=(p.innerRadius+p.outerRadius)/2,se=[{name:D,value:O,payload:_,dataKey:b,type:g}],he=$(p.cx,p.cy,L,l);return C=v(v(v({percent:M,cornerRadius:o,name:D,tooltipPayload:se,midAngle:l,middleRadius:L,tooltipPosition:he},_),p),{},{value:X(_,b),startAngle:S,endAngle:ie,payload:_,paddingAngle:xe(f)*u}),C})}return v(v({},p),{},{sectors:T,data:i})});var kr=Pt({chartName:"PieChart",GraphicalChild:I,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Pe},{axisType:"radiusAxis",AxisComp:Ne}],formatAxisMap:kt,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Ue=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6"];function Z(t,e,a){if(!t||t.length===0)return;const r=Object.keys(e),o=[Object.values(e).join(",")];for(const h of t){const x=r.map(g=>{const j=h[g]??"";return`"${String(j).replace(/"/g,'""')}"`});o.push(x.join(","))}const s="\uFEFF"+o.join(`
`),c=new Blob([s],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=a,d.click(),URL.revokeObjectURL(u)}function Kr(){var g,j,p,f,y,b,A,P,E,k,T,C,_,K,O,D,M,S,ie;const[t,e]=je.useState("sales"),{data:a}=q({queryKey:["reports","sales"],queryFn:()=>oe.sales().then(l=>l.data),enabled:t==="sales"}),{data:r}=q({queryKey:["reports","customers"],queryFn:()=>oe.customers().then(l=>l.data),enabled:t==="customers"}),{data:i}=q({queryKey:["reports","employees"],queryFn:()=>oe.employees().then(l=>l.data),enabled:t==="employees"}),{data:o}=q({queryKey:["reports","financial"],queryFn:()=>oe.financial().then(l=>l.data),enabled:t==="financial"}),{data:s}=q({queryKey:["reports","profit-loss"],queryFn:()=>oe.profitLoss().then(l=>l.data),enabled:t==="profitloss"}),{data:c}=q({queryKey:["reports","performance-rankings"],queryFn:()=>lt.getRankings().then(l=>l.data),enabled:t==="performance"}),{data:u}=q({queryKey:["reports","incident-stats"],queryFn:()=>ct.getStats().then(l=>l.data),enabled:t==="performance"}),d=[{id:"sales",label:"מכירות",icon:Ot},{id:"customers",label:"לקוחות",icon:at},{id:"employees",label:"עובדים",icon:it},{id:"financial",label:"כספים",icon:St},{id:"profitloss",label:"רווח והפסד",icon:st},{id:"performance",label:"ביצועי מאבטחים",icon:ot}],h=()=>{switch(t){case"sales":a!=null&&a.leadsBySource&&Z(a.leadsBySource,{source:"מקור",count:"כמות"},"sales-by-source.csv");break;case"customers":r!=null&&r.revenueByCustomer&&Z(r.revenueByCustomer,{company_name:"חברה",total_revenue:"הכנסות"},"customers-revenue.csv");break;case"employees":i!=null&&i.hoursBreakdown&&Z(i.hoursBreakdown,{name:"עובד",total_hours:"שעות",days_worked:"ימי עבודה",saturday_hours:"שעות שבת"},"employees-hours.csv");break;case"financial":o!=null&&o.revenueByCustomer&&Z(o.revenueByCustomer,{company_name:"לקוח",paid:"שולם",pending:"ממתין"},"financial-revenue.csv");break;case"profitloss":s!=null&&s.customerProfitability&&Z(s.customerProfitability,{company_name:"לקוח",revenue:"הכנסות",labor_cost:"עלות עבודה",profit:"רווח",margin:"מרווח %",hours:"שעות"},"profit-loss-by-customer.csv");break;case"performance":c!=null&&c.rankings&&Z(c.rankings,{first_name:"שם פרטי",last_name:"שם משפחה",avg_rating:"דירוג ממוצע",total_ratings:"דירוגים",shifts_completed:"משמרות הושלמו",shifts_total:'סה"כ משמרות'},"guard-performance.csv");break}},x=()=>{const l=new Date().toLocaleDateString("he-IL");switch(t){case"sales":a!=null&&a.leadsBySource&&z({title:"Yahalom CRM - Sales Report",subtitle:l,columns:[{header:"Source",dataKey:"source"},{header:"Count",dataKey:"count"}],data:a.leadsBySource,filename:"sales-report.pdf"});break;case"customers":r!=null&&r.revenueByCustomer&&z({title:"Yahalom CRM - Customers Revenue",subtitle:l,columns:[{header:"Company",dataKey:"company_name"},{header:"Revenue",dataKey:"total_revenue"}],data:r.revenueByCustomer,filename:"customers-revenue.pdf"});break;case"employees":i!=null&&i.hoursBreakdown&&z({title:"Yahalom CRM - Employee Hours",subtitle:l,columns:[{header:"Employee",dataKey:"name"},{header:"Total Hours",dataKey:"total_hours"},{header:"Days Worked",dataKey:"days_worked"},{header:"Saturday Hours",dataKey:"saturday_hours"}],data:i.hoursBreakdown,filename:"employees-hours.pdf",orientation:"landscape"});break;case"financial":o!=null&&o.revenueByCustomer&&z({title:"Yahalom CRM - Financial Report",subtitle:l,columns:[{header:"Customer",dataKey:"company_name"},{header:"Paid",dataKey:"paid"},{header:"Pending",dataKey:"pending"}],data:o.revenueByCustomer,filename:"financial-report.pdf"});break;case"profitloss":s!=null&&s.customerProfitability&&z({title:"Yahalom CRM - Profit & Loss",subtitle:l,columns:[{header:"Customer",dataKey:"company_name"},{header:"Revenue",dataKey:"revenue"},{header:"Labor Cost",dataKey:"labor_cost"},{header:"Profit",dataKey:"profit"},{header:"Margin %",dataKey:"margin"},{header:"Hours",dataKey:"hours"}],data:s.customerProfitability,filename:"profit-loss.pdf",orientation:"landscape"});break;case"performance":c!=null&&c.rankings&&z({title:"Yahalom CRM - Guard Performance",subtitle:l,columns:[{header:"First Name",dataKey:"first_name"},{header:"Last Name",dataKey:"last_name"},{header:"Avg Rating",dataKey:"avg_rating"},{header:"Total Ratings",dataKey:"total_ratings"},{header:"Shifts Done",dataKey:"shifts_completed"},{header:"Total Shifts",dataKey:"shifts_total"}],data:c.rankings,filename:"guard-performance.pdf",orientation:"landscape"});break}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"page-header",children:[n.jsx("h1",{className:"page-title",children:"דוחות"}),n.jsx("p",{className:"page-subtitle",children:"ניתוח נתונים וביצועים"})]}),n.jsxs("div",{className:"flex items-center gap-2 no-print",children:[n.jsxs("button",{onClick:h,className:"btn-secondary flex items-center gap-2",children:[n.jsx(dt,{className:"w-5 h-5"}),"ייצוא לאקסל"]}),n.jsxs("button",{onClick:x,className:"btn-secondary flex items-center gap-2",children:[n.jsx(nt,{className:"w-5 h-5"}),"ייצוא PDF"]}),n.jsxs("button",{onClick:()=>window.print(),className:"btn-secondary flex items-center gap-2",children:[n.jsx(ut,{className:"w-5 h-5"}),"הדפס"]})]})]}),n.jsx("div",{className:"border-b",children:n.jsx("nav",{className:"flex gap-4",children:d.map(l=>n.jsxs("button",{onClick:()=>e(l.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${t===l.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(l.icon,{className:"w-5 h-5"}),l.label]},l.id))})}),t==="sales"&&a&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"המרת לידים"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4 mb-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-gray-900 font-heading",children:((g=a.conversionRate)==null?void 0:g.total_leads)||0}),n.jsx("p",{className:"text-sm text-gray-500",children:"לידים"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-green-600 font-heading",children:((j=a.conversionRate)==null?void 0:j.won)||0}),n.jsx("p",{className:"text-sm text-gray-500",children:"נסגרו"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-3xl font-bold text-primary-600 font-heading",children:[((p=a.conversionRate)==null?void 0:p.conversion_rate)||0,"%"]}),n.jsx("p",{className:"text-sm text-gray-500",children:"אחוז המרה"})]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"לידים לפי מקור"}),n.jsx("div",{className:"h-64",children:n.jsx(Y,{width:"100%",height:"100%",children:n.jsxs(kr,{children:[n.jsx(I,{data:a.leadsBySource||[],dataKey:"count",nameKey:"source",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:(a.leadsBySource||[]).map((l,L)=>n.jsx(Ze,{fill:Ue[L%Ue.length]},L))}),n.jsx(G,{})]})})})]}),n.jsxs("div",{className:"card lg:col-span-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"לידים חודשיים"}),n.jsx("div",{className:"h-64",children:n.jsx(Y,{width:"100%",height:"100%",children:n.jsxs(pe,{data:a.monthlyLeads||[],children:[n.jsx(le,{strokeDasharray:"3 3"}),n.jsx(ce,{dataKey:"month"}),n.jsx(de,{}),n.jsx(G,{}),n.jsx(B,{dataKey:"total",fill:"#0ea5e9",name:"סה״כ"}),n.jsx(B,{dataKey:"won",fill:"#22c55e",name:"נסגרו"})]})})})]})]}),t==="customers"&&r&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"הכנסות לפי לקוח (Top 10)"}),n.jsx("div",{className:"h-64",children:n.jsx(Y,{width:"100%",height:"100%",children:n.jsxs(pe,{data:r.revenueByCustomer||[],layout:"vertical",children:[n.jsx(le,{strokeDasharray:"3 3"}),n.jsx(ce,{type:"number"}),n.jsx(de,{dataKey:"company_name",type:"category",width:100}),n.jsx(G,{formatter:l=>`₪${l.toLocaleString()}`}),n.jsx(B,{dataKey:"total_revenue",fill:"#0ea5e9"})]})})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"לקוחות בסיכון (90 יום ללא פעילות)"}),((f=r.churnRisk)==null?void 0:f.length)>0?n.jsx("div",{className:"space-y-2",children:r.churnRisk.map(l=>n.jsx("div",{className:"p-3 bg-red-50 rounded-lg",children:n.jsx("p",{className:"font-medium text-red-800",children:l.company_name})},l.id))}):n.jsx("p",{className:"text-green-600 text-center py-8",children:"אין לקוחות בסיכון"})]})]}),t==="employees"&&i&&n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.jsxs("div",{className:"card lg:col-span-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"שעות עבודה חודשיות"}),n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"עובד"}),n.jsx("th",{children:"שעות"}),n.jsx("th",{children:"ימי עבודה"}),n.jsx("th",{children:"שעות שבת"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:(i.hoursBreakdown||[]).slice(0,10).map(l=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:l.name}),n.jsx("td",{children:l.total_hours||0}),n.jsx("td",{children:l.days_worked||0}),n.jsx("td",{children:l.saturday_hours||0})]},l.id))})]})})]})}),t==="financial"&&o&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"card lg:col-span-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"הכנסות חודשיות"}),n.jsx("div",{className:"h-64",children:n.jsx(Y,{width:"100%",height:"100%",children:n.jsxs(pe,{data:o.monthlyRevenue||[],children:[n.jsx(le,{strokeDasharray:"3 3"}),n.jsx(ce,{dataKey:"month"}),n.jsx(de,{}),n.jsx(G,{formatter:l=>`₪${l==null?void 0:l.toLocaleString()}`}),n.jsx(B,{dataKey:"collected",fill:"#22c55e",name:"נגבה"}),n.jsx(B,{dataKey:"invoiced",fill:"#0ea5e9",name:"הופק"})]})})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"תשלומים פתוחים"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[n.jsx("span",{children:"ממתין לתשלום"}),n.jsxs("span",{className:"font-bold",children:["₪",(((y=o.outstandingPayments)==null?void 0:y.pending)||0).toLocaleString()]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[n.jsx("span",{children:"באיחור"}),n.jsxs("span",{className:"font-bold text-red-600",children:["₪",(((b=o.outstandingPayments)==null?void 0:b.overdue)||0).toLocaleString()]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-100 rounded-lg",children:[n.jsx("span",{children:"באיחור 60+ יום"}),n.jsxs("span",{className:"font-bold text-red-700",children:["₪",(((A=o.outstandingPayments)==null?void 0:A.overdue_60)||0).toLocaleString()]})]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"הכנסות לפי לקוח"}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(o.revenueByCustomer||[]).map(l=>n.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[n.jsx("span",{className:"truncate",children:l.company_name}),n.jsxs("span",{className:"font-medium text-green-600",children:["₪",(l.paid||0).toLocaleString()]})]},l.company_name))})]})]}),t==="profitloss"&&s&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"card text-center",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"הכנסות (שנתי)"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600 font-heading",children:["₪",(((P=s.totals)==null?void 0:P.revenue)||0).toLocaleString()]})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"עלות עבודה"}),n.jsxs("p",{className:"text-2xl font-bold text-red-600 font-heading",children:["₪",(((E=s.totals)==null?void 0:E.labor_cost)||0).toLocaleString()]})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"רווח נקי"}),n.jsxs("p",{className:`text-2xl font-bold font-heading ${(((k=s.totals)==null?void 0:k.profit)||0)>=0?"text-green-600":"text-red-600"}`,children:["₪",(((T=s.totals)==null?void 0:T.profit)||0).toLocaleString()]})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"מרווח רווח"}),n.jsxs("p",{className:`text-2xl font-bold font-heading ${(((C=s.totals)==null?void 0:C.margin)||0)>=0?"text-blue-600":"text-red-600"}`,children:[((_=s.totals)==null?void 0:_.margin)||0,"%"]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"רווח והפסד חודשי"}),n.jsx("div",{className:"h-72",children:n.jsx(Y,{width:"100%",height:"100%",children:n.jsxs(pe,{data:s.monthly||[],children:[n.jsx(le,{strokeDasharray:"3 3"}),n.jsx(ce,{dataKey:"month"}),n.jsx(de,{}),n.jsx(G,{formatter:l=>`₪${l==null?void 0:l.toLocaleString()}`}),n.jsx(wt,{}),n.jsx(B,{dataKey:"revenue",fill:"#22c55e",name:"הכנסות"}),n.jsx(B,{dataKey:"labor_cost",fill:"#ef4444",name:"עלות עבודה"}),n.jsx(B,{dataKey:"profit",fill:"#3b82f6",name:"רווח"})]})})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"מגמת מרווח רווח"}),n.jsx("div",{className:"h-56",children:n.jsx(Y,{width:"100%",height:"100%",children:n.jsxs(Rt,{data:s.monthly||[],children:[n.jsx(le,{strokeDasharray:"3 3"}),n.jsx(ce,{dataKey:"month"}),n.jsx(de,{unit:"%"}),n.jsx(G,{formatter:l=>`${l}%`}),n.jsx(Tt,{type:"monotone",dataKey:"margin",stroke:"#8b5cf6",strokeWidth:2,name:"מרווח %"})]})})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"פירוט חודשי"}),n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"חודש"}),n.jsx("th",{children:"הכנסות"}),n.jsx("th",{children:"עלות עבודה"}),n.jsx("th",{children:"רווח"}),n.jsx("th",{children:"מרווח"}),n.jsx("th",{children:"שעות"}),n.jsx("th",{children:"עובדים"})]})}),n.jsxs("tbody",{className:"divide-y divide-gray-200",children:[(s.monthly||[]).map(l=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:l.month}),n.jsxs("td",{className:"text-green-600",children:["₪",(l.revenue||0).toLocaleString()]}),n.jsxs("td",{className:"text-red-600",children:["₪",(l.labor_cost||0).toLocaleString()]}),n.jsxs("td",{className:l.profit>=0?"text-green-700 font-bold":"text-red-700 font-bold",children:["₪",(l.profit||0).toLocaleString()]}),n.jsx("td",{children:n.jsxs("span",{className:`badge ${l.margin>=30?"badge-success":l.margin>=10?"badge-warning":"badge-danger"}`,children:[l.margin,"%"]})}),n.jsx("td",{children:(l.total_hours||0).toLocaleString()}),n.jsx("td",{children:l.unique_employees||0})]},l.month)),((K=s.monthly)==null?void 0:K.length)>0&&n.jsxs("tr",{className:"bg-gray-50 font-bold",children:[n.jsx("td",{children:'סה"כ'}),n.jsxs("td",{className:"text-green-600",children:["₪",(((O=s.totals)==null?void 0:O.revenue)||0).toLocaleString()]}),n.jsxs("td",{className:"text-red-600",children:["₪",(((D=s.totals)==null?void 0:D.labor_cost)||0).toLocaleString()]}),n.jsxs("td",{className:((M=s.totals)==null?void 0:M.profit)>=0?"text-green-700":"text-red-700",children:["₪",(((S=s.totals)==null?void 0:S.profit)||0).toLocaleString()]}),n.jsxs("td",{children:[((ie=s.totals)==null?void 0:ie.margin)||0,"%"]}),n.jsx("td",{}),n.jsx("td",{})]})]})]})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"רווחיות לפי לקוח"}),n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"לקוח"}),n.jsx("th",{children:"הכנסות"}),n.jsx("th",{children:"עלות עבודה"}),n.jsx("th",{children:"רווח"}),n.jsx("th",{children:"מרווח"}),n.jsx("th",{children:"שעות"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:(s.customerProfitability||[]).map(l=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:l.company_name}),n.jsxs("td",{className:"text-green-600",children:["₪",(l.revenue||0).toLocaleString()]}),n.jsxs("td",{className:"text-red-600",children:["₪",(l.labor_cost||0).toLocaleString()]}),n.jsxs("td",{className:l.profit>=0?"text-green-700 font-bold":"text-red-700 font-bold",children:["₪",(l.profit||0).toLocaleString()]}),n.jsx("td",{children:n.jsxs("span",{className:`badge ${l.margin>=30?"badge-success":l.margin>=10?"badge-warning":"badge-danger"}`,children:[l.margin,"%"]})}),n.jsx("td",{children:(l.hours||0).toLocaleString()})]},l.company_name))})]})}),(!s.customerProfitability||s.customerProfitability.length===0)&&n.jsx("p",{className:"text-gray-400 text-center py-8",children:"אין נתוני רווחיות"})]})]}),t==="performance"&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u&&n.jsxs("div",{className:"card lg:col-span-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"סטטיסטיקות אירועי אבטחה"}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 sm:gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600 font-heading",children:u.open||0}),n.jsx("p",{className:"text-sm text-gray-500",children:"פתוחים"})]}),n.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-yellow-600 font-heading",children:u.investigating||0}),n.jsx("p",{className:"text-sm text-gray-500",children:"בחקירה"})]}),n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600 font-heading",children:u.resolved||0}),n.jsx("p",{className:"text-sm text-gray-500",children:"נפתרו"})]}),n.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600 font-heading",children:u.total||0}),n.jsx("p",{className:"text-sm text-gray-500",children:'סה"כ'})]})]})]}),n.jsxs("div",{className:"card lg:col-span-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4 font-heading",children:"דירוג מאבטחים"}),n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"דירוג"}),n.jsx("th",{children:"מאבטח"}),n.jsx("th",{children:"ציון ממוצע"}),n.jsx("th",{children:"דירוגים"}),n.jsx("th",{children:"משמרות הושלמו"}),n.jsx("th",{children:"אחוז נוכחות"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:((c==null?void 0:c.rankings)||[]).map((l,L)=>{const se=l.shifts_total>0?Math.round(l.shifts_completed/l.shifts_total*100):0;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:`inline-flex items-center justify-center w-7 h-7 rounded-full text-sm font-bold ${L===0?"bg-yellow-100 text-yellow-700":L===1?"bg-gray-100 text-gray-700":L===2?"bg-orange-100 text-orange-700":"bg-white text-gray-500"}`,children:L+1})}),n.jsxs("td",{className:"font-medium",children:[l.first_name," ",l.last_name]}),n.jsx("td",{children:n.jsx("div",{className:"flex items-center gap-1",children:l.avg_rating?n.jsxs(n.Fragment,{children:[[1,2,3,4,5].map(he=>n.jsx(Lt,{className:`w-3.5 h-3.5 ${he<=Math.round(l.avg_rating)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},he)),n.jsx("span",{className:"text-sm mr-1",children:l.avg_rating})]}):n.jsx("span",{className:"text-gray-400 text-sm",children:"אין דירוג"})})}),n.jsx("td",{children:l.total_ratings||0}),n.jsxs("td",{children:[l.shifts_completed,"/",l.shifts_total]}),n.jsx("td",{children:n.jsxs("span",{className:`font-medium ${se>=90?"text-green-600":se>=70?"text-yellow-600":"text-red-600"}`,children:[se,"%"]})})]},l.id)})})]})}),(!(c!=null&&c.rankings)||c.rankings.length===0)&&n.jsx("p",{className:"text-gray-400 text-center py-8",children:"אין נתוני ביצועים"})]})]})]})}export{Kr as default};
