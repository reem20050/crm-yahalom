import{r as E,c as q,d as f,j as e,P as g,C as N,A as v,F as k,L as j,U as P,B as A,e as R,f as w}from"./index-BITl8q-_.js";import{S as b}from"./shield-C1dmT5K6.js";import{T as $,R as F,L as T,C as D,X as K,Y as I,a as M,b as U}from"./LineChart-bbQXAsZv.js";import{P as _}from"./package-CKTYyOnA.js";import{C as p}from"./check-circle-IAOWmW9l.js";import{M as C}from"./map-pin-Diam8K2P.js";import{A as L}from"./alert-circle-Dg8nJNjH.js";import{P as V}from"./phone-BcPLbSQv.js";import{A as S}from"./arrow-left-right-B2MhTsjI.js";function se(){const[s,m]=E.useState("operations"),{isEmployee:a}=q(),{data:i,isLoading:c}=f({queryKey:["dashboard-employee"],queryFn:()=>w.get().then(t=>t.data),enabled:a,refetchInterval:6e4}),{data:l,isLoading:n}=f({queryKey:["dashboard"],queryFn:()=>w.get().then(t=>t.data),enabled:!a&&s==="business"}),{data:x,isLoading:o}=f({queryKey:["dashboard-operations"],queryFn:()=>w.getOperations().then(t=>t.data),enabled:!a&&s==="operations",refetchInterval:6e4});return(a?c:s==="business"?n:o)?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary-600 border-t-transparent"})}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"דשבורד"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"ברוך הבא למערכת צוות יהלום"})]}),e.jsx(W,{data:i})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"דשבורד"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:"ברוך הבא למערכת צוות יהלום"})]}),e.jsxs("div",{className:"flex bg-gray-100/80 rounded-xl p-1 gap-0.5",children:[e.jsxs("button",{onClick:()=>m("operations"),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${s==="operations"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(b,{className:"w-4 h-4"}),"תפעולי"]}),e.jsxs("button",{onClick:()=>m("business"),className:`flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${s==="business"?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx($,{className:"w-4 h-4"}),"עסקי"]})]})]}),s==="operations"?e.jsx(z,{data:x}):e.jsx(B,{data:l})]})}function W({data:s}){const m=(s==null?void 0:s.myShiftsToday)||[],a=(s==null?void 0:s.myUpcomingEvents)||[],i=(s==null?void 0:s.myRecentShifts)||[],c=(s==null?void 0:s.myEquipment)||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value",children:m.length}),e.jsx("p",{className:"stat-card-label",children:"משמרות היום"})]}),e.jsx("div",{className:"w-11 h-11 rounded-xl bg-sky-50 flex items-center justify-center",children:e.jsx(b,{className:"w-5 h-5 text-sky-600"})})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value",children:a.length}),e.jsx("p",{className:"stat-card-label",children:"אירועים ב-7 ימים"})]}),e.jsx("div",{className:"w-11 h-11 rounded-xl bg-amber-50 flex items-center justify-center",children:e.jsx(g,{className:"w-5 h-5 text-amber-600"})})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value",children:c.length}),e.jsx("p",{className:"stat-card-label",children:"פריטי ציוד"})]}),e.jsx("div",{className:"w-11 h-11 rounded-xl bg-violet-50 flex items-center justify-center",children:e.jsx(_,{className:"w-5 h-5 text-violet-600"})})]})}),e.jsx("div",{className:"stat-card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value",children:i.length}),e.jsx("p",{className:"stat-card-label",children:"משמרות אחרונות"})]}),e.jsx("div",{className:"w-11 h-11 rounded-xl bg-emerald-50 flex items-center justify-center",children:e.jsx(N,{className:"w-5 h-5 text-emerald-600"})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-sky-50 flex items-center justify-center",children:e.jsx(b,{className:"w-4 h-4 text-sky-600"})}),"המשמרות שלי היום"]}),m.length>0?e.jsx("div",{className:"space-y-2.5",children:m.map(l=>e.jsx("div",{className:"p-3.5 rounded-xl bg-gray-50/80 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:l.site_name||l.company_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[l.start_time," - ",l.end_time]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l.check_in_time?e.jsxs("span",{className:"badge badge-success flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),"צ'ק-אין ",l.check_in_time]}):e.jsx("span",{className:"badge badge-warning",children:"ממתין לצ'ק-אין"}),l.check_out_time&&e.jsxs("span",{className:"badge badge-gray",children:["צ'ק-אאוט ",l.check_out_time]})]})]})},l.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx(b,{className:"w-8 h-8 text-gray-200 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-400",children:"אין משמרות היום"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-50 flex items-center justify-center",children:e.jsx(g,{className:"w-4 h-4 text-amber-600"})}),"אירועים קרובים שלי"]}),a.length>0?e.jsx("div",{className:"space-y-2.5",children:a.map(l=>e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/80 border border-gray-100",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:l.event_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[l.event_date," | ",l.start_time," | ",l.location||l.company_name]}),l.role&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1.5 font-medium",children:["תפקיד: ",l.role]})]},l.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx(g,{className:"w-8 h-8 text-gray-200 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-400",children:"אין אירועים קרובים"})]})]}),c.length>0&&e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-violet-50 flex items-center justify-center",children:e.jsx(_,{className:"w-4 h-4 text-violet-600"})}),"הציוד שלי"]}),e.jsx("div",{className:"space-y-1.5",children:c.map((l,n)=>e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-gray-50/60 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx(_,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"font-medium text-sm text-gray-900",children:l.item_name}),e.jsx("span",{className:"text-xs text-gray-500",children:l.item_type})]}),l.serial_number&&e.jsx("span",{className:"text-xs text-gray-400 font-mono",dir:"ltr",children:l.serial_number})]},n))})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-50 flex items-center justify-center",children:e.jsx(N,{className:"w-4 h-4 text-emerald-600"})}),"היסטוריית משמרות אחרונות"]}),i.length>0?e.jsx("div",{className:"space-y-1.5",children:i.map((l,n)=>e.jsxs("div",{className:"flex items-center justify-between p-2.5 bg-gray-50/60 rounded-lg text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:l.site_name||l.company_name}),e.jsx("span",{className:"text-gray-300 mx-2",children:"·"}),e.jsx("span",{className:"text-gray-500",children:l.date})]}),e.jsxs("span",{className:"text-gray-500 font-mono text-xs",children:[l.start_time," - ",l.end_time]})]},n))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx(N,{className:"w-8 h-8 text-gray-200 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-400",children:"אין היסטוריה"})]})]})]})]})}function z({data:s}){var a,i,c,l,n,x,o,h,t,d;const m=[{name:"מאבטחים בשטח",value:`${(s==null?void 0:s.guards_on_duty)||0}/${(s==null?void 0:s.guards_expected_today)||0}`,icon:b,iconColor:"text-sky-600",bgColor:"bg-sky-50"},{name:"אתרים מכוסים",value:(s==null?void 0:s.sites_with_coverage)||0,icon:C,iconColor:"text-emerald-600",bgColor:"bg-emerald-50"},{name:"אירועי אבטחה פתוחים",value:((a=s==null?void 0:s.open_incidents)==null?void 0:a.count)||0,icon:v,iconColor:((i=s==null?void 0:s.open_incidents)==null?void 0:i.critical)>0?"text-red-600":"text-red-500",bgColor:((c=s==null?void 0:s.open_incidents)==null?void 0:c.critical)>0?"bg-red-100":"bg-red-50",href:"/incidents"},{name:"רישיונות שפגים",value:((l=s==null?void 0:s.expiring_licenses)==null?void 0:l.length)||0,icon:k,iconColor:"text-amber-600",bgColor:"bg-amber-50"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:m.map(r=>{const y=r.href?j:"div",u=r.href?{to:r.href}:{};return e.jsx(y,{...u,className:"stat-card hover:shadow-elevated transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value",children:r.value}),e.jsx("p",{className:"stat-card-label",children:r.name})]}),e.jsx("div",{className:`w-11 h-11 rounded-xl ${r.bgColor} flex items-center justify-center`,children:e.jsx(r.icon,{className:`w-5 h-5 ${r.iconColor}`})})]})},r.name)})}),((n=s==null?void 0:s.open_incidents)==null?void 0:n.critical)>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3 animate-fade-in",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-red-100 flex items-center justify-center flex-shrink-0",children:e.jsx(v,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-red-800 text-sm",children:[s.open_incidents.critical," אירועי אבטחה קריטיים פתוחים!"]}),e.jsx(j,{to:"/incidents?severity=critical",className:"text-red-600 hover:text-red-700 text-sm font-medium hover:underline",children:"צפה באירועים ←"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center",children:e.jsx(L,{className:"w-4 h-4 text-red-500"})}),"מאבטחים שלא עשו צ'ק-אין"]}),((x=s==null?void 0:s.guards_not_checked_in)==null?void 0:x.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.guards_not_checked_in.map(r=>e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/80 border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-sm text-gray-900",children:[r.first_name," ",r.last_name]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[r.site_name||r.company_name," · ",r.start_time," - ",r.end_time]})]}),r.phone&&e.jsx("a",{href:`tel:${r.phone}`,className:"w-8 h-8 rounded-lg bg-red-50 hover:bg-red-100 flex items-center justify-center transition-colors",title:"התקשר",children:e.jsx(V,{className:"w-3.5 h-3.5 text-red-600"})})]},r.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center mx-auto mb-2",children:e.jsx(p,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"כל המאבטחים עשו צ'ק-אין"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-50 flex items-center justify-center",children:e.jsx(C,{className:"w-4 h-4 text-amber-600"})}),"אתרים ללא כיסוי"]}),((o=s==null?void 0:s.sites_without_coverage)==null?void 0:o.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.sites_without_coverage.map(r=>e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/80 border border-gray-100",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:r.name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[r.company_name," · ",r.start_time," - ",r.end_time]}),r.address&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:r.address})]},r.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center mx-auto mb-2",children:e.jsx(p,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"כל האתרים מכוסים"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-sky-50 flex items-center justify-center",children:e.jsx(S,{className:"w-4 h-4 text-sky-600"})}),"החלפות משמרות בשעתיים הקרובות"]}),((h=s==null?void 0:s.upcoming_shift_changes)==null?void 0:h.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.upcoming_shift_changes.map(r=>e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/80 border border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:r.site_name||r.company_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[r.start_time," - ",r.end_time," · ",r.assigned_count,"/",r.required_employees," משובצים"]})]}),e.jsx("span",{className:`badge ${r.change_type==="starting"?"badge-success":"badge-warning"}`,children:r.change_type==="starting"?"מתחילה":"מסתיימת"})]},r.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx(S,{className:"w-8 h-8 text-gray-200 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-400",children:"אין החלפות קרובות"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-50 flex items-center justify-center",children:e.jsx(k,{className:"w-4 h-4 text-amber-600"})}),"רישיונות והסמכות שפגים ב-7 ימים"]}),((t=s==null?void 0:s.expiring_licenses)==null?void 0:t.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.expiring_licenses.map(r=>e.jsx("div",{className:"p-3.5 rounded-xl bg-gray-50/80 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:r.employee_name}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:r.cert_name})]}),e.jsxs("span",{className:`text-xs font-bold px-2.5 py-1 rounded-lg ${r.days_left<=3?"bg-red-50 text-red-600":"bg-amber-50 text-amber-600"}`,children:[r.days_left," ימים"]})]})},r.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center mx-auto mb-2",children:e.jsx(p,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"אין רישיונות שפגים בקרוב"})]})]}),((d=s==null?void 0:s.today_incidents)==null?void 0:d.length)>0&&e.jsxs("div",{className:"card lg:col-span-2",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center",children:e.jsx(v,{className:"w-4 h-4 text-red-500"})}),"אירועי אבטחה היום"]}),e.jsx("div",{className:"space-y-2.5",children:s.today_incidents.map(r=>{const y={critical:"bg-red-50 text-red-700 border-red-200",high:"bg-orange-50 text-orange-700 border-orange-200",medium:"bg-amber-50 text-amber-700 border-amber-200",low:"bg-emerald-50 text-emerald-700 border-emerald-200"},u={critical:"קריטי",high:"גבוה",medium:"בינוני",low:"נמוך"};return e.jsx(j,{to:"/incidents",className:"block p-3.5 rounded-xl bg-gray-50/80 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2.5 py-1 rounded-lg text-xs font-bold border ${y[r.severity]||y.low}`,children:u[r.severity]||r.severity}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:r.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[r.site_name||r.company_name," · ",r.incident_time]})]})]})},r.id)})})]})]})]})}function B({data:s}){var a,i,c,l,n,x,o,h;const m=[{name:"לידים חדשים",value:((a=s==null?void 0:s.leads)==null?void 0:a.new_leads)||0,icon:P,iconColor:"text-sky-600",bgColor:"bg-sky-50",href:"/leads?status=new"},{name:"לקוחות פעילים",value:((i=s==null?void 0:s.customers)==null?void 0:i.active_customers)||0,icon:A,iconColor:"text-emerald-600",bgColor:"bg-emerald-50",href:"/customers"},{name:"משמרות היום",value:((c=s==null?void 0:s.shiftsToday)==null?void 0:c.total)||0,icon:R,iconColor:"text-violet-600",bgColor:"bg-violet-50",href:"/shifts"},{name:"אירועים השבוע",value:((l=s==null?void 0:s.upcomingEvents)==null?void 0:l.length)||0,icon:g,iconColor:"text-amber-600",bgColor:"bg-amber-50",href:"/events"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:m.map(t=>e.jsx(j,{to:t.href,className:"stat-card hover:shadow-elevated transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"stat-card-value",children:t.value}),e.jsx("p",{className:"stat-card-label",children:t.name})]}),e.jsx("div",{className:`w-11 h-11 rounded-xl ${t.bgColor} flex items-center justify-center`,children:e.jsx(t.icon,{className:`w-5 h-5 ${t.iconColor}`})})]})},t.name))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary-50 flex items-center justify-center",children:e.jsx($,{className:"w-4 h-4 text-primary-600"})}),"הכנסות - 6 חודשים אחרונים"]}),e.jsx("div",{className:"h-64",children:e.jsx(F,{width:"100%",height:"100%",children:e.jsxs(T,{data:(s==null?void 0:s.monthlyRevenue)||[],children:[e.jsx(D,{strokeDasharray:"3 3",stroke:"#f1f5f9"}),e.jsx(K,{dataKey:"month",tick:{fontSize:12,fill:"#94a3b8"}}),e.jsx(I,{tick:{fontSize:12,fill:"#94a3b8"}}),e.jsx(M,{formatter:t=>[`₪${t==null?void 0:t.toLocaleString()}`,"הכנסות"],contentStyle:{borderRadius:"12px",border:"1px solid #e2e8f0",boxShadow:"0 4px 16px -2px rgba(0,0,0,0.08)",fontSize:"13px"}}),e.jsx(U,{type:"monotone",dataKey:"revenue",stroke:"#0070cc",strokeWidth:2.5,dot:{r:4,fill:"#0070cc",strokeWidth:2,stroke:"#fff"},activeDot:{r:6}})]})})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-50 flex items-center justify-center",children:e.jsx(g,{className:"w-4 h-4 text-amber-600"})}),"אירועים קרובים"]}),((n=s==null?void 0:s.upcomingEvents)==null?void 0:n.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.upcomingEvents.map(t=>e.jsx(j,{to:`/events/${t.id}`,className:"block p-3.5 rounded-xl bg-gray-50/80 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:t.event_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[t.event_date," · ",t.start_time," · ",t.company_name]})]}),e.jsxs("span",{className:`badge ${t.assigned_count>=t.required_guards?"badge-success":"badge-warning"}`,children:[t.assigned_count,"/",t.required_guards]})]})},t.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx(g,{className:"w-8 h-8 text-gray-200 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-400",children:"אין אירועים קרובים"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center",children:e.jsx(L,{className:"w-4 h-4 text-red-500"})}),"משמרות לא מאוישות היום"]}),((x=s==null?void 0:s.unassignedShifts)==null?void 0:x.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.unassignedShifts.map(t=>e.jsxs("div",{className:"p-3.5 rounded-xl bg-gray-50/80 border border-gray-100",children:[e.jsxs("p",{className:"font-medium text-sm text-gray-900",children:[t.company_name," - ",t.site_name]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:[t.start_time," - ",t.end_time]})]},t.id))}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center mx-auto mb-2",children:e.jsx(p,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"כל המשמרות מאוישות"})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-amber-50 flex items-center justify-center",children:e.jsx(k,{className:"w-4 h-4 text-amber-600"})}),"חשבוניות באיחור"]}),((o=s==null?void 0:s.overdueInvoices)==null?void 0:o.length)>0?e.jsx("div",{className:"space-y-2.5",children:s.overdueInvoices.map(t=>{var d;return e.jsx("div",{className:"p-3.5 rounded-xl bg-gray-50/80 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:t.company_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["חשבונית #",t.invoice_number]})]}),e.jsxs("div",{className:"text-left",children:[e.jsxs("p",{className:"font-bold text-sm text-gray-900",children:["₪",(d=t.total_amount)==null?void 0:d.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-red-500 font-medium",children:[t.days_overdue," ימים באיחור"]})]})]})},t.id)})}):e.jsxs("div",{className:"text-center py-10",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center mx-auto mb-2",children:e.jsx(p,{className:"w-5 h-5 text-emerald-500"})}),e.jsx("p",{className:"text-sm text-emerald-600 font-medium",children:"אין חשבוניות באיחור"})]})]}),((h=s==null?void 0:s.contractsExpiring)==null?void 0:h.length)>0&&e.jsxs("div",{className:"card lg:col-span-2",children:[e.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-sky-50 flex items-center justify-center",children:e.jsx(N,{className:"w-4 h-4 text-sky-600"})}),"חוזים לחידוש בקרוב"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2.5",children:s.contractsExpiring.map(t=>{var d;return e.jsxs(j,{to:`/customers/${t.customer_id}`,className:"p-3.5 rounded-xl bg-gray-50/80 border border-gray-100 hover:bg-gray-50 hover:border-gray-200 transition-all",children:[e.jsx("p",{className:"font-medium text-sm text-gray-900",children:t.company_name}),e.jsxs("p",{className:"text-xs text-gray-500 mt-0.5",children:["תום חוזה: ",t.end_date," · ₪",(d=t.monthly_value)==null?void 0:d.toLocaleString(),"/חודש"]})]},t.id)})})]})]})]})}export{se as default};
