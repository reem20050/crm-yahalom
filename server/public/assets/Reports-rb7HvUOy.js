import{c as Ve,Z as D,$ as h,a0 as Ue,r as ve,d as M,j as n,B as at,U as it,v as st,a1 as oe,s as ot,a2 as lt}from"./index-BPBwE9NU.js";import{P as ct}from"./printer-Do1TL9Dx.js";import{f as N,_ as We,c as dt,d as ze,e as ut,i as W,g as we,p as K,h as T,j as He,k as Se,l as Ge,D as ft,m as mt,n as ne,o as Y,S as ht,A as pt,q as xt,r as Te,s as yt,t as ee,u as gt,v as vt,G as bt,w as he,x as jt,y as Ze,z as At,B as fe,E as Le,F as Xe,H as I,X as J,Y as Q,I as Nt,J as _t,T as Pt,R as G,a as Z,C as le,K as kt,L as Ot,b as wt}from"./LineChart-UP2lafZ5.js";import{S as St}from"./shield-DfQfkLR_.js";import{S as Tt}from"./star-BNPVnb_R.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Ve("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=Ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var Et=["points","className","baseLinePoints","connectNulls"];function te(){return te=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},te.apply(this,arguments)}function $t(t,e){if(t==null)return{};var a=It(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function It(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function Re(t){return Dt(t)||Bt(t)||Ct(t)||Kt()}function Kt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ct(t,e){if(t){if(typeof t=="string")return _e(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _e(t,e)}}function Bt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Dt(t){if(Array.isArray(t))return _e(t)}function _e(t,e){(e==null||e>t.length)&&(e=t.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=t[a];return r}var Ee=function(e){return e&&e.x===+e.x&&e.y===+e.y},Ft=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=[[]];return e.forEach(function(r){Ee(r)?a[a.length-1].push(r):a[a.length-1].length>0&&a.push([])}),Ee(e[0])&&a[a.length-1].push(e[0]),a[a.length-1].length<=0&&(a=a.slice(0,-1)),a},ce=function(e,a){var r=Ft(e);a&&(r=[r.reduce(function(o,s){return[].concat(Re(o),Re(s))},[])]);var i=r.map(function(o){return o.reduce(function(s,c,u){return"".concat(s).concat(u===0?"M":"L").concat(c.x,",").concat(c.y)},"")}).join("");return r.length===1?"".concat(i,"Z"):i},qt=function(e,a,r){var i=ce(e,r);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(ce(a.reverse(),r).slice(1))},Mt=function(e){var a=e.points,r=e.className,i=e.baseLinePoints,o=e.connectNulls,s=$t(e,Et);if(!a||!a.length)return null;var c=D("recharts-polygon",r);if(i&&i.length){var u=s.stroke&&s.stroke!=="none",d=qt(a,i,o);return h.createElement("g",{className:c},h.createElement("path",te({},N(s,!0),{fill:d.slice(-1)==="Z"?s.fill:"none",stroke:"none",d})),u?h.createElement("path",te({},N(s,!0),{fill:"none",d:ce(a,o)})):null,u?h.createElement("path",te({},N(s,!0),{fill:"none",d:ce(i,o)})):null)}var m=ce(a,o);return h.createElement("path",te({},N(s,!0),{fill:m.slice(-1)==="Z"?s.fill:"none",className:c,d:m}))},Vt=We,Ut=dt,Wt=ze;function zt(t,e){return t&&t.length?Vt(t,Wt(e),Ut):void 0}var Ht=zt;const Gt=Ue(Ht);var Zt=We,Xt=ze,Yt=ut;function Jt(t,e){return t&&t.length?Zt(t,Xt(e),Yt):void 0}var Qt=Jt;const er=Ue(Qt);var tr=["cx","cy","angle","ticks","axisLine"],rr=["ticks","tick","angle","tickFormatter","stroke"];function ae(t){"@babel/helpers - typeof";return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(t)}function de(){return de=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},de.apply(this,arguments)}function $e(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function V(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?$e(Object(a),!0).forEach(function(r){be(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$e(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function Ie(t,e){if(t==null)return{};var a=nr(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(a[r]=t[r])}return a}function nr(t,e){if(t==null)return{};var a={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;a[r]=t[r]}return a}function ar(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ke(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Je(r.key),r)}}function ir(t,e,a){return e&&Ke(t.prototype,e),a&&Ke(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function sr(t,e,a){return e=xe(e),or(t,Ye()?Reflect.construct(e,a||[],xe(t).constructor):e.apply(t,a))}function or(t,e){if(e&&(ae(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return lr(t)}function lr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ye(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ye=function(){return!!t})()}function xe(t){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},xe(t)}function cr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pe(t,e)}function Pe(t,e){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Pe(t,e)}function be(t,e,a){return e=Je(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Je(t){var e=dr(t,"string");return ae(e)=="symbol"?e:e+""}function dr(t,e){if(ae(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ae(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var je=function(t){function e(){return ar(this,e),sr(this,e,arguments)}return cr(e,t),ir(e,[{key:"getTickValueCoord",value:function(r){var i=r.coordinate,o=this.props,s=o.angle,c=o.cx,u=o.cy;return K(c,u,i,s)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,i;switch(r){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.angle,c=r.ticks,u=Gt(c,function(m){return m.coordinate||0}),d=er(c,function(m){return m.coordinate||0});return{cx:i,cy:o,startAngle:s,endAngle:s,innerRadius:d.coordinate||0,outerRadius:u.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.angle,c=r.ticks,u=r.axisLine,d=Ie(r,tr),m=c.reduce(function(x,f){return[Math.min(x[0],f.coordinate),Math.max(x[1],f.coordinate)]},[1/0,-1/0]),p=K(i,o,m[0],s),y=K(i,o,m[1],s),j=V(V(V({},N(d,!1)),{},{fill:"none"},N(u,!1)),{},{x1:p.x,y1:p.y,x2:y.x,y2:y.y});return h.createElement("line",de({className:"recharts-polar-radius-axis-line"},j))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,s=i.tick,c=i.angle,u=i.tickFormatter,d=i.stroke,m=Ie(i,rr),p=this.getTickTextAnchor(),y=N(m,!1),j=N(s,!1),x=o.map(function(f,g){var b=r.getTickValueCoord(f),A=V(V(V(V({textAnchor:p,transform:"rotate(".concat(90-c,", ").concat(b.x,", ").concat(b.y,")")},y),{},{stroke:"none",fill:d},j),{},{index:g},b),{},{payload:f});return h.createElement(T,de({className:D("recharts-polar-radius-axis-tick",He(s)),key:"tick-".concat(f.coordinate)},Se(r.props,f,g)),e.renderTickItem(s,A,u?u(f.value,g):f.value))});return h.createElement(T,{className:"recharts-polar-radius-axis-ticks"},x)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.axisLine,s=r.tick;return!i||!i.length?null:h.createElement(T,{className:D("recharts-polar-radius-axis",this.props.className)},o&&this.renderAxisLine(),s&&this.renderTicks(),Ge.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,i,o){var s;return h.isValidElement(r)?s=h.cloneElement(r,i):W(r)?s=r(i):s=h.createElement(we,de({},i,{className:"recharts-polar-radius-axis-tick-value"}),o),s}}])}(ve.PureComponent);be(je,"displayName","PolarRadiusAxis");be(je,"axisType","radiusAxis");be(je,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ie(t){"@babel/helpers - typeof";return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(t)}function z(){return z=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},z.apply(this,arguments)}function Ce(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function U(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Ce(Object(a),!0).forEach(function(r){Ae(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Ce(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Be(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,et(r.key),r)}}function fr(t,e,a){return e&&Be(t.prototype,e),a&&Be(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function mr(t,e,a){return e=ye(e),hr(t,Qe()?Reflect.construct(e,a||[],ye(t).constructor):e.apply(t,a))}function hr(t,e){if(e&&(ie(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pr(t)}function pr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qe=function(){return!!t})()}function ye(t){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ye(t)}function xr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ke(t,e)}function ke(t,e){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},ke(t,e)}function Ae(t,e,a){return e=et(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function et(t){var e=yr(t,"string");return ie(e)=="symbol"?e:e+""}function yr(t,e){if(ie(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(ie(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gr=Math.PI/180,De=1e-5,Ne=function(t){function e(){return ur(this,e),mr(this,e,arguments)}return xr(e,t),fr(e,[{key:"getTickLineCoord",value:function(r){var i=this.props,o=i.cx,s=i.cy,c=i.radius,u=i.orientation,d=i.tickSize,m=d||8,p=K(o,s,c,r.coordinate),y=K(o,s,c+(u==="inner"?-1:1)*m,r.coordinate);return{x1:p.x,y1:p.y,x2:y.x,y2:y.y}}},{key:"getTickTextAnchor",value:function(r){var i=this.props.orientation,o=Math.cos(-r.coordinate*gr),s;return o>De?s=i==="outer"?"start":"end":o<-De?s=i==="outer"?"end":"start":s="middle",s}},{key:"renderAxisLine",value:function(){var r=this.props,i=r.cx,o=r.cy,s=r.radius,c=r.axisLine,u=r.axisLineType,d=U(U({},N(this.props,!1)),{},{fill:"none"},N(c,!1));if(u==="circle")return h.createElement(ft,z({className:"recharts-polar-angle-axis-line"},d,{cx:i,cy:o,r:s}));var m=this.props.ticks,p=m.map(function(y){return K(i,o,s,y.coordinate)});return h.createElement(Mt,z({className:"recharts-polar-angle-axis-line"},d,{points:p}))}},{key:"renderTicks",value:function(){var r=this,i=this.props,o=i.ticks,s=i.tick,c=i.tickLine,u=i.tickFormatter,d=i.stroke,m=N(this.props,!1),p=N(s,!1),y=U(U({},m),{},{fill:"none"},N(c,!1)),j=o.map(function(x,f){var g=r.getTickLineCoord(x),b=r.getTickTextAnchor(x),A=U(U(U({textAnchor:b},m),{},{stroke:"none",fill:d},p),{},{index:f,payload:x,x:g.x2,y:g.y2});return h.createElement(T,z({className:D("recharts-polar-angle-axis-tick",He(s)),key:"tick-".concat(x.coordinate)},Se(r.props,x,f)),c&&h.createElement("line",z({className:"recharts-polar-angle-axis-tick-line"},y,g)),s&&e.renderTickItem(s,A,u?u(x.value,f):x.value))});return h.createElement(T,{className:"recharts-polar-angle-axis-ticks"},j)}},{key:"render",value:function(){var r=this.props,i=r.ticks,o=r.radius,s=r.axisLine;return o<=0||!i||!i.length?null:h.createElement(T,{className:D("recharts-polar-angle-axis",this.props.className)},s&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,i,o){var s;return h.isValidElement(r)?s=h.cloneElement(r,i):W(r)?s=r(i):s=h.createElement(we,z({},i,{className:"recharts-polar-angle-axis-tick-value"}),o),s}}])}(ve.PureComponent);Ae(Ne,"displayName","PolarAngleAxis");Ae(Ne,"axisType","angleAxis");Ae(Ne,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var pe;function se(t){"@babel/helpers - typeof";return se=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},se(t)}function re(){return re=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r])}return t},re.apply(this,arguments)}function Fe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),a.push.apply(a,r)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?Fe(Object(a),!0).forEach(function(r){w(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Fe(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}function vr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qe(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,rt(r.key),r)}}function br(t,e,a){return e&&qe(t.prototype,e),a&&qe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t}function jr(t,e,a){return e=ge(e),Ar(t,tt()?Reflect.construct(e,a||[],ge(t).constructor):e.apply(t,a))}function Ar(t,e){if(e&&(se(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nr(t)}function Nr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tt=function(){return!!t})()}function ge(t){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},ge(t)}function _r(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oe(t,e)}function Oe(t,e){return Oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Oe(t,e)}function w(t,e,a){return e=rt(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function rt(t){var e=Pr(t,"string");return se(e)=="symbol"?e:e+""}function Pr(t,e){if(se(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,e);if(se(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var C=function(t){function e(a){var r;return vr(this,e),r=jr(this,e,[a]),w(r,"pieRef",null),w(r,"sectorRefs",[]),w(r,"id",vt("recharts-pie-")),w(r,"handleAnimationEnd",function(){var i=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),W(i)&&i()}),w(r,"handleAnimationStart",function(){var i=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),W(i)&&i()}),r.state={isAnimationFinished:!a.isAnimationActive,prevIsAnimationActive:a.isAnimationActive,prevAnimationId:a.animationId,sectorToFocus:0},r}return _r(e,t),br(e,[{key:"isActiveIndex",value:function(r){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(r)!==-1:r===i}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var o=this.props,s=o.label,c=o.labelLine,u=o.dataKey,d=o.valueKey,m=N(this.props,!1),p=N(s,!1),y=N(c,!1),j=s&&s.offsetRadius||20,x=r.map(function(f,g){var b=(f.startAngle+f.endAngle)/2,A=K(f.cx,f.cy,f.outerRadius+j,b),P=v(v(v(v({},m),f),{},{stroke:"none"},p),{},{index:g,textAnchor:e.getTextAnchor(A.x,f.cx)},A),E=v(v(v(v({},m),f),{},{fill:"none",stroke:f.fill},y),{},{index:g,points:[K(f.cx,f.cy,f.outerRadius,b),A]}),k=u;return ne(u)&&ne(d)?k="value":ne(u)&&(k=d),h.createElement(T,{key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(g)},c&&e.renderLabelLineItem(c,E,"line"),e.renderLabelItem(s,P,Y(f,k)))});return h.createElement(T,{className:"recharts-pie-labels"},x)}},{key:"renderSectorsStatically",value:function(r){var i=this,o=this.props,s=o.activeShape,c=o.blendStroke,u=o.inactiveShape;return r.map(function(d,m){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&r.length!==1)return null;var p=i.isActiveIndex(m),y=u&&i.hasActiveIndex()?u:null,j=p?s:y,x=v(v({},d),{},{stroke:c?d.fill:d.stroke,tabIndex:-1});return h.createElement(T,re({ref:function(g){g&&!i.sectorRefs.includes(g)&&i.sectorRefs.push(g)},tabIndex:-1,className:"recharts-pie-sector"},Se(i.props,d,m),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(m)}),h.createElement(ht,re({option:j,isActive:p,shapeType:"sector"},x)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,i=this.props,o=i.sectors,s=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,m=i.animationId,p=this.state,y=p.prevSectors,j=p.prevIsAnimationActive;return h.createElement(pt,{begin:c,duration:u,isActive:s,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(j),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(x){var f=x.t,g=[],b=o&&o[0],A=b.startAngle;return o.forEach(function(P,E){var k=y&&y[E],L=E>0?xt(P,"paddingAngle",0):0;if(k){var B=Te(k.endAngle-k.startAngle,P.endAngle-P.startAngle),_=v(v({},P),{},{startAngle:A+L,endAngle:A+B(f)+L});g.push(_),A=_.endAngle}else{var $=P.endAngle,O=P.startAngle,F=Te(0,$-O),q=F(f),S=v(v({},P),{},{startAngle:A+L,endAngle:A+q+L});g.push(S),A=S.endAngle}}),h.createElement(T,null,r.renderSectorsStatically(g))})}},{key:"attachKeyboardHandlers",value:function(r){var i=this;r.onkeydown=function(o){if(!o.altKey)switch(o.key){case"ArrowLeft":{var s=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[s].focus(),i.setState({sectorToFocus:s});break}case"ArrowRight":{var c=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[c].focus(),i.setState({sectorToFocus:c});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,i=r.sectors,o=r.isAnimationActive,s=this.state.prevSectors;return o&&i&&i.length&&(!s||!yt(s,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,i=this.props,o=i.hide,s=i.sectors,c=i.className,u=i.label,d=i.cx,m=i.cy,p=i.innerRadius,y=i.outerRadius,j=i.isAnimationActive,x=this.state.isAnimationFinished;if(o||!s||!s.length||!ee(d)||!ee(m)||!ee(p)||!ee(y))return null;var f=D("recharts-pie",c);return h.createElement(T,{tabIndex:this.props.rootTabIndex,className:f,ref:function(b){r.pieRef=b}},this.renderSectors(),u&&this.renderLabels(s),Ge.renderCallByParent(this.props,null,!1),(!j||x)&&gt.renderCallByParent(this.props,s,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,i){return i.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==i.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:r.sectors!==i.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,i){return r>i?"start":r<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,i,o){if(h.isValidElement(r))return h.cloneElement(r,i);if(W(r))return r(i);var s=D("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return h.createElement(mt,re({},i,{key:o,type:"linear",className:s}))}},{key:"renderLabelItem",value:function(r,i,o){if(h.isValidElement(r))return h.cloneElement(r,i);var s=o;if(W(r)&&(s=r(i),h.isValidElement(s)))return s;var c=D("recharts-pie-label-text",typeof r!="boolean"&&!W(r)?r.className:"");return h.createElement(we,re({},i,{alignmentBaseline:"middle",className:c}),s)}}])}(ve.PureComponent);pe=C;w(C,"displayName","Pie");w(C,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!bt.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});w(C,"parseDeltaAngle",function(t,e){var a=he(e-t),r=Math.min(Math.abs(e-t),360);return a*r});w(C,"getRealPieData",function(t){var e=t.data,a=t.children,r=N(t,!1),i=jt(a,Ze);return e&&e.length?e.map(function(o,s){return v(v(v({payload:o},r),o),i&&i[s]&&i[s].props)}):i&&i.length?i.map(function(o){return v(v({},r),o.props)}):[]});w(C,"parseCoordinateOfPie",function(t,e){var a=e.top,r=e.left,i=e.width,o=e.height,s=At(i,o),c=r+fe(t.cx,i,i/2),u=a+fe(t.cy,o,o/2),d=fe(t.innerRadius,s,0),m=fe(t.outerRadius,s,s*.8),p=t.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:m,maxRadius:p}});w(C,"getComposedData",function(t){var e=t.item,a=t.offset,r=e.type.defaultProps!==void 0?v(v({},e.type.defaultProps),e.props):e.props,i=pe.getRealPieData(r);if(!i||!i.length)return null;var o=r.cornerRadius,s=r.startAngle,c=r.endAngle,u=r.paddingAngle,d=r.dataKey,m=r.nameKey,p=r.valueKey,y=r.tooltipType,j=Math.abs(r.minAngle),x=pe.parseCoordinateOfPie(r,a),f=pe.parseDeltaAngle(s,c),g=Math.abs(f),b=d;ne(d)&&ne(p)?(Le(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b="value"):ne(d)&&(Le(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),b=p);var A=i.filter(function(_){return Y(_,b,0)!==0}).length,P=(g>=360?A:A-1)*u,E=g-A*j-P,k=i.reduce(function(_,$){var O=Y($,b,0);return _+(ee(O)?O:0)},0),L;if(k>0){var B;L=i.map(function(_,$){var O=Y(_,b,0),F=Y(_,m,$),q=(ee(O)?O:0)/k,S;$?S=B.endAngle+he(f)*u*(O!==0?1:0):S=s;var l=S+he(f)*((O!==0?j:0)+q*E),R=(S+l)/2,H=(x.innerRadius+x.outerRadius)/2,ue=[{name:F,value:O,payload:_,dataKey:b,type:y}],nt=K(x.cx,x.cy,H,R);return B=v(v(v({percent:q,cornerRadius:o,name:F,tooltipPayload:ue,midAngle:R,middleRadius:H,tooltipPosition:nt},_),x),{},{value:Y(_,b),startAngle:S,endAngle:l,payload:_,paddingAngle:he(f)*u}),B})}return v(v({},x),{},{sectors:L,data:i})});var me=Xe({chartName:"BarChart",GraphicalChild:I,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:J},{axisType:"yAxis",AxisComp:Q}],formatAxisMap:Nt}),kr=Xe({chartName:"PieChart",GraphicalChild:C,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ne},{axisType:"radiusAxis",AxisComp:je}],formatAxisMap:_t,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const Me=["#0ea5e9","#22c55e","#f59e0b","#ef4444","#8b5cf6"];function X(t,e,a){if(!t||t.length===0)return;const r=Object.keys(e),o=[Object.values(e).join(",")];for(const m of t){const p=r.map(y=>{const j=m[y]??"";return`"${String(j).replace(/"/g,'""')}"`});o.push(p.join(","))}const s="\uFEFF"+o.join(`
`),c=new Blob([s],{type:"text/csv;charset=utf-8;"}),u=URL.createObjectURL(c),d=document.createElement("a");d.href=u,d.download=a,d.click(),URL.revokeObjectURL(u)}function Rr(){var p,y,j,x,f,g,b,A,P,E,k,L,B,_,$,O,F,q,S;const[t,e]=ve.useState("sales"),{data:a}=M({queryKey:["reports","sales"],queryFn:()=>oe.sales().then(l=>l.data),enabled:t==="sales"}),{data:r}=M({queryKey:["reports","customers"],queryFn:()=>oe.customers().then(l=>l.data),enabled:t==="customers"}),{data:i}=M({queryKey:["reports","employees"],queryFn:()=>oe.employees().then(l=>l.data),enabled:t==="employees"}),{data:o}=M({queryKey:["reports","financial"],queryFn:()=>oe.financial().then(l=>l.data),enabled:t==="financial"}),{data:s}=M({queryKey:["reports","profit-loss"],queryFn:()=>oe.profitLoss().then(l=>l.data),enabled:t==="profitloss"}),{data:c}=M({queryKey:["reports","performance-rankings"],queryFn:()=>ot.getRankings().then(l=>l.data),enabled:t==="performance"}),{data:u}=M({queryKey:["reports","incident-stats"],queryFn:()=>lt.getStats().then(l=>l.data),enabled:t==="performance"}),d=[{id:"sales",label:"מכירות",icon:Pt},{id:"customers",label:"לקוחות",icon:at},{id:"employees",label:"עובדים",icon:it},{id:"financial",label:"כספים",icon:Lt},{id:"profitloss",label:"רווח והפסד",icon:st},{id:"performance",label:"ביצועי מאבטחים",icon:St}],m=()=>{switch(t){case"sales":a!=null&&a.leadsBySource&&X(a.leadsBySource,{source:"מקור",count:"כמות"},"sales-by-source.csv");break;case"customers":r!=null&&r.revenueByCustomer&&X(r.revenueByCustomer,{company_name:"חברה",total_revenue:"הכנסות"},"customers-revenue.csv");break;case"employees":i!=null&&i.hoursBreakdown&&X(i.hoursBreakdown,{name:"עובד",total_hours:"שעות",days_worked:"ימי עבודה",saturday_hours:"שעות שבת"},"employees-hours.csv");break;case"financial":o!=null&&o.revenueByCustomer&&X(o.revenueByCustomer,{company_name:"לקוח",paid:"שולם",pending:"ממתין"},"financial-revenue.csv");break;case"profitloss":s!=null&&s.customerProfitability&&X(s.customerProfitability,{company_name:"לקוח",revenue:"הכנסות",labor_cost:"עלות עבודה",profit:"רווח",margin:"מרווח %",hours:"שעות"},"profit-loss-by-customer.csv");break;case"performance":c!=null&&c.rankings&&X(c.rankings,{first_name:"שם פרטי",last_name:"שם משפחה",avg_rating:"דירוג ממוצע",total_ratings:"דירוגים",shifts_completed:"משמרות הושלמו",shifts_total:'סה"כ משמרות'},"guard-performance.csv");break}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"דוחות"}),n.jsx("p",{className:"text-gray-500",children:"ניתוח נתונים וביצועים"})]}),n.jsxs("div",{className:"flex items-center gap-2 no-print",children:[n.jsxs("button",{onClick:m,className:"btn-secondary flex items-center gap-2",children:[n.jsx(Rt,{className:"w-5 h-5"}),"ייצוא לאקסל"]}),n.jsxs("button",{onClick:()=>window.print(),className:"btn-secondary flex items-center gap-2",children:[n.jsx(ct,{className:"w-5 h-5"}),"הדפס"]})]})]}),n.jsx("div",{className:"border-b",children:n.jsx("nav",{className:"flex gap-4",children:d.map(l=>n.jsxs("button",{onClick:()=>e(l.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${t===l.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[n.jsx(l.icon,{className:"w-5 h-5"}),l.label]},l.id))})}),t==="sales"&&a&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"המרת לידים"}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-gray-900",children:((p=a.conversionRate)==null?void 0:p.total_leads)||0}),n.jsx("p",{className:"text-sm text-gray-500",children:"לידים"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-3xl font-bold text-green-600",children:((y=a.conversionRate)==null?void 0:y.won)||0}),n.jsx("p",{className:"text-sm text-gray-500",children:"נסגרו"})]}),n.jsxs("div",{className:"text-center",children:[n.jsxs("p",{className:"text-3xl font-bold text-primary-600",children:[((j=a.conversionRate)==null?void 0:j.conversion_rate)||0,"%"]}),n.jsx("p",{className:"text-sm text-gray-500",children:"אחוז המרה"})]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"לידים לפי מקור"}),n.jsx("div",{className:"h-64",children:n.jsx(G,{width:"100%",height:"100%",children:n.jsxs(kr,{children:[n.jsx(C,{data:a.leadsBySource||[],dataKey:"count",nameKey:"source",cx:"50%",cy:"50%",outerRadius:80,label:!0,children:(a.leadsBySource||[]).map((l,R)=>n.jsx(Ze,{fill:Me[R%Me.length]},R))}),n.jsx(Z,{})]})})})]}),n.jsxs("div",{className:"card lg:col-span-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"לידים חודשיים"}),n.jsx("div",{className:"h-64",children:n.jsx(G,{width:"100%",height:"100%",children:n.jsxs(me,{data:a.monthlyLeads||[],children:[n.jsx(le,{strokeDasharray:"3 3"}),n.jsx(J,{dataKey:"month"}),n.jsx(Q,{}),n.jsx(Z,{}),n.jsx(I,{dataKey:"total",fill:"#0ea5e9",name:"סה״כ"}),n.jsx(I,{dataKey:"won",fill:"#22c55e",name:"נסגרו"})]})})})]})]}),t==="customers"&&r&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"הכנסות לפי לקוח (Top 10)"}),n.jsx("div",{className:"h-64",children:n.jsx(G,{width:"100%",height:"100%",children:n.jsxs(me,{data:r.revenueByCustomer||[],layout:"vertical",children:[n.jsx(le,{strokeDasharray:"3 3"}),n.jsx(J,{type:"number"}),n.jsx(Q,{dataKey:"company_name",type:"category",width:100}),n.jsx(Z,{formatter:l=>`₪${l.toLocaleString()}`}),n.jsx(I,{dataKey:"total_revenue",fill:"#0ea5e9"})]})})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"לקוחות בסיכון (90 יום ללא פעילות)"}),((x=r.churnRisk)==null?void 0:x.length)>0?n.jsx("div",{className:"space-y-2",children:r.churnRisk.map(l=>n.jsx("div",{className:"p-3 bg-red-50 rounded-lg",children:n.jsx("p",{className:"font-medium text-red-800",children:l.company_name})},l.id))}):n.jsx("p",{className:"text-green-600 text-center py-8",children:"אין לקוחות בסיכון"})]})]}),t==="employees"&&i&&n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.jsxs("div",{className:"card lg:col-span-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"שעות עבודה חודשיות"}),n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"עובד"}),n.jsx("th",{children:"שעות"}),n.jsx("th",{children:"ימי עבודה"}),n.jsx("th",{children:"שעות שבת"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:(i.hoursBreakdown||[]).slice(0,10).map(l=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:l.name}),n.jsx("td",{children:l.total_hours||0}),n.jsx("td",{children:l.days_worked||0}),n.jsx("td",{children:l.saturday_hours||0})]},l.id))})]})})]})}),t==="financial"&&o&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"card lg:col-span-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"הכנסות חודשיות"}),n.jsx("div",{className:"h-64",children:n.jsx(G,{width:"100%",height:"100%",children:n.jsxs(me,{data:o.monthlyRevenue||[],children:[n.jsx(le,{strokeDasharray:"3 3"}),n.jsx(J,{dataKey:"month"}),n.jsx(Q,{}),n.jsx(Z,{formatter:l=>`₪${l==null?void 0:l.toLocaleString()}`}),n.jsx(I,{dataKey:"collected",fill:"#22c55e",name:"נגבה"}),n.jsx(I,{dataKey:"invoiced",fill:"#0ea5e9",name:"הופק"})]})})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"תשלומים פתוחים"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[n.jsx("span",{children:"ממתין לתשלום"}),n.jsxs("span",{className:"font-bold",children:["₪",(((f=o.outstandingPayments)==null?void 0:f.pending)||0).toLocaleString()]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[n.jsx("span",{children:"באיחור"}),n.jsxs("span",{className:"font-bold text-red-600",children:["₪",(((g=o.outstandingPayments)==null?void 0:g.overdue)||0).toLocaleString()]})]}),n.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-100 rounded-lg",children:[n.jsx("span",{children:"באיחור 60+ יום"}),n.jsxs("span",{className:"font-bold text-red-700",children:["₪",(((b=o.outstandingPayments)==null?void 0:b.overdue_60)||0).toLocaleString()]})]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"הכנסות לפי לקוח"}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:(o.revenueByCustomer||[]).map(l=>n.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[n.jsx("span",{className:"truncate",children:l.company_name}),n.jsxs("span",{className:"font-medium text-green-600",children:["₪",(l.paid||0).toLocaleString()]})]},l.company_name))})]})]}),t==="profitloss"&&s&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"card text-center",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"הכנסות (שנתי)"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["₪",(((A=s.totals)==null?void 0:A.revenue)||0).toLocaleString()]})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"עלות עבודה"}),n.jsxs("p",{className:"text-2xl font-bold text-red-600",children:["₪",(((P=s.totals)==null?void 0:P.labor_cost)||0).toLocaleString()]})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"רווח נקי"}),n.jsxs("p",{className:`text-2xl font-bold ${(((E=s.totals)==null?void 0:E.profit)||0)>=0?"text-green-600":"text-red-600"}`,children:["₪",(((k=s.totals)==null?void 0:k.profit)||0).toLocaleString()]})]}),n.jsxs("div",{className:"card text-center",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"מרווח רווח"}),n.jsxs("p",{className:`text-2xl font-bold ${(((L=s.totals)==null?void 0:L.margin)||0)>=0?"text-blue-600":"text-red-600"}`,children:[((B=s.totals)==null?void 0:B.margin)||0,"%"]})]})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"רווח והפסד חודשי"}),n.jsx("div",{className:"h-72",children:n.jsx(G,{width:"100%",height:"100%",children:n.jsxs(me,{data:s.monthly||[],children:[n.jsx(le,{strokeDasharray:"3 3"}),n.jsx(J,{dataKey:"month"}),n.jsx(Q,{}),n.jsx(Z,{formatter:l=>`₪${l==null?void 0:l.toLocaleString()}`}),n.jsx(kt,{}),n.jsx(I,{dataKey:"revenue",fill:"#22c55e",name:"הכנסות"}),n.jsx(I,{dataKey:"labor_cost",fill:"#ef4444",name:"עלות עבודה"}),n.jsx(I,{dataKey:"profit",fill:"#3b82f6",name:"רווח"})]})})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"מגמת מרווח רווח"}),n.jsx("div",{className:"h-56",children:n.jsx(G,{width:"100%",height:"100%",children:n.jsxs(Ot,{data:s.monthly||[],children:[n.jsx(le,{strokeDasharray:"3 3"}),n.jsx(J,{dataKey:"month"}),n.jsx(Q,{unit:"%"}),n.jsx(Z,{formatter:l=>`${l}%`}),n.jsx(wt,{type:"monotone",dataKey:"margin",stroke:"#8b5cf6",strokeWidth:2,name:"מרווח %"})]})})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"פירוט חודשי"}),n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"חודש"}),n.jsx("th",{children:"הכנסות"}),n.jsx("th",{children:"עלות עבודה"}),n.jsx("th",{children:"רווח"}),n.jsx("th",{children:"מרווח"}),n.jsx("th",{children:"שעות"}),n.jsx("th",{children:"עובדים"})]})}),n.jsxs("tbody",{className:"divide-y divide-gray-200",children:[(s.monthly||[]).map(l=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:l.month}),n.jsxs("td",{className:"text-green-600",children:["₪",(l.revenue||0).toLocaleString()]}),n.jsxs("td",{className:"text-red-600",children:["₪",(l.labor_cost||0).toLocaleString()]}),n.jsxs("td",{className:l.profit>=0?"text-green-700 font-bold":"text-red-700 font-bold",children:["₪",(l.profit||0).toLocaleString()]}),n.jsx("td",{children:n.jsxs("span",{className:`badge ${l.margin>=30?"badge-green":l.margin>=10?"badge-yellow":"badge-red"}`,children:[l.margin,"%"]})}),n.jsx("td",{children:(l.total_hours||0).toLocaleString()}),n.jsx("td",{children:l.unique_employees||0})]},l.month)),((_=s.monthly)==null?void 0:_.length)>0&&n.jsxs("tr",{className:"bg-gray-50 font-bold",children:[n.jsx("td",{children:'סה"כ'}),n.jsxs("td",{className:"text-green-600",children:["₪",((($=s.totals)==null?void 0:$.revenue)||0).toLocaleString()]}),n.jsxs("td",{className:"text-red-600",children:["₪",(((O=s.totals)==null?void 0:O.labor_cost)||0).toLocaleString()]}),n.jsxs("td",{className:((F=s.totals)==null?void 0:F.profit)>=0?"text-green-700":"text-red-700",children:["₪",(((q=s.totals)==null?void 0:q.profit)||0).toLocaleString()]}),n.jsxs("td",{children:[((S=s.totals)==null?void 0:S.margin)||0,"%"]}),n.jsx("td",{}),n.jsx("td",{})]})]})]})})]}),n.jsxs("div",{className:"card",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"רווחיות לפי לקוח"}),n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"לקוח"}),n.jsx("th",{children:"הכנסות"}),n.jsx("th",{children:"עלות עבודה"}),n.jsx("th",{children:"רווח"}),n.jsx("th",{children:"מרווח"}),n.jsx("th",{children:"שעות"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:(s.customerProfitability||[]).map(l=>n.jsxs("tr",{children:[n.jsx("td",{className:"font-medium",children:l.company_name}),n.jsxs("td",{className:"text-green-600",children:["₪",(l.revenue||0).toLocaleString()]}),n.jsxs("td",{className:"text-red-600",children:["₪",(l.labor_cost||0).toLocaleString()]}),n.jsxs("td",{className:l.profit>=0?"text-green-700 font-bold":"text-red-700 font-bold",children:["₪",(l.profit||0).toLocaleString()]}),n.jsx("td",{children:n.jsxs("span",{className:`badge ${l.margin>=30?"badge-green":l.margin>=10?"badge-yellow":"badge-red"}`,children:[l.margin,"%"]})}),n.jsx("td",{children:(l.hours||0).toLocaleString()})]},l.company_name))})]})}),(!s.customerProfitability||s.customerProfitability.length===0)&&n.jsx("p",{className:"text-gray-400 text-center py-8",children:"אין נתוני רווחיות"})]})]}),t==="performance"&&n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u&&n.jsxs("div",{className:"card lg:col-span-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"סטטיסטיקות אירועי אבטחה"}),n.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-red-600",children:u.open||0}),n.jsx("p",{className:"text-sm text-gray-500",children:"פתוחים"})]}),n.jsxs("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:u.investigating||0}),n.jsx("p",{className:"text-sm text-gray-500",children:"בחקירה"})]}),n.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:u.resolved||0}),n.jsx("p",{className:"text-sm text-gray-500",children:"נפתרו"})]}),n.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:u.total||0}),n.jsx("p",{className:"text-sm text-gray-500",children:'סה"כ'})]})]})]}),n.jsxs("div",{className:"card lg:col-span-2",children:[n.jsx("h3",{className:"text-lg font-semibold mb-4",children:"דירוג מאבטחים"}),n.jsx("div",{className:"table-container",children:n.jsxs("table",{className:"table",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"דירוג"}),n.jsx("th",{children:"מאבטח"}),n.jsx("th",{children:"ציון ממוצע"}),n.jsx("th",{children:"דירוגים"}),n.jsx("th",{children:"משמרות הושלמו"}),n.jsx("th",{children:"אחוז נוכחות"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:((c==null?void 0:c.rankings)||[]).map((l,R)=>{const H=l.shifts_total>0?Math.round(l.shifts_completed/l.shifts_total*100):0;return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("span",{className:`inline-flex items-center justify-center w-7 h-7 rounded-full text-sm font-bold ${R===0?"bg-yellow-100 text-yellow-700":R===1?"bg-gray-100 text-gray-700":R===2?"bg-orange-100 text-orange-700":"bg-white text-gray-500"}`,children:R+1})}),n.jsxs("td",{className:"font-medium",children:[l.first_name," ",l.last_name]}),n.jsx("td",{children:n.jsx("div",{className:"flex items-center gap-1",children:l.avg_rating?n.jsxs(n.Fragment,{children:[[1,2,3,4,5].map(ue=>n.jsx(Tt,{className:`w-3.5 h-3.5 ${ue<=Math.round(l.avg_rating)?"text-yellow-400 fill-yellow-400":"text-gray-300"}`},ue)),n.jsx("span",{className:"text-sm mr-1",children:l.avg_rating})]}):n.jsx("span",{className:"text-gray-400 text-sm",children:"אין דירוג"})})}),n.jsx("td",{children:l.total_ratings||0}),n.jsxs("td",{children:[l.shifts_completed,"/",l.shifts_total]}),n.jsx("td",{children:n.jsxs("span",{className:`font-medium ${H>=90?"text-green-600":H>=70?"text-yellow-600":"text-red-600"}`,children:[H,"%"]})})]},l.id)})})]})}),(!(c!=null&&c.rankings)||c.rankings.length===0)&&n.jsx("p",{className:"text-gray-400 text-center py-8",children:"אין נתוני ביצועים"})]})]})]})}export{Rr as default};
