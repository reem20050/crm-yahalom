import{t as y,r as a,j as e,X as v}from"./index-CYVBYVvl.js";import{M as f}from"./message-circle-CjovvPKe.js";import{E as N}from"./external-link-BuJEn0AY.js";/**
 * @license lucide-react v0.302.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=y("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function E(n){if(!n)return"";let t=n.replace(/[^0-9]/g,"");return t.startsWith("0")&&(t="972"+t.slice(1)),t.length===9&&(t="972"+t),t}function m(n,t){const i=E(n);if(!i)return;let r=`https://wa.me/${i}`;t&&(r+=`?text=${encodeURIComponent(t)}`),window.open(r,"_blank")}function A({phone:n,name:t,size:i="md",defaultMessage:r}){const[o,l]=a.useState(!1),[c,x]=a.useState(r||""),d=a.useRef(null),p=a.useRef(null);a.useEffect(()=>{r&&x(r)},[r]),a.useEffect(()=>{o&&setTimeout(()=>{var s;return(s=p.current)==null?void 0:s.focus()},50)},[o]),a.useEffect(()=>{if(!o)return;const s=w=>{d.current&&!d.current.contains(w.target)&&l(!1)},u=setTimeout(()=>{document.addEventListener("mousedown",s)},0);return()=>{clearTimeout(u),document.removeEventListener("mousedown",s)}},[o]),a.useEffect(()=>{if(!o)return;const s=u=>{u.key==="Escape"&&l(!1)};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[o]);const h=()=>{c.trim()&&(m(n,c),l(!1))},g=()=>{m(n),l(!1)},b=i==="sm"?"w-4 h-4":"w-5 h-5",j=i==="sm"?"w-8 h-8":"w-10 h-10";return n?e.jsxs("div",{className:"relative inline-block",ref:d,children:[e.jsx("button",{onClick:()=>l(!o),title:"שלח הודעת WhatsApp",className:`${j} flex items-center justify-center rounded-lg bg-green-50 text-green-600 hover:bg-green-100 hover:text-green-700 transition-colors`,children:e.jsx(f,{className:b})}),o&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-80 bg-white rounded-xl shadow-2xl border border-gray-200 z-50 overflow-hidden",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b bg-green-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-green-600"}),e.jsxs("h3",{className:"text-sm font-semibold text-gray-900",children:["שלח הודעה ל-",t]})]}),e.jsx("button",{onClick:()=>l(!1),className:"p-1 rounded-lg hover:bg-green-100 transition-colors",children:e.jsx(v,{className:"w-4 h-4 text-gray-400"})})]}),e.jsx("div",{className:"p-4",children:e.jsx("textarea",{ref:p,value:c,onChange:s=>x(s.target.value),placeholder:"כתוב הודעה...",rows:4,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent placeholder-gray-400",dir:"rtl"})}),e.jsxs("div",{className:"flex items-center gap-2 px-4 pb-4",children:[e.jsxs("button",{onClick:h,disabled:!c.trim(),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:"שלח עם הודעה"})]}),e.jsxs("button",{onClick:g,className:"flex items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"פתח צ'אט"})]})]})]})]}):null}function L({phone:n,message:t,size:i=14}){return n?e.jsx("button",{onClick:r=>{r.stopPropagation(),m(n,t)},title:"שלח WhatsApp",className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-green-500 hover:bg-green-600 text-white transition-colors",children:e.jsx(f,{size:i})}):null}export{k as S,A as W,L as a,m as o};
